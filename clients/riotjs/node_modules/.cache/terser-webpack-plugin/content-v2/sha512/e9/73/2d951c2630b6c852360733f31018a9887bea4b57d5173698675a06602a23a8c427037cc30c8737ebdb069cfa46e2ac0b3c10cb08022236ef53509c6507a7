{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{118:function(t,e,a){\"use strict\";a.r(e);var i=a(0);a(12);a(1).tag2(\"streamsdowload\",'<div class=\"row\"> <div class=\"col-md-12\"> <div class=\"widget-2\"> <div class=\"card shadow-base\"> <div class=\"card-header borderbottom0\"> <div class=\"dropdown mg-r-10\"> <a href=\"\" class=\"tx-gray-800 d-inline-block\" data-toggle=\"dropdown\"> <div class=\"ht-45 pd-x-20 bd d-flex align-items-center justify-content-center height40\"> <i if=\"{isXlsxActive || isJsonActive || isCsvxActive}\" class=\"fa fa-spinner fa-spin mg-r-10\"></i> <span class=\"mg-r-10 tx-13 tx-medium\">Download</span> <i class=\"fa fa-angle-down mg-l-10\"></i> </div> </a> <div class=\"dropdown-menu pd-10 wd-200\"> <nav class=\"nav nav-style-1 flex-column\"> <a class=\"{isXlsxActive ? \\'nav-link disabled\\' : \\'nav-link cursor-pointer\\'}\" onclick=\"{() => exportStreams(⁗xlsx⁗)}\"> <i if=\"{!isXlsxActive}\" class=\"fa fa-download tx-22\"></i> <i if=\"{isXlsxActive}\" class=\"fa fa-spinner fa-spin tx-22\"></i> XLS</a> <a class=\"{isCsvxActive ? \\'nav-link disabled\\' : \\'nav-link cursor-pointer\\'}\" onclick=\"{() => exportStreams(⁗csv⁗)}\"> <i if=\"{!isCsvxActive}\" class=\"fa fa-download tx-22\"></i> <i if=\"{isCsvxActive}\" class=\"fa fa-spinner fa-spin tx-22\"></i> CSV </a> <a class=\"{isJsonActive ? \\'nav-link disabled\\' : \\'nav-link cursor-pointer\\'}\" onclick=\"{() => exportStreams(⁗json⁗)}\"> <i if=\"{!isJsonActive}\" class=\"fa fa-download tx-22\"></i> <i if=\"{isJsonActive}\" class=\"fa fa-spinner fa-spin tx-22\"></i> JSON</a> </nav> </div> </div> <div class=\"btn-group\" role=\"group\" aria-label=\"Limit\"> <select class=\"btn btn-outline-info btn-icon mg-r-5 pull-right mg-t-20 selectTimeline cursor-pointer\" onchange=\"{changeLimit}\" ref=\"limitPage\"> <option value=\"5\" selected=\"{selected:pagelimitvalue == 5}\">5</option> <option value=\"10\" selected=\"{selected:pagelimitvalue == 10}\">10</option> <option value=\"20\" selected=\"{selected:pagelimitvalue == 20}\">20</option> <option value=\"50\" selected=\"{selected:pagelimitvalue == 50}\">50</option> <option value=\"100\" selected=\"{selected:pagelimitvalue == 100}\">100</option> <option value=\"300\" selected=\"{selected:pagelimitvalue == 300}\">300</option> </select> <pagging pagination=\"{pagination}\" class=\"pagingrightstreams\"></pagging> </div> </div> </div> </div> </div> </div> <div class=\"row mg-t-10\" if=\"{isLoading}\"> <div class=\"col-md-12\"> <div class=\"card shadow-base bd-0 pd-25 ht-100p\" if=\"{isLoading}\"> <div class=\"media mg-b-25\"> <div class=\"ripple-loader\"></div> </div> </div> </div> </div> <div class=\"row mg-t-10\" if=\"{total == 0}\"> <div class=\"col-md-12\"> <div class=\"card shadow-base bd-0 pd-25 ht-100p\"> <div class=\" mg-b-25 textcenter mg-t-20\"> No data found, please input another dates </div> </div> </div> </div> <div class=\"row mg-t-10 {ripple-loader-sentiment-r10:isLoading}\" each=\"{items}\" id=\"setvaleu{_id}\"> <div class=\"col-md-12\"> <div class=\"card shadow-base bd-0 pd-20 ht-100p\"> <div if=\"{isLoadingset(_id)}\" class=\"ripple-loader-sentiment\"></div> <div class=\"media mg-b-25\"> <img alt=\"\" riot-src=\"{user.avatar}\" if=\"{user.avatar}\" class=\"d-flex wd-40 rounded-circle mg-r-15\" alt=\"Image\" onerror=\"this.onerror=null;this.src=\\'https://ui-avatars.com/api/?background=0D8ABC&color=fff&length=2&rounded=true&name={user.name}\\'\" name=\"{user.real_name ? user.real_name : user.name}\"> <img alt=\"\" riot-src=\"https://ui-avatars.com/api/?background=0D8ABC&color=fff&length=2&rounded=true&name={user.name}\" if=\"{!user.avatar}\" class=\"d-flex wd-40 rounded-circle mg-r-15\" alt=\"Image\" onerror=\"this.onerror=null;this.src=\\'https://ui-avatars.com/api/?background=0D8ABC&color=fff&length=2&rounded=true&name={user.name}\\';\" name=\"{user.real_name ? user.real_name : user.name}\"> <div class=\"media-body mg-t-2\"> <h6 class=\"mg-b-5 tx-14 mg-t-0\"> <a rel=\"noopener\" href=\"{source}\" target=\"_blank\" class=\"tx-inverse\">{user.real_name ? user.real_name : user.name}</a> <p class=\"tx-12 pull-right mg-r-5\"> <i class=\"icon ion-calendar\"></i> {date_format}</p> </h6> <div lass=\"tx-12\"> <span><a rel=\"noopener\" href=\"{source}\" target=\"_blank\" class=\"-metricsentimentone metricsentiment cursor-pointer\"> <i class=\" fa fa-share-alt\" aria-hidden=\"true\"></i> {service} </a></span> <span class=\"metricsentiment cursor-pointer\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"likes {likes ? likes.formatMoney(0) : 0}\"> <i class=\" fa fa-thumbs-o-up\" aria-hidden=\"true\"></i> {likes ? likes.formatMoney(0) : 0}</span> <span class=\"metricsentiment cursor-pointer\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"replies {shares ? shares.formatMoney(0) : 0}\"> <i class=\" fa fa-share-square-o\" aria-hidden=\"true\"></i> {shares ? shares.formatMoney(0) : 0}</span> <span class=\"metricsentiment cursor-pointer\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"comments {comments ? comments.formatMoney(0) : 0}\"> <i class=\" fa fa-commenting\" aria-hidden=\"true\"></i> {comments ? comments.formatMoney(0) : 0} </span> <span class=\"metricsentiment cursor-pointer\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"view {views ? views.formatMoney(0) : 0}\"> <i class=\" fa fa-eye\" aria-hidden=\"true\"></i> {views ? views.formatMoney(0) : 0} </span> <span class=\"metricsentiment cursor-pointer\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"engagement {engagement ? engagement.formatMoney(0) : 0}\"> <i class=\"fa fa-line-chart\" aria-hidden=\"true\"></i> {engagement ? engagement.formatMoney(0) : 0} </span> <span class=\"metricsentiment cursor-pointer\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"reach {reach ? reach.formatMoney(0) : 0}\"> <i class=\"fa fa-users\" aria-hidden=\"true\"></i> {reach ? reach.formatMoney(0) : 0} </span> </div> </div> </div> <p class=\"{tx-17:opts.corection == \\'true\\'} mg-b-25 {tx-inverse:opts.corection == \\'true\\'} {color222:opts.corection == \\'false\\'} textjustify\"> <span> <img alt=\"\" if=\"{image != ⁗⁗ && image != null}\" riot-src=\"{image}\" class=\"imagestreams cursor-pointer\" data-toggle=\"modal\" data-target=\"#buzzerimg\" onclick=\"{imgmodalf}\" onerror=\"this.onerror=null;this.src=/assets/images/components/icons/imagenotavailable.jpg\\';\" name=\"{user.real_name ? user.real_name : user.name}\"> </span> {text.length > 500 ? text.substring(0,500) + \\'...\\' : text} </p> <div class=\"media align-items-center pull-right mg-t-10\"> <div class=\"media-body mg-t-min-10\"> <div class=\"btn btn-outline-danger rounded-circle cursor-pointer pull-right btncirclesentiment40\" onclick=\"{deletes}\"><i class=\"fa fa-trash-o\"></i></div> <div id=\"neutral\" class=\"btn btn-outline-neutral rounded-circle cursor-pointer pull-right mg-r-10 {active:sentiment ? sentiment.value == 0 : null} btncirclesentiment40\" onclick=\"{setSentiment}\"><i id=\"neutral\" class=\"fa fa-question-circle\"></i></div> <div id=\"negative\" class=\"btn btn-outline-negative rounded-circle cursor-pointer pull-right mg-r-10 {active:sentiment ? sentiment.value < 0 : null} btncirclesentiment40\" onclick=\"{setSentiment}\"><i id=\"negative\" class=\"fa fa-thumbs-o-down\"></i></div> <div id=\"positive\" class=\"btn btn-outline-positive rounded-circle cursor-pointer pull-right mg-r-10 {active:sentiment ? sentiment.value > 0 : null} btncirclesentiment40\" onclick=\"{setSentiment}\"><i id=\"positive\" class=\"fa fa-thumbs-o-up\"></i></div> <div id=\"sociomile\" class=\"btn btn-outline-indigo rounded-circle cursor-pointer {active:is_connect_sociomile} pull-right mg-r-10 btncirclesentiment40\" onclick=\"{integrasi}\"><i id=\"sociomile\" class=\"cursor-pointer ivocon i-sociomile hs-grey btncirclesentimentposition sociomile mg-r-0\" style=\"margin-left:0px;\"></i></div> </div> </div> </div> </div> </div> <div class=\"modal fade\" id=\"buzzerimg\" tabindex=\"-1\"> <div class=\"modal-dialog\" role=\"document\"> <div class=\"modal-content\"> <div class=\"modal-body\"> <img alt=\"\" riot-src=\"{imgmodal}\" class=\"width450\" onerror=\"this.onerror=null;this.src=/assets/images/components/icons/imagenotavailable.jpg\\';\" name=\"{modalName}\"></img> </div> <div class=\"modal-footer\"> <div class=\"col-md-12\"> <button type=\"button\" id=\"cancel\" class=\"btn btn-outline-primary btn-block mg-b-10 mg-t-10 mg-r-10 width100 pull-right\" data-dismiss=\"modal\">Close</button> </div> </div> </div> </div> </div> <table id=\"excelDataTable\" border=\"1\"> </table>','streamsdowload .nav-link.disable,[data-is=\"streamsdowload\"] .nav-link.disable{ pointer-events: none !important; cursor: default !important; color: white !important; background: gray !important; }',\"\",(function(t){this.isLoading=!0,this.hiddenForm={},this.error=!1,this.valuedata=\"This value is required\",this.pagelimitvalue=10,this.isXlsxActive=!1,this.isCsvxActive=!1,this.isJsonActive=!1,this.userLoadingSentiment,this.xhr=null;this.dataStreams=[],this.ontotal=0,this.idtotal={},this.showForm=t=>{const e=t.item._id;this.error=!1,this.jumalahtotal=this.ontotal+1,this.ontotal=this.jumalahtotal,this.idtotal[this.jumalahtotal]=e,this.idtotal[this.jumalahtotal-1]==e?this.hiddenForm[e]?this.hiddenForm[e]=!1:this.hiddenForm[e]=!0:(this.hiddenForm[e]=!0,this.hiddenForm[this.idtotal[this.jumalahtotal-1]]=!1),setTimeout((function(){}),1),this.update()},this.updateKeyword=t=>{const e=t.item._id,a=p(\"project\")?p(\"project\"):APP.getProject(),i=this.refs.sentimentValue.value,s=this.refs.inputValue.value,n={project:a,type:i,value:s};s?APP.apiGet({path:\"stream/correction/append\",data:n,success:t=>{$.notify(\"Sentiment changed to \"+i,\"info\"),this.hiddenForm[e]=!1,this.update()}}):($(\"#kywordupdate\").focus(),swal({title:\"Alert\",text:\"This value keyword is required\",type:\"warning\",showCancelButton:!1,confirmButtonColor:\"#42a3b8\",closeOnConfirm:!0}))},this.search={project:p(\"project\")?p(\"project\"):APP.getProject()},this.data=\"\",this.query={limit:pageLimit,page:0,sort:\"-name\"},this.pagination={page:1,cb:e=>{this.update({Loading:!0,isLoading:!0}),this.query.page=(e-1)*this.query.limit,this.render(),\"true\"==t.corection?$(\"body,html\").animate({scrollTop:290},500):$(\"body,html\").animate({scrollTop:780},500)}},this.imgmodalf=t=>{this.modalName=t.item.user.name,this.imgmodal=t.item.image},this.changeLimit=t=>{APP.log(\"change stream limit\"),this.pagelimitvalue=t.target.value,this.update({isLoading:!0}),t.preventDefault(),this.query.limit=parseInt(t.target.value),this.query.page=0,this.pagination.page=1,setTimeout(function(){this.isLoading=!1,this.update()}.bind(this),2e3),this.render()},this.isLoadingset=t=>this.userLoadingSentiment===t,this.on(\"mount\",()=>{this.isLoading=!0,this.isLoad=!0,this.filter=!1,this.xhr=null,this.refs.limitPage.value=pageLimit,this.update()}),this.integrasi=t=>{t.preventDefault(),APP.log(\"integrate stream\");var e=t.item.service;let a=t.item._id;\"twitter\"==e&&(this.userLoadingSentiment=a,t.item.is_connect_sociomile=!0),this.search.streamid=a,APP.apiPost({path:\"stream/sociomile?project=\"+(+p(\"project\")?p(\"project\"):APP.getProject()),data:{streamid:a},error:(t,e,a)=>{APP.error(t),this.userLoadingSentiment=void 0,this.render(),this.update()},success:t=>{APP.log(\"success integrated to sociomile\"),$(\"#setvaleu\"+a+\" #sociomile\").addClass(\"active\"),$.notify(\"Stream moved to Sociomile \",\"info\"),this.userLoadingSentiment=void 0,this.update()}})},this.valueidcheck={},this.setSentiment=t=>{t.preventDefault(),APP.log(\"setting sentiment\");let e=t.target.id,a=t.item._id;this.search.streamid=a,this.search.sentiment=e,$(\"#setvaleu\"+a+\" #negative\").removeClass(\"active\"),$(\"#setvaleu\"+a+\" #positive\").removeClass(\"active\"),$(\"#setvaleu\"+a+\" #neutral\").removeClass(\"active\"),$(\"#setvaleu\"+a+\" #\"+e).addClass(\"active\"),APP.apiGet({path:\"stream/update_sentiment\",data:this.search,success:i=>{if($.notify(\"Sentiment changed to \"+this.search.sentiment,\"info\"),this.valueidcheck[a])var s=this.valueidcheck[a];else s=t.item.sentiment.value;0!=s&&null!=s||this.parent.refs.sentiment.remove_dataneutrla(-1),\"neutral\"==e&&this.parent.refs.sentiment.update_dataneutrla(1),1==s&&this.parent.refs.sentiment.remove_datapositive(-1),\"positive\"==e&&this.parent.refs.sentiment.update_datapositive(1),-1==s&&this.parent.refs.sentiment.remove_datanegative(-1),\"negative\"==e&&this.parent.refs.sentiment.update_datanegative(1);var n=\"positive\"===e?1:(e=\"negative\")?-1:0;this.valueidcheck[a]=n,this.userLoadingSentiment=void 0,this.update()}})},this.deletes=t=>{t.preventDefault(),APP.log(\"deleting stream\");let e=t.item._id;this.search.streamid=e,APP.apiGet({path:\"stream/delete_stream\",data:this.search,parse_data:!0,success:t=>{$(\"#setvaleu\"+e).fadeOut(1),this.parent.refs.sentiment.update_data(),this.parent.setTotal()}})},this.render=()=>{APP.log(\"render Stream timeline\");const e=Object(i.find)(this.times,{selected:!0}),a=Object(i.map)(this.parent.channels,t=>t.id);let s=this.parent.search;s.type=e,s.limit=this.query.limit,s.page=this.query.page,s.useDetail=!0,s.pagination=\"yes\",s.service_category=a.join(\",\");var n=\"\",o=0;for(let t in s)s[t]&&\"\"!=s[t]&&(n+=o>0?`&${t}=${encodeURIComponent(s[t])}`:`?${t}=${encodeURIComponent(s[t])}`,o++);this.xhr=APP.apiPost({path:\"stream\"+n,success:(e,a,i)=>{this.datastreams=e.item;var s=e.item;e.total;s&&(s=s.map(t=>(t.checked=!1,t))),this.items=s,this.total=this.items.length,this.pagination.pages=Math.ceil(e.total/this.query.limit),this.isLoad=!1,this.Loading=!1,this.userLoadingSentiment=void 0,$('[data-toggle=\"tooltip\"]').tooltip(),this.update({isLoading:!1}),t.corection}})},this.rendermax=t=>{let e=this.parent.search;e.pagination=\"yes\",e.limit=10;var a=\"\",i=0;for(let t in e)e[t]&&\"\"!=e[t]&&(a+=i>0?`&${t}=${encodeURIComponent(e[t])}`:`?${t}=${encodeURIComponent(e[t])}`,i++);this.xhr=APP.apiPost({path:\"stream\"+a,success:(t,e,a)=>{}})},this.doDownload=t=>{window.open(t,\"_blank\")},this.getExportStreamState=t=>\"csv\"==t?this.isCsvxActive:\"xlsx\"==t?this.isXlsxActive:\"json\"==t?this.isJsonActive:void 0,this.exportStreamsLoading=(t,e)=>{\"csv\"==t?this.isCsvxActive=e:\"xlsx\"==t?this.isXlsxActive=e:\"json\"==t&&(this.isJsonActive=e)},this.formatLabels=(t,e)=>{let a=[];if(!t||0==t.length)return a;switch(e){case\"since\":a.push({value:moment(t).format(\"YYYY-MM-DD\"),key:e}),a.push({value:moment(t).format(\"HH:mm\"),key:\"since_time\"});break;case\"until\":a.push({value:moment(t).format(\"YYYY-MM-DD\"),key:e}),a.push({value:moment(t).format(\"HH:mm\"),key:\"until_time\"});break;case\"project\":t.forEach(t=>{a.push({key:\"project\",value:String(t)})});break;case\"service_category\":t.forEach(t=>{a.push({key:e,value:t})});break;case\"query\":a.push({key:e,value:t});break;case\"domain\":case\"author\":t.forEach(t=>{a.push({key:e,value:t})});break;case\"type\":a.push({key:e,value:t})}return a},this.exportStreams=(t=\"csv\")=>{let e=this;if(this.getExportStreamState(t))return;this.exportStreamsLoading(t,!0),this.update();let a={...this.parent.search},i=_.result(localStorage,\"filter_timesince\",\"00:00:00\"),s=_.result(localStorage,\"filter_timeuntil\",\"23:59:59\"),n=_.result(a,\"since\",moment().startOf(\"day\").format(\"YYYY-MM-DD\")),o=_.result(a,\"until\",moment().endOf(\"day\").format(\"YYYY-MM-DD\"));if(a.since=moment(`${n} ${i}`),a.until=moment(`${o} ${s}`),\"\"==i&&(a.since=a.since.startOf(\"day\")),\"\"==s&&(a.until=a.until.endOf(\"day\")),!a.since.isValid())return $.notify(\"since invalid date format\",\"error\"),this.exportStreamsLoading(t,!1),void this.update();if(!a.until.isValid())return $.notify(\"until invalid date format\",\"error\"),this.exportStreamsLoading(t,!1),void this.update();a.project=_.result(a,\"project\",\"\").trim().toLowerCase().split(\",\").filter(t=>t).map(t=>Number(t)),a.service_category=_.result(a,\"service_category\",\"\").trim().toLowerCase().split(\",\").filter(t=>t),a.query=_.result(a,\"q\",\"\"),a.domain=_.result(a,\"domain\",\"\").trim().toLowerCase().split(\",\").filter(t=>t),a.author=_.result(a,\"author\",\"\").trim().toLowerCase().split(\",\").filter(t=>t),a.tag=_.result(a,\"taging\",\"\").trim().toLowerCase().split(\",\").filter(t=>t);let r=[\"since\",\"until\",\"project\",\"service_category\",\"query\",\"domain\",\"author\",\"tag\",\"type\"],l=[];a.type=t,r.forEach(t=>{r.includes(t)&&(l=[...l,...this.formatLabels(a[t],t)])}),delete a.q,l=[...l,{key:\"user_id\",value:localStorage.userid}],APP.apiPost({path:\"task/create\",contentType:\"application/json; charset=utf-8\",data:JSON.stringify({name:`export_stream_raw_${a.since.format(\"YYYY-MM-DD HH:mm\")}_${a.until.format(\"YYYY-MM-DD HH:mm\")}_${a.project.join(\"-\")}`,namespace:\"default\",type:\"export_stream\",description:\"simple task\",chedulerType:0,labels:l,payload:JSON.stringify(a)}),success:function(a){$.notify(\"Download Streams has been scheduled\",\"info\"),APP.apiPut({path:\"task/start\",data:{id:a.result.id,type:\"export_stream\"},success:function(){e.exportStreamsLoading(t,!1),$.notify(`starting task export_stream ${a.result.id} sucess`,\"info\"),e.update()},error:function(){e.exportStreamsLoading(t,!1),$.notify(\"starting task failed, please check the background task menu\",\"error\"),e.update()}})},error:function(){e.exportStreamsLoading(t,!1),$.notify(\"Download Streams failed to scheduled\",\"error\"),this.update()}})},this.downloadJson=()=>{var t=this.datastreams;t=Object(i.map)(t,(function(t,e){var a=t.sentiment.value;return{service:t.service,date:moment(t.date).format(\"YYYY/MM/DD\"),time:moment(t.date_format).format(\"h:mm:ss \"),message:t.text,user:t.user.name,follower:t.user.followers?t.user.followers:0,sentiment:0==a?\"neutral\":a>0?\"positive\":\"negative\",url:t.source}}));var e=JSON.stringify(t);this.downloadrenderjson(e,\"streams\",\"json\")},this.downloadrenderjson=(t,e,a)=>{var i=document.createElement(\"a\"),s=new Blob([t],{type:a});i.href=URL.createObjectURL(s),i.download=e+\".json\",i.click()},this.reload=()=>{this.Loading=!0,this.render()},this.on(\"unmount\",()=>{this.xhr&&this.xhr.abort(),delete this.xhr})}))},119:function(t,e,a){\"use strict\";a.r(e);var i=a(0);a(120);a(1).tag2(\"emotion-analysis\",'<div each=\"{o, i in validChannels}\"> <div class=\"card shadow-base overflow-hidden form-group\"> <div class=\"card-header bb-1\"> <h6 class=\"card-title cursor-pointer d-flex justify-content-between mb-0\" onclick=\"{reloadEmotionByStream}\"> {o.name} </h6> </div> <div class=\"card-body pd-10 bd-color-gray-lighter \"> <div class=\"row w-100\"> <div class=\"col-sm-12 height500\"> <div class=\"ripple-loader\" if=\"{isLoading}\"></div> <emotion-by-channels ref=\"emotionbychannels_{o.tag}\"></emotion-by-channels> </div> </div> </div> </div> </div>','emotion-analysis .d-flex,[data-is=\"emotion-analysis\"] .d-flex{ display: flex; } emotion-analysis .justify-content-center,[data-is=\"emotion-analysis\"] .justify-content-center{ justify-content: center; } emotion-analysis .highcharts-figure,[data-is=\"emotion-analysis\"] .highcharts-figure,emotion-analysis .highcharts-data-table table,[data-is=\"emotion-analysis\"] .highcharts-data-table table{ margin: 0 auto; } emotion-analysis #chart-emotion,[data-is=\"emotion-analysis\"] #chart-emotion{ min-height: 900px; } emotion-analysis .highcharts-tooltip h3,[data-is=\"emotion-analysis\"] .highcharts-tooltip h3{ margin: 0.3em 0; } emotion-analysis .highcharts-data-table table,[data-is=\"emotion-analysis\"] .highcharts-data-table table{ font-family: Verdana, sans-serif; border-collapse: collapse; border: 1px solid #ebebeb; margin: 10px auto; text-align: center; width: 100%; max-width: 500px; } emotion-analysis .highcharts-data-table caption,[data-is=\"emotion-analysis\"] .highcharts-data-table caption{ padding: 1em 0; font-size: 1.2em; color: #555; } emotion-analysis .highcharts-data-table th,[data-is=\"emotion-analysis\"] .highcharts-data-table th{ font-weight: 600; padding: 0.5em; } emotion-analysis .highcharts-data-table td,[data-is=\"emotion-analysis\"] .highcharts-data-table td,emotion-analysis .highcharts-data-table th,[data-is=\"emotion-analysis\"] .highcharts-data-table th,emotion-analysis .highcharts-data-table caption,[data-is=\"emotion-analysis\"] .highcharts-data-table caption{ padding: 0.5em; } emotion-analysis .highcharts-data-table thead tr,[data-is=\"emotion-analysis\"] .highcharts-data-table thead tr,emotion-analysis .highcharts-data-table tr:nth-child(even),[data-is=\"emotion-analysis\"] .highcharts-data-table tr:nth-child(even){ background: #f8f8f8; } emotion-analysis .highcharts-data-table tr:hover,[data-is=\"emotion-analysis\"] .highcharts-data-table tr:hover{ background: #f1f7ff; }',\"\",(function(t){this.chartreemp=null,this.isLoading=!1,this.notdata=!1,this.isExist=!0,this.xhr=null,this.data={};let e=[];e.facebook=\"facebook\",e.twitter=\"twitter\",e.instagram=\"instagram\",e.youtube=\"video\",e[\"all-channels\"]=\"all-channels\";let a={\"all-channels\":{name:\"All Channels\",tag:\"all-channels\",series:[],totalSeries:[],postCount:0,commentCount:0,count:0},facebook:{name:\"Facebook\",tag:\"facebook\",series:[],totalSeries:[],postCount:0,commentCount:0,count:0},twitter:{name:\"Twitter\",tag:\"twitter\",series:[],totalSeries:[],postCount:0,commentCount:0,count:0},instagram:{name:\"Instagram\",tag:\"instagram\",series:[],totalSeries:[],postCount:0,commentCount:0,count:0},video:{name:\"Video\",tag:\"video\",series:[],totalSeries:[],postCount:0,commentCount:0,count:0}};this.validChannels=Object(i.cloneDeep)(a),this.allChannel={};let s={name:\"All Channels\",tag:\"all-channels\",keys:[\"name\",\"y\",\"color\"],series:[],totalSeries:[],total:0};this.reloadEmotion=t=>{this.render()},this.showTotalChart=()=>{$(\"#chartSentimentpositivenegative\").html(\"\"),this.render()},this.render=t=>{this.notdata=!1,this.isLoading=!0,this.isLoadingerror=!1,this.update(),this.refreshView=t=>{};const n=this.parent.isShowTotal;let o={...this.parent.search,filter_by:this.currentFilter};o.is_total=null,o.type=\"monthly\",this.xhr=APP.apiGet({path:\"emotion/emotionbyservice\",data:o,success:o=>{Object(i.isFunction)(t)&&t();const r=o.items;let l=Object(i.cloneDeep)(s);function d(t){const e=parseFloat(t.toFixed(2));return Number.isNaN(e)?0:e}this.validChannels=Object(i.cloneDeep)(a);let c={},h={};Object(i.each)(r,(t,a)=>{if(e[t.service]){const a=[t.emotion.trust,t.emotion.joy,t.emotion.surprise,t.emotion.anticipation,t.emotion.sad,t.emotion.fear,t.emotion.anger,t.emotion.disgust],s=Object(i.sum)(a);this.validChannels[e[t.service]].series.push({name:moment(t.date).format(\"MMMM\"),keys:[\"name\",\"y\",\"color\"],data:[[\"Trust\",s>0?d(t.emotion.trust/s*100):0,\"#001bff\"],[\"Joy\",s>0?d(t.emotion.joy/s*100):0,\"#00e0ff\"],[\"Surprise\",s>0?d(t.emotion.surprise/s*100):0,\"#48ff00\"],[\"Anticipation\",s>0?d(t.emotion.anticipation/s*100):0,\"#ffae00\"],[\"Sadness\",s>0?d(t.emotion.sad/s*100):0,\"#a200ff\"],[\"Fear\",s>0?d(t.emotion.fear/s*100):0,\"#ff007a\"],[\"Anger\",s>0?d(t.emotion.anger/s*100):0,\"#ff0000\"],[\"Disgust\",s>0?d(t.emotion.disgust/s*100):0,\"#980101\"]],total:s}),this.validChannels[e[t.service]].totalSeries.name=\"Total\",this.validChannels[e[t.service]].totalSeries.keys=[\"name\",\"y\",\"color\"],this.validChannels[e[t.service]].totalSeries.data?(this.validChannels[e[t.service]].totalSeries.data[0][1]+=t.emotion.trust,this.validChannels[e[t.service]].totalSeries.data[1][1]+=t.emotion.joy,this.validChannels[e[t.service]].totalSeries.data[2][1]+=t.emotion.surprise,this.validChannels[e[t.service]].totalSeries.data[3][1]+=t.emotion.anticipation,this.validChannels[e[t.service]].totalSeries.data[4][1]+=t.emotion.sad,this.validChannels[e[t.service]].totalSeries.data[5][1]+=t.emotion.fear,this.validChannels[e[t.service]].totalSeries.data[6][1]+=t.emotion.anger,this.validChannels[e[t.service]].totalSeries.data[7][1]+=t.emotion.disgust,this.validChannels[e[t.service]].totalSeries.total+=s):(this.validChannels[e[t.service]].totalSeries.data=[[\"Trust\",t.emotion.trust,\"#001bff\"],[\"Joy\",t.emotion.joy,\"#00e0ff\"],[\"Surprise\",t.emotion.surprise,\"#48ff00\"],[\"Anticipation\",t.emotion.anticipation,\"#ffae00\"],[\"Sadness\",t.emotion.sad,\"#a200ff\"],[\"Fear\",t.emotion.fear,\"#ff007a\"],[\"Anger\",t.emotion.anger,\"#ff0000\"],[\"Disgust\",t.emotion.disgust,\"#980101\"]],this.validChannels[e[t.service]].totalSeries.total=s);const n=moment(t.date).format(\"MMMM\");c[n]?(c[n].data[0]+=a[0],c[n].data[1]+=a[1],c[n].data[2]+=a[2],c[n].data[3]+=a[3],c[n].data[4]+=a[4],c[n].data[5]+=a[5],c[n].data[6]+=a[6],c[n].data[7]+=a[7],c[n].total+=s):c[n]={data:Object(i.clone)(a),total:s},h.data?(h.data[0]+=a[0],h.data[1]+=a[1],h.data[2]+=a[2],h.data[3]+=a[3],h.data[4]+=a[4],h.data[5]+=a[5],h.data[6]+=a[6],h.data[7]+=a[7],h.total+=s):h={data:Object(i.clone)(a),total:s},this.validChannels[e[t.service]].postCount+=t.post_count,this.validChannels[e[t.service]].commentCount+=t.comment_count,this.validChannels[e[t.service]].count+=t.count}}),Object(i.each)(c,(t,e)=>{l.series.push({name:e,data:[[\"Trust\",t.total>0?d(t.data[0]/t.total*100):0,\"#001bff\"],[\"Joy\",t.total>0?d(t.data[1]/t.total*100):0,\"#00e0ff\"],[\"Surprise\",t.total>0?d(t.data[2]/t.total*100):0,\"#48ff00\"],[\"Anticipation\",t.total>0?d(t.data[3]/t.total*100):0,\"#ffae00\"],[\"Sadness\",t.total>0?d(t.data[4]/t.total*100):0,\"#a200ff\"],[\"Fear\",t.total>0?d(t.data[5]/t.total*100):0,\"#ff007a\"],[\"Anger\",t.total>0?d(t.data[6]/t.total*100):0,\"#ff0000\"],[\"Disgust\",t.total>0?d(t.data[7]/t.total*100):0,\"#980101\"]],total:t.total,keys:[\"name\",\"y\",\"color\"]})});const m=Object(i.result)(h,\"data\",[]);l.totalSeries={name:\"Total\",data:[[\"Trust\",m[0],\"#001bff\"],[\"Joy\",m[1],\"#00e0ff\"],[\"Surprise\",m[2],\"#48ff00\"],[\"Anticipation\",m[3],\"#ffae00\"],[\"Sadness\",m[4],\"#a200ff\"],[\"Fear\",m[5],\"#ff007a\"],[\"Anger\",m[6],\"#ff0000\"],[\"Disgust\",m[7],\"#980101\"]],total:h.total,keys:[\"name\",\"y\",\"color\"]},this.allChannel=l,this.validChannels[\"all-channels\"]=this.allChannel,Object(i.each)(this.validChannels,(t,e)=>{if(t.totalSeries){const e=t.totalSeries.data;e&&Object(i.each)(e,(e,a)=>{t.totalSeries.total>0?e[1]=d(e[1]/t.totalSeries.total*100):e[1]=0})}}),this.update(),Object(i.each)(this.validChannels,(t,e)=>{this.refs[\"emotionbychannels_\"+t.tag].isLoading=!0,this.refs[\"emotionbychannels_\"+t.tag].channelName=t.name,this.refs[\"emotionbychannels_\"+t.tag].tag=t.tag,this.refs[\"emotionbychannels_\"+t.tag].channelData=n?[t.totalSeries]:t.series,this.refs[\"emotionbychannels_\"+t.tag].postCount=t.postCount,this.refs[\"emotionbychannels_\"+t.tag].commentCount=t.commentCount,this.xhrdata=this.refs[\"emotionbychannels_\"+t.tag].render()}),this.isLoading=!1,this.update({isLoading:!1,isLoadingerror:!1})},error:e=>{\"undefined\"!=typeof limitRequest&&(limitRequest++,limitRequest<3&&setTimeout(()=>{this.render()},3e3),limitRequest>=3&&(this.isLoading=!1,this.isLoadingerror=!0,this.update())),Object(i.isFunction)(t)&&t()}})}}))},120:function(t,e,a){\"use strict\";a.r(e);a(0);a(1).tag2(\"emotion-by-channels\",'<div class=\"ripple-loader\" if=\"{isLoading}\"></div> <div class=\"textcenter mg-t-20\" if=\"{notdata}\">No data found, please input another dates</div> <figure class=\"highcharts-figure d-flex justify-content-center\"> <div class=\"w-100\"> <div id=\"chart-emotion_{tag}\" class=\"emotion-chart\" if=\"{!notdata}\"></div> </div> </figure>','emotion-by-channels .d-flex,[data-is=\"emotion-by-channels\"] .d-flex{ display: flex; } emotion-by-channels .justify-content-center,[data-is=\"emotion-by-channels\"] .justify-content-center{ justify-content: center; } emotion-by-channels .highcharts-figure,[data-is=\"emotion-by-channels\"] .highcharts-figure,emotion-by-channels .highcharts-data-table table,[data-is=\"emotion-by-channels\"] .highcharts-data-table table{ margin: 1em auto; } emotion-by-channels #chart-emotion,[data-is=\"emotion-by-channels\"] #chart-emotion{ min-height: 900px; } emotion-by-channels .emotion-chart,[data-is=\"emotion-by-channels\"] .emotion-chart{ height: 500px; } emotion-by-channels .highcharts-tooltip h3,[data-is=\"emotion-by-channels\"] .highcharts-tooltip h3{ margin: 0.3em 0; } emotion-by-channels .highcharts-data-table table,[data-is=\"emotion-by-channels\"] .highcharts-data-table table{ font-family: Verdana, sans-serif; border-collapse: collapse; border: 1px solid #ebebeb; margin: 10px auto; text-align: center; width: 100%; max-width: 500px; } emotion-by-channels .highcharts-data-table caption,[data-is=\"emotion-by-channels\"] .highcharts-data-table caption{ padding: 1em 0; font-size: 1.2em; color: #555; } emotion-by-channels .highcharts-data-table th,[data-is=\"emotion-by-channels\"] .highcharts-data-table th{ font-weight: 600; padding: 0.5em; } emotion-by-channels .highcharts-data-table td,[data-is=\"emotion-by-channels\"] .highcharts-data-table td,emotion-by-channels .highcharts-data-table th,[data-is=\"emotion-by-channels\"] .highcharts-data-table th,emotion-by-channels .highcharts-data-table caption,[data-is=\"emotion-by-channels\"] .highcharts-data-table caption{ padding: 0.5em; } emotion-by-channels .highcharts-data-table thead tr,[data-is=\"emotion-by-channels\"] .highcharts-data-table thead tr,emotion-by-channels .highcharts-data-table tr:nth-child(even),[data-is=\"emotion-by-channels\"] .highcharts-data-table tr:nth-child(even){ background: #f8f8f8; } emotion-by-channels .highcharts-data-table tr:hover,[data-is=\"emotion-by-channels\"] .highcharts-data-table tr:hover{ background: #f1f7ff; }',\"\",(function(t){this.chartreemp=null,this.isLoading=!1,this.notdata=!1,this.isExist=!0,this.xhr=null,this.channelName=\"\",this.tag=\"\",this.channelData=[],this.postCount=0,this.commentCount=0,this.reloadEmotion=t=>{this.render()},this.render=t=>{this.notdata=!1,this.isLoading=!0,this.isLoadingerror=!1,this.update(),this.refreshView=t=>{},this.update(),Highcharts.chart(\"chart-emotion_\"+this.tag,{chart:{type:\"bar\",plotBorderWidth:1,zoomType:\"xy\",inverted:!0,marginTop:50,marginRight:50},legend:{enabled:!0},title:{text:\"EMOTION ANALYSIS\"},subtitle:{enabled:!1,text:\"\"},accessibility:{point:{valueDescriptionFormat:\"{index}. {point.name}, category : {point.x}, value: {point.y}.\"}},yAxis:{min:0,max:100,gridLineWidth:1,title:{text:\"percentage\"},labels:{format:\"{value} %\"},plotLines:[{color:\"blue\",dashStyle:\"dot\",width:2,value:50,label:{rotation:0,y:15,style:{fontStyle:\"italic\"}},zIndex:3}],accessibility:{rangeDescription:\"Range: 100% max.\"}},xAxis:{startOnTick:!1,endOnTick:!1,title:{text:\"Emotions\"},categories:[\"Trust\",\"Joy\",\"Surprise\",\"Anticipation\",\"Sadness\",\"Fear\",\"Anger\",\"Disgust\"],type:\"category\",labels:{format:\"{value}\"},maxPadding:.2,plotLines:[{color:\"black\",dashStyle:\"dot\",width:1,value:0,zIndex:3},{color:\"black\",dashStyle:\"dot\",width:1,value:1,zIndex:3},{color:\"black\",dashStyle:\"dot\",width:1,value:2,zIndex:3},{color:\"black\",dashStyle:\"dot\",width:1,value:3,zIndex:3},{color:\"blue\",dashStyle:\"dot\",width:2,value:3.5},{color:\"black\",dashStyle:\"dot\",width:1,value:4,zIndex:3},{color:\"black\",dashStyle:\"dot\",width:1,value:5,zIndex:3},{color:\"black\",dashStyle:\"dot\",width:1,value:6,zIndex:3},{color:\"black\",dashStyle:\"dot\",width:1,value:7,zIndex:3}],accessibility:{rangeDescription:\"Categories: Emotion Analysis.\"}},tooltip:{useHTML:!0,formatter:function(){return\"<table>\"+('<tr><th colspan=\"2\"><h3>'+this.key+\"</h3></th></tr><tr><th>Series:</th><td>\"+this.series.name+\"</td></tr><tr><th>Value:</th><td>\"+this.point.y+\"%</td></tr>\")+\"</table>\"},followPointer:!0},plotOptions:{bar:{dataLabels:{enabled:!0,format:\"{series.name} {point.y}%\"},size:\"40%\"}},series:this.channelData}),this.update({isLoading:!1,isLoadingerror:!1})}}))}}]);","extractedComments":[]}