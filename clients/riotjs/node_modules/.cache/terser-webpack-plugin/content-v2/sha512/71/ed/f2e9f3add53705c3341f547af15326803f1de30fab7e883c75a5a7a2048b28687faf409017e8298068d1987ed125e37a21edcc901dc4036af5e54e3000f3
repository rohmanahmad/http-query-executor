{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[89],{75:function(e,t,i){\"use strict\";i.r(t);var s=i(0);i(1).tag2(\"sentimentcompetititon\",'<div class=\"mg-t-30 \" each=\"{o,i in prjList}\"> <div class=\"row mt-4\"> <div class=\"col-md-6\"> <div class=\"row\"> <div class=\"col-md-12 mb-2 text-center\"> <b class=\"f24 a141\">WORDCLOUD POSITIVE ({o})</b> <br> <span class=\"f14 a141\">Top wordcloud positive</span> </div> <div class=\"col-md-12 mb-2 text-center\" id=\"wordcloud_positive{i}\" style=\"height: 300px; width: 100%;\"></div> </div> </div> <div class=\"col-md-6\"> <div class=\"row\"> <div class=\"col-md-12 mb-2 text-center\"> <b class=\"f24 a141\">WORDCLOUD NEGATIVE ({o})</b> <br> <span class=\"f14 a141\">Top wordcloud negative</span> </div> <div class=\"col-md-12 mb-2 text-center\" id=\"wordcloud_negative{i}\" prj style=\"height: 300px; width: 100%;\"></div> </div> </div> </div> <div class=\"row mt-4\"> <div class=\"col-md-10 offset-md-1\"> <div class=\"ripple-loader\" if=\"{isLoading}\"></div> <div class=\"row desktopshow\"> <div class=\"col-md-12 mb-2 text-center\"> <b class=\"f24 a141\">MENTIONS ({o})</b> <br> <span class=\"f14 a141\">Top mentions and keyword phrase</span> </div> <div class=\"col-md-4 mb-2 text-center\"> <b class=\"f18 colortittle\">POSITIVE</b> </div> <div class=\"col-md-4 \"> </div> <div class=\"col-md-4 mb-2 text-center\"> <b class=\"f18 colortittle\">NEGATIVE</b> </div> </div> <div class=\"col-12 mb-2 text-center d-block d-sm-none\"> <b class=\"f24 a141\">POSITIVE</b> </div> <div class=\"col-12 mb-2 text-center d-block d-sm-none\"> <div class=\"row\"> <div class=\"col-6 px-1\"><span class=\"p-hastag display-w\" each=\"{item,i in topwordpositivesvalue[i]}\" if=\"{i ==0}\">{item.phrase}</span></div> <div class=\"col-6 px-1\"><span class=\"p-hastag display-w\" each=\"{item,i in topwordpositivesvalue[i]}\" if=\"{i ==1}\">{item.phrase}</span></div> <div class=\"col-6 px-1\"><span class=\"p-hastag display-w\" each=\"{item,i in topwordpositivesvalue[i]}\" if=\"{i ==2}\">{item.phrase}</span></div> <div class=\"col-6 px-1\"><span class=\"p-hastag display-w\" each=\"{item,i in topwordpositivesvalue[i]}\" if=\"{i ==3}\">{item.phrase}</span></div> </div> </div> <div class=\"row minheight225\"> <div class=\"col-md-4 text-center\"> <div class=\"row\"> <div class=\"col-md-12 col-12 py-3 mb-2 pn-holder\" each=\"{item in itemspositivevalue[i]}\"> <div class=\"row\"> <div class=\"col-md-2 col-2 pr-0 pt-1\"> <img riot-src=\"{item.user.avatar}\" class=\"profpic-style\" if=\"{item.user.avatar}\" alt=\"Image\" onerror=\"this.onerror=null;this.src=\\'https://ui-avatars.com/api/?background=0D8ABC&color=fff&length=2&rounded=true&name={item.user.name ? item.user.name : item.user.profile}\\'\"> <img riot-src=\"https://ui-avatars.com/api/?background=0D8ABC&color=fff&length=2&rounded=true&name={item.user.name ? item.user.name : item.user.profile}\" if=\"{!item.user.avatar}\" class=\"profpic-style\" alt=\"Image\" onerror=\"this.onerror=null;this.src=\\'https://ui-avatars.com/api/?background=0D8ABC&color=fff&length=2&rounded=true&name={item.user.name ? item.user.name : item.user.profile}\\'\" class=\"profpic-style\"> </div> <div class=\"col-md-10 col-10 pr-0 text-left\"> <span>{item.text.length > 50 ? item.text.substring(0,50) + \\'...\\' : item.text}</span><br> <span class=\"tx-primary pull-right pd-r-10\">({item.user.profile ? item.user.profile : item.user.name}) </span> </div> </div> </div> </div> </div> <div class=\"col-md-4 d-none d-sm-block position-rel\"> <div class=\"position-abs-l-5-p-0\"> <span class=\"p-hastag display-w\" each=\"{item in topwordpositivesvalue[i]}\">{item.phrase}</span> </div> <div class=\"position-abs-r-2-b-0\"> <span class=\"n-hastag mg-r-5 display-w\" each=\"{item in topwordnegativevalue[i]}\">{item.phrase}</span> </div> <div> </div> </div> <div class=\"col-12 mb-2 text-center d-block d-sm-none\"> <b class=\"f24 a141\">NEGATIVE</b> </div> <div class=\"col-12 mb-2 text-center d-block d-sm-none\"> <div class=\"row\"> <div class=\"col-6 px-1\"><span class=\"n-hastag display-w\" each=\"{item,i in topwordnegativevalue[i]}\" if=\"{i ==0}\">{item.phrase}</span></div> <div class=\"col-6 px-1\"><span class=\"n-hastag display-w\" each=\"{item,i in topwordnegativevalue[i]}\" if=\"{i ==1}\">{item.phrase}</span></div> <div class=\"col-6 px-1\"><span class=\"n-hastag display-w\" each=\"{item,i in topwordnegativevalue[i]}\" if=\"{i ==2}\">{item.phrase}</span></div> <div class=\"col-6 px-1\"><span class=\"n-hastag display-w\" each=\"{item,i in topwordnegativevalue[i]}\" if=\"{i ==3}\">{item.phrase}</span></div> </div> </div> <div class=\"col-md-4 text-center\"> <div class=\"row\"> <div class=\"col-md-12 col-12 py-3 mb-2 pn-holder\" each=\"{item in streamsnegativevalue[i]}\"> <div class=\"row\"> <div class=\"col-md-2 col-2 pr-0 pt-1\"> <img riot-src=\"{item.user.avatar}\" if=\"{item.user.avatar}\" class=\"profpic-style\" alt=\"Image\" onerror=\"this.onerror=null;this.src=\\'https://ui-avatars.com/api/?background=0D8ABC&color=fff&length=2&rounded=true&name={item.user.name ? item.user.name : item.user.profile}\\'\" class=\"profpic-style\"> <img riot-src=\"https://ui-avatars.com/api/?background=0D8ABC&color=fff&length=2&rounded=true&name={item.user.name ? item.user.name : item.user.profile}\" if=\"{!item.user.avatar}\" class=\"profpic-style\" alt=\"Image\" onerror=\"this.onerror=null;this.src=\\'https://ui-avatars.com/api/?background=0D8ABC&color=fff&length=2&rounded=true&name={item.user.name ? item.user.name : item.user.profile}\\'\" class=\"profpic-style\"> </div> <div class=\"col-md-10 col-10 pr-0 text-left\"> <span>{item.text.length > 50 ? item.text.substring(0,50) + \\'...\\' : item.text}</span><br> <span class=\"tx-primary pull-right pd-r-10\">({item.user.profile ? item.user.profile : item.user.name}) </span> </div> </div> </div> </div> </div> </div> </div> </div> </div>',\"\",\"\",(function(e){this.isLoading=!0,this.dataWordcloudnegative={},this.dataWordcloudpositive={},this.topwordpositivesvalue={},this.topwordnegativevalue={},this.itemspositivevalue={},this.streamsnegativevalue={},this.render=()=>{let e=Object(s.clone)(this.parent.search);APP.apiGet({path:\"projects/list?selected_fields=key_id,key_name\",success:e=>{this.projectList=e}}).done(()=>{this.createObject(e,this.projectList)})},this.createObject=(e,t)=>{this.competitionProjects=this.parent.projectAll.split(\",\"),this.prjList={};for(let e in this.competitionProjects){const i=this.competitionProjects[e],a=Object(s.find)(t,{key_id:parseInt(i)});a&&a.key_name&&(this.prjList[i]=a.key_name)}var i=this.competitionProjects;setTimeout(()=>{this.topwordnegatives(e,i),this.topwordpositives(e,i),this.update_datanegative(e,i),this.update_datapositive(e,i),this.update({isLoading:!0})},1)},this.update_datapositive=(e,t)=>{e.section=\"positive\",e.limit=4e3,e.page=0,e.is_total=null,async.each(t,(i,a)=>{e.project=i,APP.apiGet({path:\"mentions/wordcloud\",data:e,success:o=>{let r=this.parent.component;r.sentimentcompetition=!0,6===Object(s.filter)(r,e=>e).length&&this.parent.updateid();let l=o&&o.items&&o.items.positive?o.items.positive:[],d=e.q;if(d)this.streamspositive(d,e,t);else{if(l.length>0)var c=l?l.map(e=>e[0]).slice(0,4).toString().replace(/\\,/g,\" or \"):null;else c=null;this.streamspositive(c,e,t)}var n=Object(s.concat)(l);if((n=Object(s.orderBy)(n,[1],[\"desc\"])).length>0){this.update({notdata:!1});const e=n[0][1];n.map(t=>{const i=t[0].length,s=parseInt(t[1]);let a=s/e*100;return i>20&&(a=10,s/e*100>60&&(a=s/e*50)),a<15&&(a=15),t[1]=a,t}),$(\"#wordcloud_container\").show(),$(\"#wordcloud_canvas\").removeClass(\"onload\"),$(\"#wordcloud_positive\"+i).show(),WordCloud(\"wordcloud_positive\"+i,{list:n,backgroundColor:\"transparent\",gridSize:Math.round(16*$(\"#wordcloud_positive\"+i).width()/1024),weightFactor:e=>e,shape:\"diamond\",shuffle:!1,rotateRatio:.2,rotationSteps:3})}else this.notdata=!0,$(\"#wordcloud_container\").hide(),$(\"#wordcloud_canvas\").removeClass(\"oload\"),$(\"#wordcloud_positive\"+i).html(\"Empty\"),$(\"#wordcloud_positive\"+i).show();a()}})})},this.update_datanegative=(e,t)=>{e.section=\"negative\",e.limit=4e3,e.page=0,e.is_total=null,async.each(t,(i,a)=>{e.project=i,APP.apiGet({path:\"mentions/wordcloud\",data:e,success:o=>{let r=o&&o.items&&o.items.negative?o.items.negative:[],l=e.q;if(l)this.streamsnegative(l,e,t);else{if(r.length>0)var d=r?r.map(e=>e[0]).slice(0,4).toString().replace(/\\,/g,\" or \"):null;else d=null;this.streamsnegative(d,e,t)}var c=Object(s.concat)(r);if((c=Object(s.orderBy)(c,[1],[\"desc\"])).length>0){this.update({notdata:!1});const e=c[0][1];c.map(t=>{const i=t[0].length,s=parseInt(t[1]);let a=s/e*100;return i>20&&(a=10,s/e*100>60&&(a=s/e*50)),a<15&&(a=15),t[1]=a,t}),this.dataWordcloudnegative[i]=c,$(\"#wordcloud_container\").show(),$(\"#wordcloud_canvas\").removeClass(\"onload\"),$(\"#wordcloud_negative\"+i).show(),WordCloud(\"wordcloud_negative\"+i,{list:c,backgroundColor:\"transparent\",gridSize:Math.round(16*$(\"#wordcloud_negative\"+i).width()/1024),weightFactor:e=>e,shape:\"diamond\",shuffle:!1,rotateRatio:.2,rotationSteps:3})}else this.notdata=!0,$(\"#wordcloud_container\").hide(),$(\"#wordcloud_canvas\").removeClass(\"oload\"),$(\"#wordcloud_negative\"+i).html(\"Empty\"),$(\"#wordcloud_negative\"+i).show();a()}})})},this.topwordpositives=(e,t)=>{this.topword=[],e.limit=6,e.page=0,e.section=\"positive\",async.each(t,(t,i)=>{e.project=t,APP.apiGet({path:\"mentions/phrase\",data:e,success:e=>{this.total2=e.length,this.topwordpositivesvalue[t]=e.items.slice(0,5),this.update({isLoading:!1})}})})},this.topwordnegatives=(e,t)=>{this.topword=[],e.page=0,e.section=\"negative\",async.each(t,(t,i)=>{e.project=t,APP.apiGet({path:\"mentions/phrase\",data:e,success:e=>{this.total2=e.length,this.topwordnegativevalue[t]=e.items.slice(0,5),this.update({isLoading:!1})}})})},this.streamspositive=(e,t,i)=>{APP.log(\"render Stream timeline\"),async.each(i,(e,i)=>{t.project=e;t.section=\"positive\",t.limit=5,t.group_service=!1;var s=\"\",a=0;for(let e in t)t[e]&&\"\"!=t[e]&&(s+=a>0?`&${e}=${encodeURIComponent(t[e])}`:`?${e}=${encodeURIComponent(t[e])}`,a++);APP.apiPost({path:\"stream\"+s,success:t=>{this.itemspositivevalue[e]=t.item,this.update({isLoading:!1})}})})},this.streamsnegative=(e,t,i)=>{APP.log(\"render Stream timeline\"),async.each(i,(e,i)=>{t.project=e;t.section=\"negative\",t.limit=5,t.group_service=!1;var s=\"\",a=0;for(let e in t)t[e]&&\"\"!=t[e]&&(s+=a>0?`&${e}=${encodeURIComponent(t[e])}`:`?${e}=${encodeURIComponent(t[e])}`,a++);APP.apiPost({path:\"stream\"+s,success:t=>{this.streamsnegativevalue[e]=t.item,this.update()}})})}}))}}]);","extractedComments":[]}