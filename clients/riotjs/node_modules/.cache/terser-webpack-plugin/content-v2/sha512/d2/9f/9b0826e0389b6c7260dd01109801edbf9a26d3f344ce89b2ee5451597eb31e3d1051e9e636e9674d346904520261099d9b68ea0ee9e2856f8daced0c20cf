{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[66],{90:function(t,e,a){\"use strict\";a.r(e);var i=a(0),s=a(28),c=a.n(s);a(1).tag2(\"chartcompetition\",'<div class=\"row\"> <div class=\"col-md-12 col-12 mb-4 text-center\"> <b class=\"a141 f24\">STREAM COMPETITION</b> <br> <span class=\"f14 a141\">Competition by brand</span> </div> <div class=\"col-md-12\"> <div class=\"row\"> <div class=\"ripple-loader\" if=\"{isLoading}\"></div> <div class=\"col-md-12 col-12\"> <b class=\"f7c f18\">HOURLY</b> </div> <div class=\"col-md-12 col-12 p-20\"> <div id=\"chartstream_multiproject\" class=\"height-chart-infographic\"></div> </div> </div> </div> </div>',\"\",\"\",(function(t){this.nuull=!0,this.notdata=!1,this.type=\"daily\",this.chartspline=null,this.isExist=!0,this.isLoading=!0,this.chart=null,this.xhr=null,this.times=[{id:\"hourly\",name:\"Hourly\",selected:!1},{id:\"daily\",name:\"Daily\",selected:!0},{id:\"monthly\",name:\"Monthly\",selected:!1}],this.selectTime=t=>{APP.log(\"chart-positive: selectTime\"),t.preventDefault(),t.item.selected=!0;const e=t.item.id;this.times=Object(i.map)(this.times,t=>(t.id!=e&&(t.selected=!1),t)),this.update(),this.render()},this.dataProjects=[],this.render=t=>{setTimeout(()=>{this.notdata=!1,APP.log(\"chart-positive: render\"),this.nuull=!0;var e=JSON.parse(localStorage.getItem(\"projects\"))?JSON.parse(localStorage.getItem(\"projects\")):this.parent.listproject;e=Object(i.filter)(e,t=>t);const a=this.parent.projectAll.split(\",\").map(Number);Object(i.map)(e,(function(t){return{id:t.key_id,date:moment(t.key_start_date).format(\"DD MMMM YYYY\"),name:t.key_name,color:t.key_color}})).forEach(t=>{a.indexOf(t.id)>-1?t.checked=!0:t.checked=!1,this.dataProjects.push(t)});var s=Object(i.filter)(this.dataProjects,(function(t){return t.checked}));const o=Object(i.find)(this.times,{selected:!0}).id;let l=Object(i.clone)(this.parent.search);l.project=this.parent.projectAll,l.type=o;var r=s.map((function(t){return{name:t.name,color:t.color}})),n=Object(i.reduce)(r,(function(t,e){return t[e.name]=e.color,t}),{});this.update({isLoading:!0});const h=this.chartspline=c()(\"chartstream_multiproject\",o);this.xhr=APP.apiGet({path:\"stream/brand/mention\",data:l,success:e=>{let a=this.parent.component;a.chartcompetitor=!0,6===Object(i.filter)(a,t=>t).length&&this.parent.updateid(),0===(e=e.items).length?this.notdata=!0:this.update({notdata:!1});var s=Object(i.groupBy)(e,(function(t){return t.brand_name}));s=Object.keys(s).sort().reduce((t,e)=>(t[e]=s[e],t),{});var c=[];let o=1;for(let t in s){var l=Object(i.sortBy)(s[t],t=>moment(t.date).toDate());if(l=l.map((function(t){return[moment(t.date).utc().valueOf(),t.count,t.brand_name]})),!this.isExist)return;c.push({id:\"response\",shadow:!1,name:t,type:\"spline\",totalval:Object(i.sumBy)(l,1),fillColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,n[t]],[1,Highcharts.Color(n[t]).setOpacity(0).get(\"rgba\")]]},lineWidth:1,color:n[t],marker:{radius:3},dataLabels:{enabled:!0,color:n[t],overflow:\"justify\",allowOverlap:!0,backgroundColor:\"rgba(252, 255, 197, 0.7)\",borderWidth:1,borderRadius:5,borderColor:n[t],padding:5,align:o%2==0?\"left\":\"right\"},data:l}),o++}c=Object(i.orderBy)(c,[\"totalval\"],[\"desc\"]);for(var r=0;r<=c.length-1;r++)h.addSeries(c[r]);this.update({isLoading:!1}),Object(i.isFunction)(t)&&t()}})},2e3)},this.on(\"mount\",()=>{this.xhr=null}),this.on(\"unmount\",()=>{this.isExist=!1,this.xhr,this.chart&&this.chart.destroy(),this.chartspline&&this.chartspline.destroy()})}))},91:function(t,e,a){\"use strict\";a.r(e);var i=a(0);a(1).tag2(\"compositionbybrand\",'<div class=\"row mt-5\"> <div class=\"col-md-12 col-12\"> <div class=\"row\"> <div class=\"ripple-loader\" if=\"{isLoading}\"></div> <div class=\"col-md-12 col-12 mb-4 text-center\"> <b class=\"f24 a141\">SENTIMENT COMPETITION (DAILY)</b> <br> <span class=\"f14 a141\">Sentiment comparison among source brand mentions</span> </div> <div class=\"col-md-12\"> <table class=\"table mg-b-0 tx-30-r10 \"> <tr> <th></th> <th class=\" tx-black tx-18\" style=\"color: #7ee87c; \">POSITIVE </th> <th class=\" tx-black tx-18\" style=\"color: #db6a87; \">NEGATIVE</th> <th class=\" tx-black tx-18\" style=\"color: #f3973e; \">NEUTRAL</th> <th class=\" tx-black tx-18\" style=\"color: #7dcbe9; \">POTENTIAL REACH</th> </tr> <tbody> <tr class=\"tr td th fontsize20\" each=\"{o,i in prjList}\"> <td class=\" tx-black tx-18\"><b>{o}</b></td> <td class=\" tx-black tx-18\" style=\"color: #7ee87c; \"> <i class=\"fa fa-thumbs-up\"></i> <b>{cachepositive[i] ? cachepositive[i].formatMoney(0).replace(\\',\\', \\'.\\') : cachepositive[i]}</b></td> <td class=\" tx-black tx-18\" style=\"color: #db6a87; \"> <i class=\"fa fa-thumbs-down\"></i> <b>{cachenegative[i] ? cachenegative[i].formatMoney(0).replace(\\',\\', \\'.\\') : cachenegative[i]}</b></td> <td class=\" tx-black tx-18\" style=\"color: #f3973e; \"> <i class=\"fa fa-question-circle\"></i> <b>{cacheneutral[i] ? cacheneutral[i].formatMoney(0).replace(\\',\\', \\'.\\') : cacheneutral[i]}</b></td> <td class=\" tx-black tx-18\" style=\"color: #7dcbe9; \"> <i class=\"fa fa-users\"></i> <b>{potentialreach[i] ? potentialreach[i].formatMoney(0).replace(\\',\\', \\'.\\') : potentialreach[i]}</b></td> </tr> <tr class=\"tr td th\" if=\"{this.total == 0}\"> <td colspan=\"2\" class=\"txtcenter\">No data found, please input another dates</td> </tr> </tbody> </table> </div> </div> </div> </div>',\"\",\"\",(function(t){this.cachesentimentmention={},this.cachepositive={},this.cachenegative={},this.cacheneutral={},this.chacetotal={},this.chacereachtotal={},this.potentialreach={},this.render=()=>{let t=Object(i.clone)(this.parent.search);t.since=t.until,t.until=t.until,APP.apiGet({path:\"projects/list?selected_fields=key_id,key_name\",success:t=>{this.projectList=t}}).done(()=>{this.createObject(t,this.projectList)})},this.createObject=(t,e)=>{this.competitionProjects=this.parent.projectAll.split(\",\"),this.prjList={};for(let t in this.competitionProjects){const a=this.competitionProjects[t],s=Object(i.find)(e,{key_id:parseInt(a)});s&&s.key_name&&(this.prjList[a]=s.key_name)}var a=this.competitionProjects;this.datavalue(t,a),this.potentialreach(t,a)},this.datavalue=(t,e)=>{async.each(e,(e,a)=>{t.project=e,APP.apiGet({path:\"mentions/sentiment-count\",data:t,success:t=>{let s=this.parent.competition||{};6===Object(i.filter)(s,t=>t).length&&this.parent.updateid();const c=(t=t.items).negative?parseInt(t.negative):0,o=t.positive?parseInt(t.positive):0,l=t.neutral?parseInt(t.neutral):0;this.chacetotal[e]=o+c+l,this.cachepositive[e]=o,this.cachenegative[e]=c,this.cacheneutral[e]=l,this.sValue=t,this.update(),a()}}),this.update({isLoading:!1})})},this.potentialreach=(t,e)=>{t.compare=!0,async.each(e,(e,a)=>{t.project=e;var i=\"\",s=0;for(let e in t)t[e]&&\"\"!=t[e]&&(i+=s>0?`&${e}=${encodeURIComponent(t[e])}`:`?${e}=${encodeURIComponent(t[e])}`,s++);APP.apiGet({path:\"summary/potential-reach\"+i,success:t=>{t=t.items,this.potentialreach[e]=t.potential_reach?t.potential_reach:0,this.update(),a()}}),this.update({isLoading:!1})})}}))},92:function(t,e,a){\"use strict\";a.r(e);var i=a(0);a(1).tag2(\"compositionbrandlast\",'<div class=\"row mt-5\"> <div class=\"col-md-12 col-12\"> <div class=\"row\"> <div class=\"ripple-loader\" if=\"{isLoading}\"></div> <div class=\"col-md-12 col-12 mb-4 text-center\"> <b class=\"f24 a141\">SENTIMENT COMPETITION (THE LAST {totadate} DAYS )</b> <br> <span class=\"f14 a141\">Sentiment comparison among source brand mentions</span> </div> <div class=\"col-md-12\"> <table class=\"table mg-b-0 tx-30-r10 \"> <tr> <th></th> <th class=\" tx-black tx-18\" style=\"color: #7ee87c; \">POSITIVE </th> <th class=\" tx-black tx-18\" style=\"color: #db6a87; \">NEGATIVE</th> <th class=\" tx-black tx-18\" style=\"color: #f3973e; \">NEUTRAL</th> <th class=\" tx-black tx-18\" style=\"color: #7dcbe9; \">POTENTIAL REACH</th> </tr> <tbody> <tr class=\"tr td th fontsize20\" each=\"{o,i in prjList}\"> <td class=\" tx-black tx-18\"><b>{o}</b></td> <td class=\" tx-black tx-18\" style=\"color: #7ee87c; \"> <i class=\"fa fa-thumbs-up\"></i> <b>{cachepositive[i] ? cachepositive[i].formatMoney(0).replace(\\',\\', \\'.\\') : cachepositive[i]}</b></td> <td class=\" tx-black tx-18\" style=\"color: #db6a87; \"> <i class=\"fa fa-thumbs-down\"></i> <b>{cachenegative[i] ? cachenegative[i].formatMoney(0).replace(\\',\\', \\'.\\') : cachenegative[i]}</b></td> <td class=\" tx-black tx-18\" style=\"color: #f3973e; \"> <i class=\"fa fa-question-circle\"></i> <b>{cacheneutral[i] ? cacheneutral[i].formatMoney(0).replace(\\',\\', \\'.\\') : cacheneutral[i]}</b></td> <td class=\" tx-black tx-18\" style=\"color: #7dcbe9; \"> <i class=\"fa fa-users\"></i> <b>{potentialreach[i] ? potentialreach[i].formatMoney(0).replace(\\',\\', \\'.\\') : potentialreach[i]}</b></td> </tr> <tr class=\"tr td th fontsize20\" if=\"{this.parent.competition}\"> <td class=\" tx-black tx-18\">SOV ({namevaluId})</td> <td class=\" tx-black tx-18\" style=\"color: #7ee87c; \"> <i class=\"fa fa-thumbs-up\"></i> <b>{totalpositives ? totalpositives.toLocaleString(\\'id\\', {minimumFractionDigits: 0, maximumFractionDigits: 2}) : 0} %</b></td> <td class=\" tx-black tx-18\" style=\"color: #db6a87; \"> <i class=\"fa fa-thumbs-down\"></i> <b>{totalnegatives ?  totalnegatives.toLocaleString(\\'id\\', {minimumFractionDigits: 0, maximumFractionDigits: 2}) : 0} %</b></td> <td class=\" tx-black tx-18\" style=\"color: #f3973e; \"> <i class=\"fa fa-question-circle\"></i> <b>{totalneutrals ?  totalneutrals.toLocaleString(\\'id\\', {minimumFractionDigits: 0, maximumFractionDigits: 2}) : 0} %</b></td> <td class=\" tx-black tx-18\" style=\"color: #7dcbe9; \"> <i class=\"fa fa-users\"></i> <b>{totalreachs ? totalreachs.toLocaleString(\\'id\\', {minimumFractionDigits: 0, maximumFractionDigits: 2}) : 0} %</b></td> </tr> <tr class=\"tr td th\" if=\"{this.total == 0}\"> <td colspan=\"2\" class=\"txtcenter\">No data found, please input another dates</td> </tr> </tbody> </table> </div> </div> </div> </div>',\"\",\"\",(function(t){this.cachesentimentmention={},this.totadate=0,this.cachepositive={},this.cachenegative={},this.cacheneutral={},this.chacetotal={},this.chacereachtotal={},this.potentialreach={},this.totalpositive=[],this.totalnegative=[],this.totalneutral=[],this.totalreach=[],this.render=()=>{let t=Object(i.clone)(this.parent.search),e=new Date(t.since),a=new Date(t.until);this.totadate=(a-e)/864e5+1,APP.apiGet({path:\"projects/list?selected_fields=key_id,key_name\",success:t=>{this.projectList=t}}).done(()=>{this.createObject(t,this.projectList)}),this.update()},this.createObject=(t,e)=>{this.competitionProjects=this.parent.projectAll.split(\",\"),this.prjList={};for(let t in this.competitionProjects){const a=this.competitionProjects[t],s=Object(i.find)(e,{key_id:parseInt(a)});s&&s.key_name&&(this.prjList[a]=s.key_name)}var a=this.competitionProjects;this.datavalue(t,a),this.potentialreach(t,a)},this.datavalue=(t,e)=>{async.each(e,(e,a)=>{t.project=e,APP.apiGet({path:\"mentions/sentiment-count\",data:t,success:t=>{let s=this.parent.component;s.compositionbrandlast=!0,6===Object(i.filter)(s,t=>t).length&&this.parent.updateid();const c=(t=t.items).negative?parseInt(t.negative):0,o=t.positive?parseInt(t.positive):0,l=t.neutral?parseInt(t.neutral):0;this.totalpositive.push(o),this.totalnegative.push(c),this.totalneutral.push(l),this.chacetotal[e]=o+c+l,this.cachepositive[e]=o,this.cachenegative[e]=c,this.cacheneutral[e]=l,this.sValue=t,this.update(),a()}}),this.update({isLoading:!1})},()=>{let t=p(\"project\"),e=Object(i.filter)(this.projectList,e=>t.indexOf(e.key_id)>-1);this.namevaluId=e[0].key_name;let a=this.cachepositive[t],s=Object(i.sumBy)(this.totalpositive);this.totalpositives=100*a/s;let c=this.cachenegative[t],o=Object(i.sumBy)(this.totalnegative);this.totalnegatives=100*c/o;let l=this.cacheneutral[t],r=Object(i.sumBy)(this.totalneutral);this.totalneutrals=100*l/r,this.update()})},this.potentialreach=(t,e)=>{t.compare=!0,async.each(e,(e,a)=>{t.project=e;var i=\"\",s=0;for(let e in t)t[e]&&\"\"!=t[e]&&(i+=s>0?`&${e}=${encodeURIComponent(t[e])}`:`?${e}=${encodeURIComponent(t[e])}`,s++);APP.apiGet({path:\"summary/potential-reach\"+i,success:t=>{t=t.items,this.potentialreach[e]=t.potential_reach?t.potential_reach:0,this.totalreach.push(this.potentialreach[e]),this.update(),a()}}),this.update({isLoading:!1})},()=>{let t=p(\"project\")?p(\"project\").split(\",\"):APP.getProject().split(\",\"),e=this.potentialreach[t],a=Object(i.sumBy)(this.totalreach);this.totalreachs=100*e/a,this.update()})}}))}}]);","extractedComments":[]}