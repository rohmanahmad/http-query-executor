{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{100:function(t,e,i){i(0).tag2(\"sociograh\",'<div class=\"card shadow-base bd-0\"> <div class=\"overflow-hidden\"> <div class=\"card-header bg-transparent d-flex justify-content-between align-items-center\"> <h6 class=\"card-title tx-uppercase tx-12 mg-b-0\"> <img src=\"assets/img/image/share-teal.png\" width=\"20\" height=\"20\" class=\"mg-r-5\"> SOCIOGRAPH KEYWORDS </h6> <span> <div class=\"btn-group\" role=\"group\" aria-label=\"Limit\"> <select class=\"btn btn-outline-info btn-icon cursor-pointer mg-r-20\" onchange=\"{changeLimit}\" ref=\"limitPage\"> <option value=\"100\" selected=\"{selected:pagelimitvalue == 100}\">100</option> <option value=\"500\" selected=\"{selected:pagelimitvalue == 500}\">500</option> <option value=\"1000\" selected=\"{selected:pagelimitvalue == 1000}\">1000</option> <option value=\"2000\" selected=\"{selected:pagelimitvalue == 2000}\">2000</option> <option value=\"3000\" selected=\"{selected:pagelimitvalue == 3000}\">3000</option> <option value=\"4000\" selected=\"{selected:pagelimitvalue == 4000}\">4000</option> </select> </div> <img src=\"assets/img/image/dowload-teal.png\" width=\"20\" height=\"20\" class=\"mg-r-15 cursor-pointer \" data-toggle=\"tooltip\" data-placement=\"top\" title=\"Download\" onclick=\"{downloadcsv}\"> <img src=\"assets/img/image/full-screent.png\" width=\"20\" height=\"20\" class=\"mg-r-5 cursor-pointer \" onclick=\"{fullscreent}\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"Full Screen\"> <b class=\"cursor-default mg-l-10 fontweightinherit\" aria-hidden=\"true\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"???\">? </b> </span> </div> <div class=\"card-body pd-0 bd-color-gray-lighter height520 textcenter mg-t-20\" if=\"{total == 0}\"> No data found, please input another dates </div> <div class=\"ripple-loader\" if=\"{isLoading}\"></div> <div class=\"card-body pd-0 bd-color-gray-lighter height540 pd-20 heightsvgsosiograph\" id=\"sosiograph\" if=\"{total != 0}\"> </div> </div> </div> <a id=\"return-to-top-sosiograph\" onclick=\"{outscreentsosiograph}\"><i class=\"fa fa-expand cursor-pointer colorwhite\"></i></a>',\"\",\"\",(function(t){this.renderer=null,this.pagelimitvalue=1e3,this.changeLimit=t=>{APP.log(\"change stream limit\"),this.pagelimitvalue=t.target.value,this.render()},this.render=()=>{let t=_.clone(this.parent.search);t.limit=this.pagelimitvalue,this.update({isLoading:!0}),this.xhr=APP.apiGet({path:\"mentions/sociograph\",data:t,success:t=>{t=t.items,this.data=t,this.datarender(t,!0)}})},this.datarender=(t,e)=>{if(_.isNull(this.renderer)||0!=this.total&&this.renderer.dispose(),this.total=t.length,0!=this.total){this.update();var i=t,s=Viva.Graph.graph(),a=Viva.Graph.View.svgGraphics(),o={};i.forEach(t=>{let e=t.id.split(\".\");for(let t=0;t<e.length;t++)t<e.length-1&&t>0&&(o[e[t]]||(s.addNode(e[t]),o[e[t]]=!0),o[e[t+1]]||(s.addNode(e[t+1]),o[e[t+1]]=!0),s.addLink(e[t],e[t+1]))});var r=0;s.forEachNode(t=>{r<t.links.length&&(r=t.links.length)});var n=function(t,e){s.forEachLinkedNode(t,(function(t,i){var s=a.getLinkUI(i.id);s&&s.attr(\"stroke\",e?\"red\":\"#999999\")}))};a.node(t=>{t.data;let e=Viva.Graph.svg(\"g\"),i=t.links.length/r*32;i=i<10?10:i;let s=Viva.Graph.svg(\"text\").attr(\"y\",10).attr(\"x\",10).attr(\"stroke-width\",.5).attr(\"font-size\",i).attr(\"stroke\",\"#246a9d\").text(t.id);$(e).hover((function(){n(t.id,!0)}),(function(){n(t.id,!1)}));let a=this;return $(e).click((function(){a.parent.detailmentions(null,null,null,null,t.id,null,\"Keywords\")})),e.append(s),e}).placeNode((t,e)=>{t.attr(\"transform\",\"translate(\"+e.x+\",\"+(e.y-12)+\")\")});var l=Viva.Graph.Layout.forceDirected(s,{springLength:50,springCoeff:.001,dragCoeff:.09,gravity:-1});this.renderer=Viva.Graph.View.renderer(s,{graphics:a,container:document.getElementById(\"sosiograph\")});var h=this.renderer,d=$(\".heightsvgsosiograph\").height(),c=$(\".heightsvgsosiograph\").width();e&&setTimeout(()=>{$(\"#sosiograph svg\").css({width:c,height:d})},1),h.run(),setTimeout((function(){h.pause();var t=l.getGraphRect(),e=Math.min(t.x2-t.x1,t.y2-t.y1);!function t(e,i){e<i?(i=h.zoomOut(),setTimeout((function(){t(e,i)}),16)):(setTimeout((function(){h.zoomOut()}),16),setTimeout((function(){h.zoomOut()}),32),setTimeout((function(){h.zoomOut()}),50))}(Math.min($(\"#sosiograph\").width(),$(\"#sosiograph\").height())/e,1)}),8e3),this.update({isLoading:!1})}else this.update({isLoading:!1})},this.downloadcsv=()=>{var t=this.data;t.length>0&&APP.downloadcsv(t,\"sociograph\",!0)},this.on(\"unmount\",()=>{this.xhr&&this.xhr.abort(),_.isNull(this.renderer)||this.renderer.dispose()}),this.on(\"mount\",()=>{this.xhr=null}),this.fullscreent=()=>{this.datarender(this.data,!1),$(\"#sosiograph svg\").css({display:\"block\",\"z-index\":\"9999\",position:\"fixed\",width:\"100%\",height:\"100%\",top:\"0\",right:\"0\",left:\"0\",bottom:\"0\",overflow:\"auto\",background:\"white\",zoom:\" 200%\"}),this.data.length>0&&$(\"#return-to-top-sosiograph\").fadeIn(200)},this.outscreentsosiograph=()=>{let t=$(\".heightsvgsosiograph\").height(),e=$(\".heightsvgsosiograph\").width();this.datarender(this.data,!0),$(\"#sosiograph svg\").css({width:e,height:t,display:\"\",\"z-index\":\"\",position:\"\",top:\"\",right:\"\",left:\"\",bottom:\"\",overflow:\"\",background:\"\"}),$(\"#return-to-top-sosiograph\").fadeOut(200),this.update()}}))},219:function(t,e,i){i(0).tag2(\"stream-composition\",'<div class=\"header-title {fontsizecolor:fontcolor}\">STREAM COMPOSITION</div> <div class=\"panel\" riot-style=\"{heighttotal}\"> <div if=\"{isLoading}\" class=\"loader\"></div> <div class=\"scrolling outer\"> <div class=\"inner\"> <table class=\"tablemarginbottom \" riot-style=\"cursor: ew-resize; {fonttable}\"> <tr class=\"tr td th toptable\"> <th class=\"colorborder\">Source</th> <td style=\"text-align: center;\" class=\"bordersummary\">Total Stream</td> <td style=\"text-align: center;\" class=\"bordersummary\"> Neutral</td> <td style=\"text-align: center;\" class=\"bordersummary\"> Positive</td> <td style=\"text-align: center;\" class=\"bordersummary\"> Negative</td> </tr> <tr class=\"tr td th txtcenter\" each=\"{items}\"> <th class=\"colorborder\">{name}</th> <td class=\"bordersummary txtcenter\">{total}</td> <td class=\"bordersummary txtcenter\"> {neutral}</td> <td class=\"bordersummary txtcenter\"> {positive}</td> <td class=\"bordersummary txtcenter\">{negative}</td> </tr> <tr class=\"tr td th txtcenter\" if=\"{this.total == 0}\"> <th>No Data</th> </tr> </tr> </table> </div> </div> </div>',\"\",\"\",(function(t){this.isLoading=!0,this.xhr=null,this.fontcolor=!1,this.heighttotal=\"height: 480px\",this.render=()=>{APP.log(\"influent-sosial : render\");const t=_.find(this.times,{selected:!0});let e=_.clone(this.parent.search);e.type=t,this.update({isLoading:!0}),\"analysis/my-stream..\"==APP.currentHash?(this.heighttotal=\"height: 480px\",this.update({heighttotal:\"height: 480px\",fonttable:\"\",fontcolor:!1})):(this.update({heighttotal:\"\",fonttable:\"font-size: 20px;\",fontcolor:!0}),p(\"section\")?e.section=p(\"section\"):e.section=null),this.total=0,this.xhr=APP.apiGet({path:\"mentions/composition\",data:e,success:function(t){this.update({total:t.length,items:t}),this.total=t.length,this.items=t}.bind(this)}),this.xhr.readyState&&this.update({isLoading:!1})},this.reload=()=>{this.Loading=!0,this.render()},this.on(\"mount\",()=>{this.xhr=null}),this.on(\"unmount\",()=>{this.xhr&&this.xhr.abort()})}))}}]);","extractedComments":[]}