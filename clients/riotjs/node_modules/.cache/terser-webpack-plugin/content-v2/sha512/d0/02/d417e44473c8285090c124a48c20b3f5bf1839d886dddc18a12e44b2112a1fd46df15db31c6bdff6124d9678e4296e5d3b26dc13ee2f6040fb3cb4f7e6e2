{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{248:function(t,i,s){s(0).tag2(\"mybrandpositive\",'<div class=\"widget-2\"> <div class=\"card shadowbase overflow-hidden\"> <div class=\"card-header pd-20 bg-transparent borderbottom0 d-block text-center\"> <h4 class=\"panel-body header-title\"> <span class=\"myButtonR10teal\">POSITIF WORDCLOUD</span> </h4> </div> <div class=\"ripple-loader\" if=\"{isLoading}\"></div> <div class=\"card-body pd-10 bd-color-gray-lighter\"> <div class=\"row row-sm\"> <div class=\"col-md-12\"> <div id=\"wordcloud_container \"> <div id=\"wordcloud_canvas \" class=\"table-responslive mg-b-20\"> <div id=\"wordcloud_positive\" riot-style=\"height:{heightval - 150}px; width:100%;\"> </div> </div> </div> </div> </div> <div class=\"row row-sm\"> <div class=\"col-md-8 col-md-8-r10\"> <h4 class=\"panel-body header-title\"> <span class=\"myButtonR10teal streams\">POSITIF STREAMS</span> </h4> <div class=\"panel \" if=\"{isLoading}\"> <div if=\"{isLoading}\" class=\"loader\"></div> <div class=\"panel-body bg-white\"> </div> </div> <div class=\"panel \" if=\"{this.total==0 && !isLoading}\" style=\" min-height: 290px; margin-top: 60px;\"> <div class=\"panel-body bg-white \" style=\"text-align: center;margin-top:3px;\"> No Data </div> </div> <div> <div class=\"panels mg-t-10\" style=\"text-align: -webkit-right;\" each=\"{items}\"> <div class=\"panel-body streams\" if=\"{!isLoading && this.total != 0}\">{text.substring(0,200)} <br> <a class=\"servicetext\"> {service}</a></div> </div> </div> </div> <div class=\"col-md-4 col-md-4-r10\"> <h4 class=\"header-title\"><span class=\"myButtonR10teal streams\">PHRASE </span></h4> <div class=\"accsaved mg-t-10 topwordpositiveinfographic\" each=\"{o,i in topword}\" if=\"{i < 5}\"> {o.phrase}</div> </div> </div> </div> </div> </div>',\"\",\"\",(function(t){this.render=()=>{this.isLoading=!0,this.notdata=!1,this.value={},this.update_data(),this.topwordpositive()},this.update_data=()=>{this.notdata=!1,APP.log(\"wordcloude : render\"),this.update({isLoading:!0});_.find(this.times,{selected:!0});let t=_.clone(this.parent.search);t.section=\"positive\",t.limit=4e3,t.page=0,t.is_total=null,this.xhrWordCloud=APP.apiGet({path:\"mentions/wordcloud\",data:t,success:function(i){let s=i&&i.items&&i.items.positive?i.items.positive:[],e=t.q;if(e)this.streampositive(e);else{if(s.length>0)var a=s?s.map(t=>t[0]).slice(0,4).toString().replace(/\\,/g,\" or \"):null;else a=\"\";this.streampositive(a)}var o=_.concat(s);if((o=_.orderBy(o,[1],[\"desc\"])).length>0){this.update({notdata:!1});const t=o[0][1];o.map(i=>{const s=i[0].length,e=parseInt(i[1]);let a=e/t*100;return s>20&&(a=10,e/t*100>60&&(a=e/t*50)),a<15&&(a=15),i[1]=a,i}),$(\"#wordcloud_container\").show(),$(\"#wordcloud_canvas\").removeClass(\"onload\"),$(\"#wordcloud_positive\").show(),WordCloud(\"wordcloud_positive\",{list:o,backgroundColor:\"transparent\",gridSize:Math.round(16*$(\"#wordcloud_positive\").width()/1024),weightFactor:t=>t,shape:\"diamond\",shuffle:!1,rotateRatio:.2,rotationSteps:3})}else this.notdata=!0,$(\"#wordcloud_container\").hide(),$(\"#wordcloud_canvas\").removeClass(\"oload\"),$(\"#wordcloud_positive\").html(\"Empty\"),$(\"#wordcloud_positive\").show()}.bind(this)}),this.xhrWordCloud.readyState&&this.update({isLoading:!1,notdata:!0})},this.topwordpositive=()=>{let t=_.clone(this.parent.search);this.topword=[],t.limit=6,t.page=0,t.section=\"positive\",this.xhrTopWords=APP.apiGet({path:\"mentions/phrase\",data:t,success:t=>{this.total2=t.length,this.topword=t.items,this.update({isLoading:!1})}}),this.xhrTopWords.readyState&&this.update({isLoading:!1,total2:0})},this.streampositive=t=>{APP.log(\"render Stream timeline\");const i=_.find(this.times,{selected:!0});let s=_.clone(this.parent.search),e=s.q?s.q:t;s.type=i,s.section=\"positive\",s.limit=3,s.q=e,s.group_service=!1;var a=\"\",o=0;this.total=0;for(let t in s)s[t]&&\"\"!=s[t]&&(a+=o>0?`&${t}=${encodeURIComponent(s[t])}`:`?${t}=${encodeURIComponent(s[t])}`,o++);this.xhrStream=APP.apiPost({path:\"stream\"+a,success:function(t){this.dataImage=t.item.map(t=>t.user.avatar),this.items=t.item,this.total=this.items.length,this.isLoading=!1,this.userLoadingSentiment=void 0,this.update()}.bind(this)}),this.xhrStream.readyState&&this.update({isLoading:!1,total:0})},this.on(\"mount\",()=>{this.heightval=window.innerHeight/2,this.xhrWordCloud=null,this.xhrStream=null,this.xhrTopWords=null}),this.on(\"unmount\",()=>{this.xhrWordCloud&&this.xhrWordCloud.abort(),this.xhrStream&&this.xhrStream.abort(),this.xhrTopWords&&this.xhrTopWords.abort()})}))},249:function(t,i,s){\"use strict\";s.r(i);var e=s(19),a=s.n(e);s(0).tag2(\"reac-vs-mention\",'<div class=\"col-md-12 mg-t-20\"> <span class=\"panel-body header-title mg-t-70\"> <span class=\"tx-tittle-infg\"> REACH VS MENTIONS</span> </span> <div class=\"body\" id=\"chartreachofmention\" riot-style=\"height: {heightval}px;\"></div> </div>',\"\",\"\",(function(t){this.type=\"daily\",this.chart=null,this.Loader=!0,this.times=[{id:\"hourly\",name:\"Hourly\",selected:!1},{id:\"daily\",name:\"Daily\",selected:!0},{id:\"monthly\",name:\"Monthly\",selected:!1}],this.mentionreach=[{color:\"#66ae9b\",id:\"mention\",name:\"Mention\",no:1},{color:\"#384d5a\",id:\"reach\",name:\"Reach\",no:2}],this.ajaxChannels=[],this.isExist=!0,this.on(\"mount\",()=>{this.heightval=(window.innerHeight-200)/2,this.update()}),this.selectTime=t=>{APP.log(\"chart streams : selecttme\"),t.preventDefault(),t.item.selected=!0;const i=t.item.id;this.times=_.map(this.times,t=>(t.id!=i&&(t.selected=!1),t)),this.update(),this.render()},this.render=t=>{setTimeout(()=>{$('[data-toggle=\"tooltip\"]').tooltip()},1e3),this.nodata=!0,APP.log(\"chart streams : render\");const i=_.find(this.times,{selected:!0}).id;let s=_.clone(this.parent.search);s.group_service=\"false\",s.project=APP.currentProject,s.type=i,this.chart&&this.chart.spacing&&this.chart.destroy(),this.update({Loader:!0});var e=[];async.each(this.mentionreach,(t,i)=>{if(!this.isExist)return!1;s.section=t.id;this.chart=APP.apiGet({path:\"mentions\",data:s,success:s=>{s=s.items;let a=[];a=(s=_.sortBy(s,t=>moment(t.date).toDate())).map(t=>[moment(t.date).utc().valueOf(),t.count]),a.length>0&&(this.nodata=!1),e.push({id:\"response\",shadow:!1,noid:t.no,name:t.name,type:\"Mention\"==t.name?\"areaspline\":\"column\",lineWidth:1,color:t.color,fillColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,t.color],[1,Highcharts.Color(t.color).setOpacity(0).get(\"rgba\")]]},marker:{radius:3},data:a,yAxis:\"Mention\"==t.name?1:0}),i()}},(t,i,s)=>{console.log({x:t,y:i,z:s})},i),this.ajaxChannels.push([])},()=>{if(!this.nodata){const t=\"chartreachofmention\";this.update({nodata:this.nodata}),e=_.orderBy(e,[\"noid\"],[\"asc\"]),this.chart=a()(t,i,\"#ccc\");for(var s=0;s<=e.length-1;s++)this.chart.addSeries(e[s])}this.update({Loader:!1}),_.isFunction(t)&&t()})},this.reload=()=>{this.render()},this.on(\"mount\",()=>{this.chart=null,setTimeout(()=>{$('[data-toggle=\"tooltip\"]').tooltip()},1e3),this.ajaxChannels=[],this.isExist=!0}),this.on(\"unmount\",()=>{this.isExist=!1,APP.log(\"chart streams : unmount\"),this.chart&&this.chart.spacing&&(this.chart.destroy(),APP.log(\"chart streams : destroy chart\"))})}))}}]);","extractedComments":[]}