{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[79],{132:function(t,e,i){\"use strict\";i.r(e);var a=i(0);i(46);i(1).tag2(\"competisi-sentiment-chart\",'<div class=\"widget-2 mg-t-20\"> <div class=\"card shadowbase overflow-hidden\"> <div class=\"card-header pd-20 bg-transparent bb-1\"> <h6 class=\"card-title tx-20 tx-uppercase tx-12 mg-b-0\"> <img src=\"assets/img/image/pie-chart-teal.png\" width=\"30\" height=\"30\" class=\"mg-r-5\"> COMPETITION SENTIMENT CHART </h6> </div> <div class=\"ripple-loader\" if=\"{isLoading}\"></div> <div class=\"card-body pd-20 bd-color-gray-lighter height600 textcenter mg-t-0\" if=\"{nodata}\"> No data found, please input another dates </div> <div class=\"card-body pd-10 bd-color-gray-lighter height600\" id=\"chartcompetisisentiment\" if=\"{!nodata}\"> </div> </div> </div>',\"\",\"\",(function(t){this.compositionstreams=null,this.data={},this.render=()=>{APP.apiGet({path:\"projects/list\",data:{selected_fields:\"key_id,key_name\"},success:function(t){this.dataproject=t,setTimeout(()=>{this.renderdata(t)},1e3),this.update()}.bind(this)})};var e=this;this.renderdata=t=>{this.update({isLoading:!0}),APP.log(\"sentiment : update data\"),async.parallel({positive:function(t){i((function(e){t(null,e)}),\"positive\")},negative:function(t){i((function(e){t(null,e)}),\"negative\")},neutral:function(t){i((function(e){t(null,e)}),\"neutral\")}},(function(i,a){if(e.update({isLoading:!1,nodata:!1}),a){const e=a.positive,i=a.negative,n=a.neutral;let o={positive:{},negative:{},neutral:{}};for(let t in e){const i=e[t].brand_name;o.positive[i]||(o.positive[i]=0),o.positive[i]=o.positive[i]+e[t].count}for(let t in i){const e=i[t].brand_name;o.negative[e]||(o.negative[e]=0),o.negative[e]=o.negative[e]+i[t].count}for(let t in n){const e=n[t].brand_name;o.neutral[e]||(o.neutral[e]=0),o.neutral[e]=o.neutral[e]+n[t].count}const r=p(\"project\"),c=document.projectCompetition?document.projectCompetition:\"\",l=decodeURIComponent(`${r},${c}`),d=\"string\"==typeof l?l.split(\",\").map(t=>t.trim()).filter(t=>\"\"!==t).toString():\"\",h=t,u=d.split(\",\").map(t=>parseInt(t.trim())),m=h.filter(t=>u.indexOf(t.key_id)>=0).map(t=>t.key_name),b=[\"positive\",\"negative\",\"neutral\"];let v={};for(let t in b){const e=b[t];v[e]=[];for(let t in m){const i=m[t];o[e]||(o[e]={}),o[e][i]||(o[e][i]=0),v[e].push(o[e][i])}}s(v,m)}})),this.update({isLoading:!1,nodata:!0})};var i=(t,e)=>{let i=Object(a.clone)(this.parent.search);i.section=e;const s=p(\"project\"),n=document.projectCompetition?document.projectCompetition:\"\",o=decodeURIComponent(`${s},${n}`),r=\"string\"==typeof o?o.split(\",\").map(t=>t.trim()).filter(t=>\"\"!==t).toString():\"\";i.project=r,APP.apiGet({path:\"stream/brand/mention\",data:i,success:function(e){t(e.items)}.bind(this)})},s=(t,e)=>{var i={positive:\"#0f8212\",negative:\"#eb3737\",neutral:\"#f3bc25\"},s=Object(a.map)(t,(t,e)=>({name:e,color:i[e],data:t}));this.update({isLoading:!1}),Highcharts.chart(\"chartcompetisisentiment\",{chart:{type:\"column\"},title:{text:\"\"},xAxis:{categories:e,crosshair:!0,labels:{style:{color:\"#333\",font:\"18px Trebuchet MS, Verdana, sans-serif\",fontWeight:\"bold\"}}},yAxis:{min:30,labels:{format:\"{value}%\",style:{color:\"#333\",font:\"14px Trebuchet MS, Verdana, sans-serif\",fontWeight:\"bold\"}},title:{text:\"\"}},tooltip:{pointFormat:'<span style=\"color:{series.color};\">{series.name}</span>: <b>{point.y}</b> ({point.percentage:.0f}%)<br/>',shared:!0},credits:{enabled:!1},navigation:{buttonOptions:{enabled:!1}},legend:{enabled:!0,itemStyle:{color:\"#33333\",fontSize:\"14px\"}},plotOptions:{series:{dataLabels:{enabled:!0,useHTML:!0,formatter:function(){return\"<span style='z-index:0;position:relative; font-size:18px; color:#000000;'> \"+this.y.formatMoney(0)+\"</span>\"}}},column:{stacking:\"percent\",pointPadding:.2,borderWidth:0}},series:s})}}))},133:function(t,e,i){\"use strict\";i.r(e);var a=i(0);i(1).tag2(\"compositionbybrand\",'<div class=\"row no-gutters widget-1\"> <div class=\"col-md-12\"> <div class=\"card-header pd-20 bg-transparent\"> <h6 class=\"card-title tx-20 tx-uppercase tx-12 mg-b-0\"> <img src=\"assets/img/image/line-chart-teal.png\" width=\"30\" height=\"30\" class=\"mg-r-5\"> COMPOSITION BY BRAND </h6> </div> <div class=\" pd-y-15 bg-transparent\"> <div class=\"br-section-wrapper stats\"> <div class=\"bd-gray-300 rounded table-responsive\"> <table class=\"table mg-b-0 tx-30-r10 \"> <tbody> <tr class=\"tr td th fontsize20\" each=\"{o,i in valueDataArray}\"> <td class=\" tx-black\"><b>{o.prj}</b></td> <td class=\" tx-black\" style=\"color: #7dcbe9; \"> <i class=\"fa fa-comments\"></i> <b>{o.total ? o.total.formatMoney(0) : o.total}</b></td> <td class=\" tx-black\" style=\"color: #7ee87c; \"> <i class=\"fa fa-thumbs-up\"></i> <b>{o.positive ? o.positive.formatMoney(0) : o.positive}</b></td> <td class=\" tx-black\" style=\"color: #db6a87; \"> <i class=\"fa fa-thumbs-down\"></i> <b>{o.negative ? o.negative.formatMoney(0) : o.negative}</b></td> <td class=\" tx-black\" style=\"color: #f3973e; \"> <i class=\"fa fa-question-circle\"></i> <b>{o.neutral ? o.neutral.formatMoney(0) : o.neutral}</b></td> </tr> <tr class=\"tr td th\" if=\"{this.total == 0}\"> <td colspan=\"2\" class=\"txtcenter\">No data found, please input another dates</td> </tr> </tbody> </table> </div> </div> </div> </div> </div>',\"\",\"\",(function(t){this.cachesentimentmention={},this.cachepositive={},this.cachenegative={},this.cacheneutral={},this.chacetotal={},this.chacereachtotal={},this.render=()=>{let t=Object(a.clone)(this.parent.search);this.parent.competitionProjects[0]?this.competitionProjects=Object(a.concat)(parseInt([t.project]),this.parent.competitionProjects):this.competitionProjects=[t.project];let e=this.parent.projectList;e?this.createObject(t,e):APP.apiGet({path:\"projects/list?selected_fields=key_id,key_name\",success:t=>{e=t}}).done(()=>{this.parent.projectList=e,this.createObject(t,e)})},this.valueDataArray=[],this.DataArray=[],this.createObject=(t,e)=>{this.prjList={};for(let t in this.competitionProjects){const i=this.competitionProjects[t],s=Object(a.find)(e,{key_id:parseInt(i)});s&&s.key_name&&(this.prjList[i]=s.key_name)}var i=this.competitionProjects;async.each(i,(e,i)=>{t.project=e,APP.apiGet({path:\"mentions/sentiment-count\",data:t,success:function(t){const a=(t=t.items).negative?parseInt(t.negative):0,s=t.positive?parseInt(t.positive):0,n=t.neutral?parseInt(t.neutral):0;this.chacetotal[e]=s+a+n,this.cachepositive[e]=s,this.cachenegative[e]=a,this.cacheneutral[e]=n,this.DataArray.push({negative:a,positive:s,neutral:n,total:s+a+n,prj:this.prjList[e]}),this.update(),i()}.bind(this)}),this.update({isLoading:!1})},()=>{let t=Object(a.orderBy)(this.DataArray,[\"total\"],[\"desc\"]);this.valueDataArray=t,this.update()})}}))}}]);","extractedComments":[]}