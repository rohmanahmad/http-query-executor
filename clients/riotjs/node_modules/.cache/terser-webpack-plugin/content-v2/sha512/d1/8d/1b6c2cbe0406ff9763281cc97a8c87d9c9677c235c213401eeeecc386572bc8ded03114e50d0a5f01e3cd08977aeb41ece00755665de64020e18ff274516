{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[111],{11:function(t,e,i){\"use strict\";i.r(e),i.d(e,\"serviceCategory\",(function(){return s}));var s=[{id:1,name:\"Facebook\",idname:\"facebook\",selected:!0},{id:2,name:\"Twitter\",idname:\"twitter\",selected:!0},{id:3,name:\"Portal\",idname:\"portal\",selected:!0},{id:4,name:\"blog\",selected:!0},{id:5,name:\"Forum\",idname:\"forum\",selected:!0},{id:6,name:\"Video\",idname:\"vidio\",selected:!0},{id:7,name:\"Instagram\",idname:\"image\",selected:!0}]},15:function(t,e,i){\"use strict\";i.r(e),i.d(e,\"getAllUrlParams\",(function(){return s}));var s=function(t){var e=t?t.split(\"?\")[1]:window.location.search.slice(1),i={};if(e)for(var s=(e=e.split(\"#\")[0]).split(\"&\"),a=0;a<s.length;a++){var n=s[a].split(\"=\"),r=n[0],o=void 0===n[1]||n[1];if(r=r.toLowerCase(),\"string\"==typeof o&&(o=o.toLowerCase()),r.match(/\\[(\\d+)?\\]$/)){var d=r.replace(/\\[(\\d+)?\\]/,\"\");if(i[d]||(i[d]=[]),r.match(/\\[\\d+\\]$/)){var l=/\\[(\\d+)\\]/.exec(r)[1];i[d][l]=o}else i[d].push(o)}else i[r]?i[r]&&\"string\"==typeof i[r]?(i[r]=[i[r]],i[r].push(o)):i[r].push(o):i[r]=o}return i}},199:function(t,e,i){i(0).tag2(\"advanced-analysis\",'<div class=\"page-head padding-bottom-5\"> <h1 class=\"page-title\">Advan Analysis<small>your small text goes here</small></h1> <h2 if=\"{projectId}\">Project ID: {projectId}</h2> <div id=\"bs-daterangepicker\" class=\"btn bg-grey-200 padding-10-20 no-border color-grey-600 pull-right border-radius-10 hidden-xs no-shadow\"><i class=\"ion-calendar margin-right-10\"></i> <span></span> <i class=\"ion-ios-arrow-down margin-left-5\"></i></div> </div> <div class=\"container-fluid\"> <div class=\"row\"> <div class=\"col-md-12\"> <div class=\"panel\"> <div class=\"panel-body no-padding-top bg-white height100 margin-bottom-10\"> </div> </div> </div> </div> </div>',\"\",\"\",(function(t){this.on(\"mount\",()=>{APP.log(\"advanced-analysis : mount\"),this.update(),ripple10.loaddaterangepicker()})}))},200:function(t,e,i){\"use strict\";i.r(e);i(3),i(8),i(70),i(71),i(72),i(73),i(75),i(76);i(0).tag2(\"advanced-dashboard\",'<div class=\"page-head bg-grey-100 nopaddingbottm\"> <h1 class=\"header-title nomargin inblock\"> PUBLIC RELATION DASHBOARD</h1> <date-picker cb=\"{updateDate}\" since=\"{localStorage.since}\" until=\"{localStorage.until}\" class=\"btn bg-grey-50 padding-10-20 no-border color-grey-600 pull-right date-style\"></date-picker> </div> <div class=\"container-fluid\"> <div class=\"row\"> <div class=\"col-md-9\"> <prdash-channel loading=\"{isLoading}\" cb=\"{updateChannel}\" ref=\"prdashchannel\"></prdash-channel> </div> <div class=\"col-md-3\"> <prdash-sentiment loading=\"{isLoading}\" cb=\"{updateSentiment}\" ref=\"prsentiment\"></prdash-sentiment> </div> <div class=\"col-md-12\"> <prdash-graph loading=\"{isLoading}\" ref=\"prgraph\"></prdash-graph> <div class=\"clearfix\"></div> </div> <div class=\"col-md-8\"> <prdash-filter-2 class=\"visible-xs visible-sm hidden-md\" cb=\"{updateFilter}\" ref=\"prfilter\"></prdash-filter-2> <prdash-stream-timeline cb=\"{changeStream}\" ref=\"prstream\"></prdash-stream-timeline> </div> <div class=\"col-md-4 visible-lg visible-md hidden-xs\"> <prdash-filter cb=\"{updateFilter}\" ref=\"prfilter2\"></prdash-filter> </div> </div> </div>',\"\",\"\",(function(t){this.search={since:null,until:null,project:null,service_category:null,pr_service:!0,section:\"positive,negative,neutral\"},this.render=()=>{this.refs.prgraph.render(),this.refs.prstream.render(),setTimeout(()=>{this.refs.prsentiment.render()},2e3),this.update()},this.getAPI=()=>{APP.log(\"advanced-dashboard : getApi\"),this.isLoading=!0,this.update();let t=this.search,e=(this.refs,this);async.parallel({index:function(e){APP.apiGet({path:\"prdash\",data:t,success:function(t){e(null,t)}})},graph:function(e){APP.apiGet({path:\"prdash/graph\",data:t,success:function(t){e(null,t)}})}},(function(t,i){e.isLoading=!1,e.update()}))},this.updateDate=(t,e)=>{APP.log(\"advanced-dashboard : updateDate\"),this.search.since=t,this.search.until=e,this.render(),this.refs.prdashchannel.render()},this.updateChannel=t=>{APP.log(\"advanced-dashboard : updateChannel\"),this.refs.prgraph.filterchannel(t);let e=[];_.forEach(t,(function(t){t.selected&&e.push(t.cat_id)})),setTimeout(()=>{this.refs.prsentiment.render(t)},2e3),this.search.section=this.sentimentparams,this.search.service_category=e.toString(),this.render()},this.updateSentiment=t=>{this.sentimentparams=t,APP.log(\"advanced-dashboard : updateSentiment\"),this.refs.prstream.isLoading=!0,this.search.section=this.sentimentparams,setTimeout(()=>{this.refs.prdashchannel.render(),this.render(),this.update()},1e3)},this.changeStream=()=>{this.render()},this.updateFilter=t=>{var e=this.refs.prsentiment.sentiment,i=_.filter(e,(function(t){return t.selected}));let s=[];_.forEach(i,(function(t){s.push(t.id)})),this.refs.prstream.isLoading=!0,this.search.section=s.join(\",\"),APP.log(\"advanced-dashboard : updateFilter\"),this.search.q=t.q,this.search.domain=t.domain,this.search.author=t.author,this.getAPI()},this.projectId=null,this.on(\"mount\",()=>{APP.log(\"advanced-dashboard : mount\"),menuActive.trigger(\"activated\",[\"pr_dashboard\"]),urlStream.trigger(\"changeUrl\",\"advanced-analysis/pr-dashboard\"),urlStream.trigger(\"Urlproject\",p(\"project\")?p(\"project\"):APP.getProject()),APP.currentProject=this.search.project=p(\"project\")?p(\"project\"):APP.getProject(),this.update(),p(\"filter\")&&this.getfilterlistid(),ripple10.loaddaterangepicker()}),this.getfilterlistid=()=>{APP.log(\"project : project\"),APP.apiGet({path:\"bookmark-filter/list/\"+p(\"filter\"),data:{id:p(\"filter\")},success:function(t){this.search.q=t.filter_keywords,this.search.domain=t.filter_domain,this.search.author=t.filter_author,this.search.filterbot=t.filter_filterbot,this.refs.prfilter.getfilterlist(t),this.refs.prfilter2.getfilterlist(t),this.getAPI(),this.update()}.bind(this)})}}))},68:function(t,e,i){\"use strict\";i.r(e),i.d(e,\"parseFormatChatMap\",(function(){return s}));var s=function(t,e){var i=[],s=Promise.resolve();t.data.forEach((function(e,a){var n,r,o,d;s=s.then((n=i,r=\"brand\",o={features:t.provinces.features,lat:e.lat,long:e.long,brand:e.brand},console.log(n),new Promise((function(t,e){d=getProvince(o.features,o.lat,o.long,o.brand),n.length>0?n.forEach((function(e,i){e[r]===d.HASC_1&&t({prov:d,rs:i})})):t({prov:d,rs:-1})}))).then((function(t){t.rs>=0&&i[t.rs].hasc===t.prov.HASC_1?i[t.rs].z+=1:i.push({color:e.color,brand:e.brand,name:t.prov.NAME_1,hasc:t.prov.HASC_1,z:1})})))})),s.then((function(){console.log(i),e(i)}))}},69:function(t,e){riot.tag2(\"rg-tags\",'<div class=\"tags\"> <span class=\"tags__container\"> <button each=\"{opts.tags.tags}\" onclick=\"{removeTag}\" type=\"button\" class=\"button button--primary tag\"> {text} <span class=\"tag__close\">Ã—</span> </button> </span> <div class=\"tags__field-container\"> <input type=\"{opts.tags.filter ? \\'search\\' : \\'text\\'}\" name=\"selectfield\" class=\"field\" placeholder=\"{opts.tags.placeholder}\" onkeydown=\"{navigate}\" oninput=\"{filterOptions}\" onfocus=\"{open}\" __readonly=\"{!opts.tags.filter}\"> <ul class=\"menu menu--high\" if=\"{opts.tags.isvisible}\"> <li each=\"{options}\" no-reorder onclick=\"{parent.select}\" class=\"menu__item {\\'menu__item--active\\': selected, \\'menu__item--disabled\\': disabled, \\'menu__item--hover\\': active}\"> {text} </li> </ul> </div> </div>','rg-tags .menu,[riot-tag=\"rg-tags\"] .menu,[data-is=\"rg-tags\"] .menu{ position: absolute; }',\"\",(function(t){var e=this;t.tags||(t.tags={options:[],tags:[]}),t.tags.options||(t.tags.options=[]),t.tags.tags||(t.tags.tags=[]);var i=function(t){e.root.contains(t.target)||e.close(),e.update()},s=function(){e.selectfield.value=\"\";for(var i=0;i<t.tags.options.length;i++){t.tags.options[i].selected=!1}};this.filterOptions=function(){e.options=t.tags.options,t.tags.filter&&(e.options=e.options.filter((function(i){var s=i[t.tags.filter];return s&&s.toLowerCase().indexOf(e.selectfield.value.toLowerCase())>-1}))),e.trigger(\"filter\",e.selectfield.value)};var a=function(){var i=function(){var t=window,e=document,i=e.documentElement,s=e.getElementsByTagName(\"body\")[0];return{width:t.innerWidth||i.clientWidth||s.clientWidth,height:t.innerHeight||i.clientHeight||s.clientHeight}}(),s=e.root.querySelector(\".menu\");if(s){if(!t.tags.isvisible)return s.style.marginTop=\"\",void(s.style.marginLeft=\"\");var a=s.getBoundingClientRect();i.width<a.left+a.width&&(s.style.marginLeft=i.width-(a.left+a.width)-20+\"px\"),a.left<0&&(s.style.marginLeft=\"20px\"),i.height<a.top+a.height&&(s.style.marginTop=i.height-(a.top+a.height)-20+\"px\")}};this.navigate=function(i){if([13,38,40].indexOf(i.keyCode)>-1&&!t.tags.isvisible)return i.preventDefault(),e.open(),!0;var s=e.options.length;if(s>0&&[13,38,40].indexOf(i.keyCode)>-1){i.preventDefault();for(var a=null,n=0;n<s;n++){if(e.options[n].active){a=n;break}}null!=a&&(e.options[a].active=!1),38==i.keyCode?null==a||0==a?e.options[s-1].active=!0:e.options[a-1].active=!0:40==i.keyCode?null==a||a==s-1?e.options[0].active=!0:e.options[a+1].active=!0:13==i.keyCode&&null!=a&&e.select({item:e.options[a]})}return!0},this.open=function(){t.tags.isvisible=!0,e.trigger(\"open\")},this.close=function(){t.tags.isvisible&&(t.tags.isvisible=!1,e.trigger(\"close\"))},this.select=function(i){t.tags.options.forEach((function(t){return t.selected=!1})),i.item.selected=!0,e.addTag(i.item),s(),e.filterOptions(),e.trigger(\"select\",i.item)},this.addTag=function(e){-1==t.tags.tags.indexOf(e)&&t.tags.tags.push(e)},this.removeTag=function(e){t.tags.tags=t.tags.tags.filter((function(t){if(t._id!=e.item._id)return t}))},this.on(\"mount\",(function(){s(),e.filterOptions(),document.addEventListener(\"click\",i),e.update()})),this.on(\"update\",(function(){t.tags.options.forEach((function(t){t._id=t._id||(Math.floor(60466175*Math.random())+1679615).toString(36)})),t.tags.tags.forEach((function(t){t._id=t._id||(Math.floor(60466175*Math.random())+1679615).toString(36)})),t.tags.filter||s(),a()})),this.on(\"unmount\",(function(){document.removeEventListener(\"click\",i)}))}))}}]);","extractedComments":[]}