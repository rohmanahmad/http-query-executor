{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[104],{128:function(t,e,a){\"use strict\";a.r(e);var i=a(0),s=a(3),r=a.n(s);a(1).tag2(\"chart-stream\",'<div class=\"widget-2 mg-t-20\"> <div class=\"card shadowbase overflow-hidden\"> <div class=\"card-header pd-20 bg-transparent bb-1\"> <h6 class=\"card-title tx-20 tx-uppercase tx-12 mg-b-0\"> <img src=\"assets/img/image/line-chart-teal.png\" width=\"30\" height=\"30\" class=\"mg-r-5\"> STREAM OF MENTIONS </h6> <div class=\"btn-group\" role=\"group\" aria-label=\"Basic example\"> <a onclick=\"{selectTime}\" class=\"btn {active:selected} cursor-pointer\" each=\"{times}\">{name}</a> </div> </div> <div class=\"ripple-loader\" if=\"{isLoading}\"></div> <div class=\"card-body pd-20 bd-color-gray-lighter height353 textcenter mg-t-0\" if=\"{nodata}\"> No data found, please input another dates </div> <div class=\"card-body pd-10 bd-color-gray-lighter height353\" id=\"chartstream\" if=\"{!nodata}\"> </div> </div> </div>',\"\",\"\",(function(t){this.type=\"daily\",this.chart=null,this.isLoading=!0,this.tombolrefres=!1,this.times=[{id:\"hourly\",name:\"Hourly\",selected:!1},{id:\"daily\",name:\"Daily\",selected:!0},{id:\"monthly\",name:\"Monthly\",selected:!1}],this.ajaxChannels=[],this.isExist=!0,this.selectTime=t=>{APP.log(\"chart streams : selecttme\"),t.preventDefault(),t.item.selected=!0;const e=t.item.id;this.times=Object(i.map)(this.times,t=>(t.id!=e&&(t.selected=!1),t)),this.update(),this.render()},this.render=t=>{setTimeout(()=>{if(\"analysis/my-stream..\"==APP.currentHash||\"stream..\"==APP.currentHash){this.update({tombolrefres:!0});var e=2}else e=4;this.nodata=!0,APP.log(\"chart streams : render\");const a=this.parent.refs.channel.channels,s=Object(i.filter)(a,(function(t){return t.selected})),n=Object(i.find)(this.times,{selected:!0}).id;let o=Object(i.clone)(this.parent.search);o.type=n,o.group_service=\"false\",\"domain/infographic..\"==APP.currentHash&&(o.project=APP.currentProject),this.update({isLoading:!0}),this.chart&&this.chart.spacing&&this.chart.destroy();var h=[];async.eachLimit(s,10,(t,a)=>{if(!this.isExist)return!1;o.service_category=t.id;var s=APP.apiGet({path:\"mentions\",data:o,success:s=>{let r=[];s=s.items,r=(s=Object(i.sortBy)(s,t=>moment(t.date).toDate())).map(t=>[moment(t.date).utc().valueOf(),t.count]),r.length>0&&(this.nodata=!1),h.push({id:\"response\",shadow:!1,name:t.name,lineWidth:e,color:t.color,type:\"areaspline\",fillColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,t.color],[1,Highcharts.Color(t.color).setOpacity(0).get(\"rgba\")]]},marker:{radius:3},data:r}),a()}},a);this.ajaxChannels.push(s)},()=>{if(!this.nodata){const t=\"chartstream\";if(this.update({nodata:this.nodata}),\"domain/infographic..\"==APP.currentHash)var e=\"#333\";for(var a=this.chart=r()(t,n,e),s=0;s<=h.length-1;s++)a.addSeries(h[s])}this.update({isLoading:!1}),Object(i.isFunction)(t)&&t()})},500)},this.on(\"mount\",()=>{\"analysis/my-stream..\"!=APP.currentHash&&\"stream..\"!=APP.currentHash||this.update({tombolrefres:!0}),this.ajaxChannels=[],this.isExist=!0}),this.on(\"unmount\",()=>{this.isExist=!1,Object(i.each)(this.ajaxChannels,(function(t){t.abort()})),APP.log(\"chart streams : unmount\"),this.chart&&this.chart.spacing&&(this.chart.destroy(),APP.log(\"chart streams : destroy chart\"))})}))},129:function(t,e,a){\"use strict\";a.r(e);var i=a(0);a(1).tag2(\"chart-top-streams\",'<div class=\"widget-2 mg-t-20\"> <div class=\"card shadowbase overflow-hidden\"> <div class=\"card-header pd-20 bg-transparent bb-1\"> <h6 class=\"card-title tx-20 tx-uppercase tx-12 mg-b-0\"> <img src=\"assets/img/image/clock-teal.png\" width=\"30\" height=\"30\" class=\"mg-r-5\"> TOP STREAM TIME </h6> </div> <div class=\"ripple-loader\" if=\"{isLoading}\"></div> <div class=\"card-body pd-20 bd-color-gray-lighter height600 textcenter mg-t-0\" if=\"{notdata}\"> No data found, please input another dates </div> <div class=\"card-body pd-10 bd-color-gray-lighter height600\" id=\"topstream\" if=\"{!notdata}\"> </div> </div> </div>',\"\",\"\",(function(t){this.isLoading=!0,this.notdata=!1,this.tombolrefres=!1,this.xhr=null,this.fontcolor=!1,this.createChart=t=>{const e=t.newData||[];if(e[0].data.length<=0)return!1;Highcharts.setOptions({global:{useUTC:!0}});const a=Highcharts.chart(\"topstream\",{chart:{type:\"bubble\",zoomType:\"xy\",marginBottom:40,marginRight:0,plotHeight:150,chartHeight:150,renderTo:\"buble_of_mention\"},colors:[\"#8ec8db\"],legend:{enabled:!1},title:{text:\"\"},xAxis:{type:\"datetime\",gridLineWidth:1,gridLineColor:\"#bbbbbb\",gridLineDashStyle:\"dot\",minTickInterval:864e5,title:{text:null},labels:{formatter:function(){return\"<b>\"+Highcharts.dateFormat(\"%e. %b\",this.value)+\"</b> \"},style:{fontSize:\"15px\"}},plotLines:[{color:\"black\",dashStyle:\"dot\",width:2,value:65,label:{rotation:0,y:60,style:{fontStyle:\"italic\"},text:\"Safe fat intake 65g/day\"},zIndex:3}]},yAxis:{startOnTick:!1,endOnTick:!1,type:\"datetime\",title:{text:\"\"},labels:{formatter:function(){return(this.value>24?24:this.value)+\":00\"},style:{fontSize:\"15px\"}},maxPadding:.2,plotLines:[{color:\"black\",dashStyle:\"dot\",width:2,value:50,label:{align:\"right\",style:{fontStyle:\"italic\"},text:\"\",x:-10},zIndex:3}]},navigation:{buttonOptions:{enabled:!1}},tooltip:{formatter:function(){return\"<b>\"+moment(this.key).format(\"YYYY-MMM-DD\")+\"</b> at <b>\"+this.y+\".00</b> <br /> <b>\"+this.point.z+\"</b> mentions\"}},plotOptions:{bubble:{minSize:20,maxSize:70}},exporting:{enabled:!1},legend:{enabled:!1},credits:{enabled:!1},series:e});if(a){const t=a&&a.series&&a.series[0]&&a.series[0].data&&a.series[0].data?a.series[0].data:[],e=Object(i.maxBy)(t,t=>t&&t.z?t.z:{}),s=e&&e.z?parseInt(e.z):0,r=Object(i.findIndex)(t,t=>t.z===s);a.tooltip.refresh(t[r])}},this.render=()=>{APP.log(\"chart streams time : render\");let t=Object(i.clone)(this.parent.search);t.type=null,\"analysis/my-stream..\"==APP.currentHash?(this.tombolrefres=!0,this.fontcolor=!1):this.fontcolor=!0,this.update({isLoading:!0}),this.xhrtopstreams=APP.apiGet({path:\"mentions/top-mentions-time\",data:t,success:function(t){t=t.items?t.items:t;let e=[];for(const a in t){let i=t[a];e.push([new Date(a).getTime(),i.jam,i.count])}0===(t=e.length)?this.notdata=!0:this.update({notdata:!1});const a=[{color:\"#1D91B7\",data:e}];this.createChart({newData:a}),this.update({isLoading:!1})}.bind(this)}),this.xhrtopstreams.readyState&&this.update({isLoading:!1,notdata:!0})},this.reload=()=>{this.Loading=!0,this.render()},this.on(\"mount\",()=>{this.xhr=null,\"analysis/my-stream..\"==APP.currentHash&&(this.tombolrefres=!0),this.update()}),this.on(\"unmount\",()=>{this.xhr&&this.xhr.abort()})}))}}]);","extractedComments":[]}