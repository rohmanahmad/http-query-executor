{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[88],{4:function(e,t,a){\"use strict\";function r(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}a.r(t);var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e)}var t,a,s;return t=e,(a=[{key:\"check\",value:function(){return this.getToken()}},{key:\"login\",value:function(e){this.name=null,this.level=null,this.projects=null,e.token&&this.setToken(e.token),e.name&&(this.name=e.name),e.projects&&(this.projects=e.projects),e.level&&(this.level=e.level),localStorage.setItem(\"AuthData\",JSON.stringify(e))}},{key:\"releaseFromStorage\",value:function(){if(!localStorage.getItem(\"AuthData\"))return!1;var e=JSON.parse(localStorage.getItem(\"AuthData\"));this.login(e)}},{key:\"user\",value:function(e){var t=[\"name\",\"level\",\"projects\"];return this[e]&&t.indexOf(t)?this[e]:e?void 0:{name:this.name,level:this.level,projects:this.projects}}},{key:\"logout\",value:function(){localStorage.removeItem(\"AuthToken\")}},{key:\"setToken\",value:function(e){localStorage.setItem(\"AuthToken\",e)}},{key:\"getToken\",value:function(){var e=new RegExp(\"[?&]token=([^&#]*)\").exec(window.location.href);return null!=e?(localStorage.clear(),e[1]||0):localStorage.getItem(\"AuthToken\")}}])&&r(t.prototype,a),s&&r(t,s),e}();t.default=new s},66:function(e,t,a){a(0).tag2(\"header\",'<div class=\"br-header {mg-t-50:lefside}\"> <div class=\"br-header-left\"> <div class=\"navicon-left hidden-md-down\"> <a onclick=\"{burgerClick}\" id=\"btnLeftMenu\" class=\"cursor-pointer tx-gray-600 hover-dark tx-18 color-blue-teal-r10\"> <i class=\"fa fa-navicon\"></i> </a> </div> <div class=\"navicon-left hidden-lg-up\"> <a onclick=\"{showLeft}\" id=\"btnLeftMenuMobile\" class=\"cursor-pointer color-blue-teal-r10\"> <i class=\"fa fa-navicon\"></i> </a> </div> <div class=\"dropdown stay-open\"> <span class=\"label hidden-md-down\"> </span> <a href=\"\" aria-label=\"Select project\" onclick=\"{resetSearch}\" class=\"btn btn-outline-primary mg-t-10\" data-toggle=\"dropdown\"> <i class=\"fa fa-plus\"></i> <span class=\" hidden-md-down\">{activeProjects.name}</span> </a> <div class=\"dropdown-menu dropdown-menu-header wd-250\"> <div class=\"form-group mg-5 has-search pd-r-5 pd-l-5 pd-t-5\"> <span class=\"fa fa-search form-control-feedback\"></span> <input name=\"search_project\" ref=\"search_project\" riot-value=\"{this.searchText}\" onkeyup=\"{searchProject}\" class=\"form-control bg-input\" placeholder=\"Search Project\" type=\"text\"> </div> <ul class=\"list-unstyled user-profile-nav\"> <li> <a href=\"#{this.currentUrlStream}?project={allProjectIds}\" class=\"pd-5 see-more cursor-pointer\"> <i class=\"fa fa-checks\"></i> Select All </a> </li> <li each=\"{recentProject}\" onclick=\"{toggleCheck}\"> <a class=\"link\" id=\"project-menu-{name.replace(/ /g, \\'_\\')}\" onclick=\"{toggleCheckSelectedProject}\" project=\"{id}\"> <i class=\"fa {fa-check-square-o:checked==true}{fa-square-o:checked==false}\"></i> {name} </a> </li> <li> <hr class=\"mg-5\"> <button class=\"btn btn-outline-primary hg-30 pd-5 wd-60 mg-l-5\" style=\"float: left;\" onclick=\"{submitProjects}\">Show</button> <a onclick=\"{projectsetting}\" class=\"no-hover-style pd-5 see-more cursor-pointer deleteformfilter\" style=\"max-width: 60%;text-align: right;float: right;\"> See More </a> </li> </ul> </div> </div> </div> <nav class=\"nav\"> <div class=\"dropdown\"> <a href=\"\" class=\"tx-gray-800 d-inline-block\" data-toggle=\"dropdown\" aria-label=\"Settings\"> <div class=\"ht-45 pd-x-20 d-flex align-items-center justify-content-center\"> <img alt=\"\" src=\"../assets/img/svg/setting-black.png\" width=\"20\" height=\"20\" class=\"center displayinitial\"> </div> </a> <div class=\"dropdown-menu pd-10 wd-200\"> <nav class=\"nav nav-style-1 flex-column\"> <a href=\"#setting/global-setting?project={localStorage.prjId}\" class=\"nav-link\"> Profile Setting</a> <a href=\"#setting/filterlist?project={localStorage.prjId}\" class=\"nav-link\"> Filter List</a> </nav> </div> </div> <div class=\"dropdown\"> <a href=\"\" class=\"tx-gray-800 d-inline-block\" data-toggle=\"dropdown\" aria-label=\"Settings\"> <div class=\"ht-45 pd-x-20 d-flex align-items-center justify-content-center\"> <img alt=\"\" src=\"../assets/img/svg/logout-black.png\" width=\"20\" height=\"20\" class=\"center displayinitial\"> </div> </a> <div class=\"dropdown-menu pd-10 wd-200\"> <nav class=\"nav nav-style-1 flex-column\"> <a href=\"#change-password?project={localStorage.prjId}\" class=\"nav-link\"> Change Password</a> <a href=\"#logout\" class=\"nav-link\"> Logout</a> </nav> </div> </div> </nav> </div>',\"\",\"\",(function(e){this.lefside=!1,this.selectedProject={name:\"Choose Project\",id:0},this.activeProjects={name:\"Choose Project\",id:0},this.currentUrlStream=\"summary\",this.isSerchingProject=!1,this.isShowingRecent=!1,this.searchResult=[],this.searchText=\"\",this.recentTemp=[],this.recentProject=[{id:12,name:\"No Recent Project\"}],this.maxRecent=10,this.projects=[],this.allProjectIds=\"\",this.on(\"mount\",()=>{if(this.project(),localStorage.maxdate)var e=localStorage.maxdate;this.lefside=null!=e&&\"\"!=e&&\"null\"!=e,this.getavailableChannel(),$(document).on(\"click\",\".stay-open .dropdown-menu\",(function(e){e.stopPropagation()}))}),this.toggleCheckSelectedProject=e=>{e.item.checked=!e.item.checked},this.submitProjects=()=>{const e=this.projects.filter(e=>e.checked).map(e=>e.id);0===e.length?APP.error(\"No Project Selected\"):window.location=`#${this.currentUrlStream}?project=${e.join(\",\")}`},this.getavailableChannel=()=>{APP.apiGet({path:\"auth/get-restriction\",data:{type:\"max_date\"},success:e=>{setTimeout(()=>{localStorage.setItem(\"maxdate\",e)},1e3),this.update()}})},this.resetSearch=()=>{!$(\".br-header-left > .dropdown > .dropdown-menu.dropdown-menu-header\").hasClass(\"show\")&&$(\"input[name=search_project]\").val(\"\"),setTimeout(()=>{$(\"input[name=search_project]\").focus()},200),this.isSearcingProject&&(this.isSearcingProject=!1,this.recentProject=this.recentTemp)},this.reArrangeRecent=(e,t)=>{let a=-1;if(e.some((function(e,r){if(t.indexOf(e.key_id)>=0&&a<0)return a=r,r})),a>0){let t=e[a];delete e[a],e.unshift(t),e=e.filter(e=>!!e),localStorage.setItem(\"projects\",JSON.stringify(e))}return e},this.norequestProject=e=>{let t=p(\"project\")?p(\"project\"):APP.getProject(),a=[];if(t){var r=p(\"project\")?p(\"project\"):APP.getProject().toString(),s=r.split(\",\").map(Number);e=this.reArrangeRecent(e,s);let t=_.filter(e,e=>e.key_item_keyword==r);var i=_.map(e,(function(e,t){return{id:e.key_id,date:moment(e.key_start_date).format(\"DD MMMM YYYY\"),name:e.key_name,color:e.key_color,hi:e.key_is_health_index,bt:e.key_is_buzzer_tracking,pr:e.key_is_prdashboard,cc:e.key_is_cc,keyItemkeyWord:e.key_item_keyword}})),o=_.map(e,(function(e){return{id:e.key_id,hi:e.key_is_health_index,bt:e.key_is_buzzer_tracking,pr:e.key_is_prdashboard,cc:e.key_is_cc}}));Streams.trigger(\"update-leftside\",o),this.selectedProject=!1;let c=[];if(t.length>0){let e=[t[0].key_name];i.forEach((t,r)=>{e.indexOf(t.name)>-1?(t.checked=!0,a.push(t),this.selectedProject||(this.selectedProject=t,breadCrumb.project=t)):t.checked=!1,c.push(t)});let r=_.orderBy(c,\"checked\",\"desc\");this.projects=r,this.update()}else i.forEach((e,t)=>{s.indexOf(e.id)>-1?(e.checked=!0,a.push(e),this.selectedProject||(this.selectedProject=e,breadCrumb.project=e)):e.checked=!1,c.push(e)}),this.projects=c,this.update();this.allProjectIds=i.map(e=>e.id).join(\",\"),this.recentProject=this.projects,s&&s.length>1||a&&a.length>1?this.activeProjects={name:\"Combined Projects\",id:0}:a[0]?this.activeProjects=a[0]:this.activeProjects={name:this.projects[0].name,id:this.projects[0].id},this.update()}},this.projectsetting=()=>{window.location=\"#project?project=\"+localStorage.prjId},this.burgerClick=e=>{e.preventDefault();let t=void 0===localStorage.sidebar?\"\":localStorage.sidebar;return localStorage.sidebar=t.length?\"\":\"collapsed-menu\",menu.trigger(\"sidebar\"),setTimeout(()=>{$(Highcharts.charts).each((function(e,t){if(t){var a=t.renderTo.clientHeight,r=t.renderTo.clientWidth;t.setSize(r,a)}}))},500),!1},this.project=()=>{APP.log(\"header : project\");null!=localStorage.getItem(\"projects\")&&\"\"!=localStorage.getItem(\"projects\")?this.norequestProject(JSON.parse(localStorage.getItem(\"projects\"))):APP.apiGet({path:\"projects/list\",data:{selected_fields:\"key_id, key_name,key_start_date, key_color , key_id, key_is_buzzer_tracking, key_is_health_index, key_is_prdashboard ,key_is_cc\"},success:e=>{localStorage.setItem(\"projects\",JSON.stringify(e)),this.norequestProject(e)}})},this.searchProject=e=>{this.searchResult=[];let t=e.target.value;_.each(this.projects,e=>{e.name.toLowerCase().indexOf(t.toLowerCase())>=0&&this.searchResult.length<=this.maxRecent&&this.searchResult.push(e)}),t.length>0?(this.isSearcingProject||(this.recentTemp=this.recentProject),this.isSearcingProject=!0,this.recentProject=this.searchResult):(this.isSearcingProject=!1,this.recentProject=this.recentTemp)},this.ontotal=0,this.showLeft=e=>{if(e.preventDefault(),this.ontotal=this.ontotal+1,1==this.ontotal)return this.onshow=\"show-left\",menuleft.trigger(\"show-left\",this.onshow),!1;menuleft.trigger(\"show-left\",\"\"),this.ontotal=0},urlStream.on(\"changeUrl\",e=>{APP.log(\"header : changeUrl trigger\"),this.currentUrlStream=e,this.update()})}))}}]);","extractedComments":[]}