{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{149:function(t,e,s){\"use strict\";s.r(e);var i=s(0);s(1).tag2(\"channel-sentiment\",'<div class=\"row\"> <div class=\"col-lg-8\" id=\"channels\"> <a class=\"btn All btn-icon mg-r-5 active mg-t-10 mg-r-10 height120 widthchannels \"> <img alt=\"\" src=\"/assets/images/components/icons/globe.png\" width=\"40\" height=\"40\" class=\"center displayinitial mg-t-10\"> <p class=\"tx-10 mg-t-10\">ALL</p> <p class=\"tx-14 mg-t-m-10\" if=\"{!isLoading}\">{total ? total.formatMoney(0) : 0}</p> <p if=\"{isLoading}\" class=\"mg-t-m-10\"><img alt=\"\" src=\"/assets/images/svg/loading.svg\" width=\"20\" height: 12></img> </p> </a> <a class=\"btn {name} btn-icon mg-r-5 active mg-t-10 mg-r-10 height120 widthchannels\" each=\"{channels}\"> <img alt=\"\" riot-src=\"{icon}\" width=\"40\" height=\"40\" class=\"center displayinitial mg-t-10\"> <p class=\"tx-10 mg-t-10\"> {name}</p> <p class=\"tx-14 mg-t-m-10 \" if=\"{!isLoading}\">{count ? count.formatMoney(0) : 0}</p> <p if=\"{isLoading}\" class=\"mg-t-m-10\"><img alt=\"\" src=\"/assets/images/svg/loading.svg\" width=\"20\" height: 12></img> </p> </a> </div> <div class=\"col-md-4 col-sm-6\" id=\"sentiment\"> <a each=\"{sentiment}\" class=\"btn {name} btn-icon mg-r-5 active mg-t-10 {name}mg-r height120 mg-r-10 widthsentiment\"> <img alt=\"\" riot-src=\"{icon}\" width=\"45\" height=\"45\" class=\"center displayinitial mg-t-10\"> <p class=\"tx-10 mg-t-7\">{name}</p> <p class=\"tx-14 mg-t-m-10\" if=\"{!isLoading}\">{this.sValue[id] ? this.sValue[id].formatMoney(0) : 0}</p> <p class=\"mg-t-m-10\" if=\"{isLoading}\"><img alt=\"\" src=\"/assets/images/svg/loading.svg\" width=\"20\" height: 12></img> </p> </a> </div> </div>',\"\",\"\",(function(t){function e(){var t=$(\"#channels\").width(),e=(t-80)/8;if(t<673)e=64;for(var s=document.getElementsByClassName(\"widthchannels\"),i=0;i<s.length;i++)s[i].style.width=e+\"px\";var a=($(\"#sentiment\").width()-30)/3,n=document.getElementsByClassName(\"widthsentiment\");for(i=0;i<n.length;i++)n[i].style.width=a+\"px\"}this.isLoading=!0,this.idTO=null,this.Selected=!0,this.sValue=[],this.sentiment=[{id:\"neutral\",total:null,name:\"Neutral\",selected:!0,color:\"count-txt color-orange-500\",icon:\" fa fa-question-circle\",icon:\"../assets/images/components/icons/help-grey.png\"},{id:\"positive\",total:null,name:\"Positive\",selected:!0,color:\"count-txt color-green-500\",icon:\"fa fa-thumbs-up\",icon:\"../assets/images/components/icons/thumbs-up-grey.png\"},{id:\"negative\",total:null,name:\"Negative\",selected:!0,color:\"count-txt color-red-500\",icon:\"fa fa-thumbs-down\",icon:\"../assets/images/components/icons/thumbs-down-grey.png\"}],this.total=0,this.allSelected=!0,this.idTO=null,this.channels=[{id:1,name:\"Facebook\",idname:\"Facebook\",selected:!1,checked:!1,icon:\"../assets/images/components/icons/facebook-grey3.png\",color:\"#425f9c\",count:0,act:\"fb\"},{id:2,name:\"Twitter\",idname:\"Twitter\",selected:!1,checked:!1,icon:\"../assets/images/components/icons/twitter-grey.png\",color:\"#00acee\",count:0,act:\"twitter\"},{id:4,name:\"Blogs\",idname:\"Blogs\",selected:!1,checked:!1,icon:\"../assets/images/components/icons/blogs-grey.png\",color:\"#fe6800\",count:0,act:\"blog\"},{id:5,name:\"Forum\",idname:\"Forum\",selected:!1,checked:!1,icon:\"../assets/images/components/icons/chat-grey.png\",color:\"#eeb64f\",count:0,act:\"forum\"},{id:3,name:\"News\",idname:\"News\",selected:!1,checked:!1,icon:\"../assets/images/components/icons/news-grey.png\",color:\"#39a6dd\",count:0,act:\"news\"},{id:6,name:\"Video\",idname:\"vidio\",selected:!1,checked:!1,icon:\"../assets/images/components/icons/youtube-grey.png\",color:\"#ff0400\",count:0,act:\"video\"},{id:7,name:\"Instagram\",idname:\"image\",selected:!1,checked:!1,icon:\"../assets/images/components/icons/instagram-grey.png\",color:\"#9b2db6\",count:0,act:\"photo\"}],this.on(\"mount\",()=>{this.parent.search.section=null,this.getavailableChannel(),this.update({total:Object(i.sumBy)(this.channels,\"count\")}),this.validateChannel()}),this.render=()=>{APP.log(\"sentiment : render\"),this.update_data(),this.getavailableChannel()},this.update_data=()=>{APP.log(\"sentiment : update data\"),this.isLoading=!0,this.update({isLoading:!0});let t=Object(i.clone)(this.parent.search);t.project=p(\"project\")?p(\"project\"):APP.getProject(),p(\"section\")?t.section=p(\"section\"):t.section=null;APP.apiGet({path:\"mentions/sentiment-count\",data:t,success:function(t){this.isLoading=!1,this.sValue=t.items,this.update()}.bind(this)}).readyState&&(this.sValue={positive:0,negative:0,neutral:0},this.update())},this.getavailableChannel=()=>{APP.apiGet({path:\"auth/get-restriction\",data:{type:\"channels\"},success:function(t){localStorage.getItem(\"channels\")?localStorage.channels=t:localStorage.setItem(\"channels\",t),this.maxkeyword=t,this.update()}.bind(this)})},this.validateChannel=()=>{if(localStorage.menu)var t=localStorage.channels;else if(JSON.parse(localStorage.getItem(\"package\")))t=JSON.parse(localStorage.getItem(\"package\")).channels;if(t){var e=[],s=Object(i.each)(t,t=>{const s=Object(i.findIndex)(this.channels,[\"id\",parseInt(t)]);s>-1?(this.channels[s].checked=!0,this.channels[s].selected=!0):this.channels.length<7&&(this.channels[s].checked=!1,this.channels[s].selected=!1),e.push(this.channels[s])}),a=Object(i.filter)(s,(function(t){return t.selected}));const n=Object(i.map)(a,t=>t.id);this.parent.search.service_category=n.join(\",\"),this.parent.search.group_service=!1}else{e=[];Object(i.each)(this.channels,t=>{t.checked=!0,t.selected=!0,e.push(t)})}},this.getChannelSelected=()=>Object(i.filter)(this.channels,t=>t.selected),this.updateCount=t=>{e();let s=!1;this.parent.refs.channel.sentiment.map(t=>t.selected).indexOf(!0)<0&&(s=!0);for(let e in this.channels){const i=this.channels[e].id;this.channels[e].name;this.channels[e].count=0;for(let a in t)a==i&&(this.channels[e].count=s?0:t[a])}const a=Object(i.filter)(this.channels,(function(t){return t.selected}));this.total=Object(i.sumBy)(a,\"count\"),maxStreams.trigger(\"maxstreams\",this.total),s&&(this.total=0),this.isLoading=!1,this.update()},window.onload=function(){e()},window.onresize=function(){e()}}))},150:function(t,e,s){\"use strict\";s.r(e);var i=s(0);s(1).tag2(\"chart-daily-mention\",'<div class=\"widget-2 mg-t-20\"> <div class=\"card shadowbase overflow-hidden\"> <div class=\"card-header pd-20 bg-transparent bb-1\"> <h6 class=\"card-title tx-20 tx-uppercase tx-12 mg-b-0\"> <img src=\"assets/images/components/icons/calender-teal.png\" width=\"30\" height=\"30\" class=\"mg-r-5\"> AVERAGE DAILY MENTION </h6> </div> <div class=\"ripple-loader\" if=\"{isLoading}\"></div> <div class=\"card-body pd-20 bd-color-gray-lighter height600 textcenter mg-t-0\" if=\"{notdata}\"> No data found, please input another dates </div> <div class=\"card-body pd-10 bd-color-gray-lighter height600\" id=\"chart-daily-mention\" if=\"{!notdata}\"> </div> </div> </div>',\"\",\"\",(function(t){this.isLoading=!0,this.notdata=!1,this.xhr=null,this.tombolrefres=!1,this.fontcolor=!1,this.createChart=t=>{const e=t.arrayData||[];if(e.length<=0)return!1;Highcharts.chart(\"chart-daily-mention\",{chart:{type:\"bubble\",zoomType:\"xy\",marginBottom:40,marginRight:10,plotHeight:150,chartHeight:150},colors:[\"#1D91B7\",\"#55ADC9\",\"#7DC4DB\",\"#AEDCEB\"],title:{text:\"\"},title:{text:\"\"},xAxis:{categories:[\"sun\",\"mon\",\"tue\",\"wed\",\"thu\",\"fri\",\"sat\"],min:0,max:6,title:{text:\"\"},labels:{style:{fontSize:\"15px\"}}},plotOptions:{series:{dataLabels:{enabled:!0,useHTML:!0,formatter:function(){return\"<span style='z-index:0;position:relative;font-size: 13px;'> \"+numeral(this.point.z).format(\"0a\")+\"</span>\"}}},bubble:{minSize:20,maxSize:60}},tooltip:{formatter:function(){return\"<strong>\"+this.total+\"</strong> mentions\"}},yAxis:{categories:[\"00 - 05\",\"06 - 11\",\"12 - 17\",\"18 - 23\"],min:0,max:3,title:{text:\"\"},labels:{style:{fontSize:\"15px\"}}},exporting:{enabled:!1},legend:{enabled:!1},credits:{enabled:!1},series:[{color:\"#1D91B7\",data:e}]})},this.render=()=>{this.xhr=APP.log(\"chart Average daily  : render\"),\"analysis/my-stream..\"==APP.currentHash?(this.fontcolor=!1,this.update({tombolrefres:!0})):this.fontcolor=!0;let t=Object(i.clone)(this.parent.search);t.type=null,this.update({isLoading:!0}),this.xhraverage=APP.apiGet({path:\"mentions/average-daily-mentions\",data:t,success:function(t){t=t.items;let e=[],s={sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6};for(const i in t){let a=t[i];for(const t in a)e.push({x:s[t],y:parseInt(i-1),total:a[t],z:a[t]})}0===Object(i.filter)(e,(function(t){return 0!=t.total})).length?this.notdata=!0:this.update({notdata:!1}),this.createChart({arrayData:e}),this.update({isLoading:!1})}.bind(this)}),this.xhraverage.readyState&&this.update({isLoading:!1,notdata:!0})},this.reload=()=>{this.Loading=!0,this.render()},this.on(\"mount\",()=>{this.xhr=null,\"analysis/my-stream..\"==APP.currentHash&&(this.tombolrefres=!0),this.update()}),this.on(\"unmount\",()=>{this.xhr&&this.xhr.abort()})}))},151:function(t,e,s){\"use strict\";s.r(e);var i=s(0),a=s(7),n=s.n(a),o=s(3);s(1).tag2(\"charconversationgroup\",'<div class=\"widget-2 mg-t-20\"> <div class=\"card shadowbase overflow-hidden\"> <div class=\"card-header pd-20 bg-transparent bb-1\"> <h6 class=\"card-title tx-20 tx-uppercase tx-12 mg-b-0\"> <img src=\"assets/images/components/icons/line-chart-teal.png\" width=\"30\" height=\"30\" class=\"mg-r-5\"> MENTION CONVERSATION (GROUP) </h6> <div class=\"btn-group\" role=\"group\" aria-label=\"Basic example\"> <a onclick=\"{selectTime}\" class=\"btn {active:selected} cursor-pointer\" each=\"{times}\">{name}</a> </div> </div> <div class=\"ripple-loader\" if=\"{isLoading}\"></div> <div class=\"card-body pd-20 bd-color-gray-lighter height353 textcenter mg-t-0\" if=\"{nodata}\"> No data found, please input another dates </div> <div class=\"card-body pd-10 bd-color-gray-lighter height353\" id=\"chartstreamconversation\" if=\"{!nodata}\"> </div> </div> </div>',\"\",\"\",(function(t){this.type=\"daily\",this.chart=null,this.isLoading=!0,this.tombolrefres=!1,this.times=[{id:\"hourly\",name:\"Hourly\",selected:!1},{id:\"daily\",name:\"Daily\",selected:!0},{id:\"monthly\",name:\"Monthly\",selected:!1}],this.sentiment=[{color:\"#81c684\",id:\"negative,positive,neutral\",name:\"All\",no:1}],this.ajaxChannels=[],this.isExist=!0,this.selectTime=t=>{APP.log(\"chart streams : selecttme\"),t.preventDefault(),t.item.selected=!0;const e=t.item.id;this.times=Object(i.map)(this.times,t=>(t.id!=e&&(t.selected=!1),t)),this.update(),this.render()},this.render=t=>{setTimeout(()=>{if(\"analysis/my-stream..\"==APP.currentHash||\"stream..\"==APP.currentHash){this.update({tombolrefres:!0})}else;this.nodata=!0;let e=Object(i.clone)(this.parent.search);e.group_service=\"false\";const s=Object(i.find)(this.times,{selected:!0}).id;e.type=s,\"domain/infographic..\"==APP.currentHash&&(e.project=APP.currentProject),this.update({isLoading:!0}),this.chart&&this.chart.spacing&&this.chart.destroy();var a=[];Object(o.a)(this.sentiment,(t,s)=>{if(!this.isExist)return!1;e.section=t.id;APP.apiGet({path:\"mentions\",data:e,success:function(e){e=e.items;let n=[];n=(e=Object(i.sortBy)(e,t=>moment(t.date).toDate())).map(t=>[moment(t.date).utc().valueOf(),t.count]),n.length>0&&(this.nodata=!1),a.push({id:\"response\",shadow:!1,name:t.name,lineWidth:4,color:t.color,type:\"areaspline\",fillColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,t.color],[1,Highcharts.Color(t.color).setOpacity(0).get(\"rgba\")]]},marker:{radius:3},data:n}),s()}.bind(this)},(t,e,s)=>{}),this.ajaxChannels.push([])},()=>{if(!this.nodata){const t=\"chartstreamconversation\";this.update({nodata:this.nodata});for(var e=this.chart=n()(t,s,\"#333\"),o=0;o<=a.length-1;o++)e.addSeries(a[o]);const c=e&&e.series&&e.series[0]&&e.series[0].data&&e.series[0].data?e.series[0].data:[],r=Object(i.maxBy)(c,t=>t&&t.y?t.y:{}),d=r&&r.y?parseInt(r.y):0,h=Object(i.findIndex)(c,t=>t.y===d);e.tooltip.refresh(c[h])}this.update({isLoading:!1}),Object(i.isFunction)(t)&&t()})},500)},this.reload=()=>{this.render()},this.on(\"mount\",()=>{\"analysis/my-stream..\"!=APP.currentHash&&\"stream..\"!=APP.currentHash||this.update({tombolrefres:!0}),this.ajaxChannels=[],this.isExist=!0}),this.on(\"unmount\",()=>{this.isExist=!1,Object(i.each)(this.ajaxChannels,(function(t){})),APP.log(\"chart streams : unmount\"),this.chart&&this.chart.spacing&&(this.chart.destroy(),APP.log(\"chart streams : destroy chart\"))})}))},152:function(t,e,s){\"use strict\";s.r(e);var i=s(0),a=s(7),n=s.n(a);s(1).tag2(\"chartconfersation\",'<div class=\"widget-2 mg-t-20\"> <div class=\"card shadowbase overflow-hidden\"> <div class=\"card-header pd-20 bg-transparent bb-1\"> <h6 class=\"card-title tx-20 tx-uppercase tx-12 mg-b-0\"> <img src=\"assets/images/components/icons/line-chart-teal.png\" width=\"30\" height=\"30\" class=\"mg-r-5\"> MENTION CONVERSATION </h6> <div class=\"btn-group\" role=\"group\" aria-label=\"Basic example\"> <a onclick=\"{selectTime}\" class=\"btn {active:selected} cursor-pointer\" each=\"{times}\">{name}</a> </div> </div> <div class=\"ripple-loader\" if=\"{isLoading}\"></div> <div class=\"card-body pd-20 bd-color-gray-lighter height353 textcenter mg-t-0\" if=\"{nodata}\"> No data found, please input another dates </div> <div class=\"card-body pd-10 bd-color-gray-lighter height353\" id=\"chartstream_Conversation\" if=\"{!nodata}\"> </div> </div> </div>',\"\",\"\",(function(t){this.nuull=!0,this.notdata=!1,this.type=\"daily\",this.composition=null,this.isExist=!0,this.isLoading=!1,this.xhr=null,this.times=[{id:\"hourly\",name:\"Hourly\",selected:!1},{id:\"daily\",name:\"Daily\",selected:!0},{id:\"monthly\",name:\"Monthly\",selected:!1}],this.selectTime=t=>{t.preventDefault(),t.item.selected=!0;const e=t.item.id;this.times=Object(i.map)(this.times,t=>(t.id!=e&&(t.selected=!1),t)),this.update(),this.render()},this.on(\"mount\",()=>{}),this.dataProjects=[],this.render=()=>{setTimeout(()=>{this.notdata=!1,APP.log(\"chart-positive: render\"),this.nuull=!0;var t=this.parent.projectList||[];let e=Object(i.clone)(this.parent.search);const s=APP.currentProject,a=document.projectCompetition?document.projectCompetition:\"\",o=decodeURIComponent(`${s},${a}`),c=\"string\"==typeof o?o.split(\",\").map(t=>t.trim()).filter(t=>\"\"!==t).toString():\"\";const r=c.split(\",\").map(Number);Object(i.map)(t,(function(t){return{id:t.key_id,date:moment(t.key_start_date).format(\"DD MMMM YYYY\"),name:t.key_name,color:t.key_color}})).forEach(t=>{r.indexOf(t.id)>-1?t.checked=!0:t.checked=!1,this.dataProjects.push(t)});var d=Object(i.filter)(this.dataProjects,(function(t){return t.checked}));e.project=c,e.section=\"\";const h=Object(i.find)(this.times,{selected:!0}).id;e.type=h;var l=d.map((function(t){return{name:t.name,color:t.color}})),m=Object(i.reduce)(l,(function(t,e){return t[e.name]=e.color,t}),{});this.update({isLoading:!0});const g=this.composition=n()(\"chartstream_Conversation\",h,\"#333\");APP.apiGet({path:\"stream/brand/mention\",data:e,success:function(t){0===(t=t.items).length?this.update({notdata:!0}):this.update({notdata:!1});var e=Object(i.groupBy)(t,(function(t){return t.brand_name}));e=Object.keys(e).sort().reduce((t,s)=>(t[s]=e[s],t),{});for(let t in e){var s=Object(i.sortBy)(e[t],t=>moment(t.date).toDate());s=s.map((function(t){return[moment(t.date).utc().valueOf(),t.count,t.brand_name]})),g.addSeries({id:\"response\",shadow:!1,name:t,lineWidth:4,color:m&&m[t]?m[t]:\"#d0d0d0\",type:\"areaspline\",fillColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,m&&m[t]?m[t]:\"#d0d0d0\"],[1,Highcharts.Color(m&&m[t]?m[t]:\"#d0d0d0\").setOpacity(0).get(\"rgba\")]]},marker:{radius:3},data:s});const a=g&&g.series&&g.series[0]&&g.series[0].data&&g.series[0].data?g.series[0].data:[],n=Object(i.maxBy)(a,t=>t&&t.y?t.y:{}),o=n&&n.y?parseInt(n.y):0,c=Object(i.findIndex)(a,t=>t.y===o);g.tooltip.refresh(a[c])}this.update({isLoading:!1})}.bind(this)}).readyState&&this.update({isLoading:!1})},1e3)},this.reload=()=>{this.Loading=!0,this.render()},this.on(\"mount\",()=>{this.xhr=null}),this.on(\"unmount\",()=>{this.isExist=!1,this.xhr&&this.xhr.abort(),this.chart&&this.chart.destroy(),this.chartpositive&&this.chartpositive.destroy()})}))}}]);","extractedComments":[]}