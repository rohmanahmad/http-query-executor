{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{161:function(t,e,i){\"use strict\";i.r(e);var a=i(29),s=i.n(a);i(0).tag2(\"chartcompetition\",'<div class=\"row\"> <div class=\"col-md-12 col-12 mb-4 text-center\"> <b class=\"a141 f24\">STREAM COMPETITION</b> <br> <span class=\"f14 a141\">Competition by brand</span> </div> <div class=\"col-md-12\"> <div class=\"row\"> <div class=\"ripple-loader\" if=\"{isLoading}\"></div> <div class=\"col-md-12 col-12\"> <b class=\"f7c f18\">HOURLY</b> </div> <div class=\"col-md-12 col-12 p-20\"> <div id=\"chartstream_multiproject\" class=\"height-chart-infographic\"></div> </div> </div> </div> </div>',\"\",\"\",(function(t){this.nuull=!0,this.notdata=!1,this.type=\"daily\",this.chartspline=null,this.isExist=!0,this.isLoading=!0,this.chart=null,this.xhr=null,this.times=[{id:\"hourly\",name:\"Hourly\",selected:!1},{id:\"daily\",name:\"Daily\",selected:!0},{id:\"monthly\",name:\"Monthly\",selected:!1}],this.selectTime=t=>{APP.log(\"chart-positive: selectTime\"),t.preventDefault(),t.item.selected=!0;const e=t.item.id;this.times=_.map(this.times,t=>(t.id!=e&&(t.selected=!1),t)),this.update(),this.render()},this.dataProjects=[],this.render=t=>{setTimeout(()=>{this.notdata=!1,APP.log(\"chart-positive: render\"),this.nuull=!0;var e=JSON.parse(localStorage.getItem(\"projects\"))?JSON.parse(localStorage.getItem(\"projects\")):this.parent.listproject;e=_.filter(e,t=>t);const i=this.parent.projectAll.split(\",\").map(Number);_.map(e,(function(t){return{id:t.key_id,date:moment(t.key_start_date).format(\"DD MMMM YYYY\"),name:t.key_name,color:t.key_color}})).forEach(t=>{i.indexOf(t.id)>-1?t.checked=!0:t.checked=!1,this.dataProjects.push(t)});var a=_.filter(this.dataProjects,(function(t){return t.checked}));const o=_.find(this.times,{selected:!0}).id;let c=_.clone(this.parent.search);c.project=this.parent.projectAll,c.type=o;var n=a.map((function(t){return{name:t.name,color:t.color}})),r=_.reduce(n,(function(t,e){return t[e.name]=e.color,t}),{});this.update({isLoading:!0});const l=this.chartspline=s()(\"chartstream_multiproject\",o);this.xhr=APP.apiGet({path:\"stream/brand/mention\",data:c,success:e=>{let i=this.parent.component;i.chartcompetitor=!0,6===_.filter(i,t=>t).length&&this.parent.updateid(),0===(e=e.items).length?this.notdata=!0:this.update({notdata:!1});var a=_.groupBy(e,(function(t){return t.brand_name}));a=Object.keys(a).sort().reduce((t,e)=>(t[e]=a[e],t),{});var s=[];let o=1;for(let t in a){var c=_.sortBy(a[t],t=>moment(t.date).toDate());if(c=c.map((function(t){return[moment(t.date).utc().valueOf(),t.count,t.brand_name]})),!this.isExist)return;s.push({id:\"response\",shadow:!1,name:t,type:\"spline\",totalval:_.sumBy(c,1),fillColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,r[t]],[1,Highcharts.Color(r[t]).setOpacity(0).get(\"rgba\")]]},lineWidth:1,color:r[t],marker:{radius:3},dataLabels:{enabled:!0,color:r[t],overflow:\"justify\",allowOverlap:!0,backgroundColor:\"rgba(252, 255, 197, 0.7)\",borderWidth:1,borderRadius:5,borderColor:r[t],padding:5,align:o%2==0?\"left\":\"right\"},data:c}),o++}s=_.orderBy(s,[\"totalval\"],[\"desc\"]);for(var n=0;n<=s.length-1;n++)l.addSeries(s[n]);this.update({isLoading:!1}),_.isFunction(t)&&t()}})},2e3)},this.on(\"mount\",()=>{this.xhr=null}),this.on(\"unmount\",()=>{this.isExist=!1,this.xhr,this.chart&&this.chart.destroy(),this.chartspline&&this.chartspline.destroy()})}))},162:function(t,e,i){i(0).tag2(\"shareofdaily\",'<div class=\"row mt-5\"> <div class=\"col-md-10 offset-md-1 col-12\"> <div class=\"row\"> <div class=\"ripple-loader\" if=\"{isLoading}\"></div> <div class=\"col-md-12 col-12 mb-4 text-center\"> <b class=\"f24 a141\">SHARE OF VOICE (DAILY)</b> <br> <span class=\"f14 a141\">Comparison among source brand </span> </div> <div class=\"col-md-12\"> <div id=\"var-donut\"></div> </div> </div> </div> </div>',\"\",\"\",(function(t){this.isLoading=!0,window.innerWidth>500?this.fontsizevalue=\"16px;\":this.fontsizevalue=\"10px;\",this.render=()=>{let t=_.clone(this.parent.search);t.since=t.until,t.until=t.until,t.is_total=null,this.update({isLoading:!0}),this.xhr=APP.apiGet({path:\"stream/brand/shareofvoice\",data:t,success:t=>{let e=this.parent.component;if(e.shareofdaily=!0,6===_.filter(e,t=>t).length&&this.parent.updateid(),0===(t=t).total)return this.notdata=!0,this.isLoading=!1,void this.update();this.update({notdata:!1});let i={0:235.6,1:214.5,2:201.8,3:137.5,4:124.6,5:118.7,6:92.9,7:85};var a=_.orderBy(t.items,[\"count\"],[\"desc\"]);a=a.map((function(e,a){var s=e.count/t.total*100;return a>7&&(a=7),{name:e.brand,y:parseFloat(s.toFixed(1)),z:i[a],totalvalue:e.count.formatMoney(0),color:e.color}})),this.update({isLoading:!1}),Highcharts.chart(\"var-donut\",{chart:{type:\"variablepie\"},title:{text:\"Countries compared by population density and total area.\"},tooltip:{headerFormat:\"\",pointFormat:'<span style=\"color:{point.color}\">●</span> <b> {point.name}</b><br/>Mentions: <b>{point.totalvalue}</b><br/><br> persentase : {point.percentage:.1f}%'},plotOptions:{variablepie:{allowPointSelect:!0,cursor:\"pointer\",dataLabels:{enabled:!0,format:\"<b>{point.name}</b> <br> {point.percentage:.1f}%\",style:{fontSize:this.fontsizevalue}}}},series:[{minPointSize:10,innerSize:\"20%\",zMin:0,name:\"countries\",data:a}]})}})}}))},163:function(t,e,i){i(0).tag2(\"compositionbybrand\",'<div class=\"row mt-5\"> <div class=\"col-md-12 col-12\"> <div class=\"row\"> <div class=\"ripple-loader\" if=\"{isLoading}\"></div> <div class=\"col-md-12 col-12 mb-4 text-center\"> <b class=\"f24 a141\">SENTIMENT COMPETITION (DAILY)</b> <br> <span class=\"f14 a141\">Sentiment comparison among source brand mentions</span> </div> <div class=\"col-md-12\"> <table class=\"table mg-b-0 tx-30-r10 \"> <tr> <th></th> <th class=\" tx-black tx-18\" style=\"color: #7ee87c; \">POSITIVE </th> <th class=\" tx-black tx-18\" style=\"color: #db6a87; \">NEGATIVE</th> <th class=\" tx-black tx-18\" style=\"color: #f3973e; \">NEUTRAL</th> <th class=\" tx-black tx-18\" style=\"color: #7dcbe9; \">POTENTIAL REACH</th> </tr> <tbody> <tr class=\"tr td th fontsize20\" each=\"{o,i in prjList}\"> <td class=\" tx-black tx-18\"><b>{o}</b></td> <td class=\" tx-black tx-18\" style=\"color: #7ee87c; \"> <i class=\"fa fa-thumbs-up\"></i> <b>{cachepositive[i] ? cachepositive[i].formatMoney(0).replace(\\',\\', \\'.\\') : cachepositive[i]}</b></td> <td class=\" tx-black tx-18\" style=\"color: #db6a87; \"> <i class=\"fa fa-thumbs-down\"></i> <b>{cachenegative[i] ? cachenegative[i].formatMoney(0).replace(\\',\\', \\'.\\') : cachenegative[i]}</b></td> <td class=\" tx-black tx-18\" style=\"color: #f3973e; \"> <i class=\"fa fa-question-circle\"></i> <b>{cacheneutral[i] ? cacheneutral[i].formatMoney(0).replace(\\',\\', \\'.\\') : cacheneutral[i]}</b></td> <td class=\" tx-black tx-18\" style=\"color: #7dcbe9; \"> <i class=\"fa fa-users\"></i> <b>{potentialreach[i] ? potentialreach[i].formatMoney(0).replace(\\',\\', \\'.\\') : potentialreach[i]}</b></td> </tr> <tr class=\"tr td th\" if=\"{this.total == 0}\"> <td colspan=\"2\" class=\"txtcenter\">No data found, please input another dates</td> </tr> </tbody> </table> </div> </div> </div> </div>',\"\",\"\",(function(t){this.cachesentimentmention={},this.cachepositive={},this.cachenegative={},this.cacheneutral={},this.chacetotal={},this.chacereachtotal={},this.potentialreach={},this.render=()=>{let t=_.clone(this.parent.search);t.since=t.until,t.until=t.until,APP.apiGet({path:\"projects/list?selected_fields=key_id,key_name\",success:t=>{this.projectList=t}}).done(()=>{this.createObject(t,this.projectList)})},this.createObject=(t,e)=>{this.competitionProjects=this.parent.projectAll.split(\",\"),this.prjList={};for(let t in this.competitionProjects){const i=this.competitionProjects[t],a=_.find(e,{key_id:parseInt(i)});a&&a.key_name&&(this.prjList[i]=a.key_name)}var i=this.competitionProjects;this.datavalue(t,i),this.potentialreach(t,i)},this.datavalue=(t,e)=>{async.each(e,(e,i)=>{t.project=e,APP.apiGet({path:\"mentions/sentiment-count\",data:t,success:t=>{let a=this.parent.competition;a.compositionbranddaily=!0,6===_.filter(a,t=>t).length&&this.parent.updateid();const s=(t=t.items).negative?parseInt(t.negative):0,o=t.positive?parseInt(t.positive):0,c=t.neutral?parseInt(t.neutral):0;this.chacetotal[e]=o+s+c,this.cachepositive[e]=o,this.cachenegative[e]=s,this.cacheneutral[e]=c,this.sValue=t,this.update(),i()}}),this.update({isLoading:!1})})},this.potentialreach=(t,e)=>{t.compare=!0,async.each(e,(e,i)=>{t.project=e;var a=\"\",s=0;for(let e in t)t[e]&&\"\"!=t[e]&&(a+=s>0?`&${e}=${encodeURIComponent(t[e])}`:`?${e}=${encodeURIComponent(t[e])}`,s++);APP.apiGet({path:\"summary/potential-reach\"+a,success:t=>{t=t.items,this.potentialreach[e]=t.potential_reach?t.potential_reach:0,this.update(),i()}}),this.update({isLoading:!1})})}}))},164:function(t,e,i){i(0).tag2(\"shareofvoicelast\",'<div class=\"row mt-5\"> <div class=\"col-md-10 offset-md-1 col-12\"> <div class=\"row\"> <div class=\"ripple-loader\" if=\"{isLoading}\"></div> <div class=\"col-md-12 col-12 mb-4 text-center\"> <b class=\"f24 a141\">SHARE OF VOICE (THE LAST {totadate} DAYS )</b> <br> <span class=\"f14 a141\">Comparison among source brand </span> </div> <div class=\"col-md-12\"> <div id=\"var-donut-last\"></div> </div> </div> </div> </div>',\"\",\"\",(function(t){this.totadate=0,this.isLoading=!0,window.innerWidth>500?this.fontsizevalue=\"16px;\":this.fontsizevalue=\"10px;\",this.render=()=>{let t=_.clone(this.parent.search),e=new Date(t.since),i=new Date(t.until);this.totadate=(i-e)/864e5+1,t.is_total=null,this.update({isLoading:!0}),this.xhr=APP.apiGet({path:\"stream/brand/shareofvoice\",data:t,success:t=>{let e=this.parent.component;if(e.shareofvoicelast=!0,6===_.filter(e,t=>t).length&&this.parent.updateid(),0===(t=t).total)return this.notdata=!0,this.isLoading=!1,void this.update();this.update({notdata:!1});let i={0:235.6,1:214.5,2:201.8,3:137.5,4:124.6,5:118.7,6:92.9,7:85};var a=_.orderBy(t.items,[\"count\"],[\"desc\"]);a=a.map((function(e,a){var s=e.count/t.total*100;return a>7&&(a=7),{name:e.brand,y:parseFloat(s.toFixed(1)),z:i[a],totalvalue:e.count.formatMoney(0),color:e.color}})),this.update({isLoading:!1}),Highcharts.chart(\"var-donut-last\",{chart:{type:\"variablepie\"},title:{text:\"Countries compared by population density and total area.\"},tooltip:{headerFormat:\"\",pointFormat:'<span style=\"color:{point.color}\">●</span> <b> {point.name}</b><br/>Mentions: <b>{point.totalvalue}</b><br/><br> persentase : {point.percentage:.1f}%'},plotOptions:{variablepie:{allowPointSelect:!0,cursor:\"pointer\",dataLabels:{enabled:!0,format:\"<b>{point.name}</b> <br> {point.percentage:.1f}%\",style:{fontSize:this.fontsizevalue}}}},series:[{minPointSize:10,innerSize:\"20%\",zMin:0,name:\"countries\",data:a}]})}})}}))},165:function(t,e,i){i(0).tag2(\"compositionbrandlast\",'<div class=\"row mt-5\"> <div class=\"col-md-12 col-12\"> <div class=\"row\"> <div class=\"ripple-loader\" if=\"{isLoading}\"></div> <div class=\"col-md-12 col-12 mb-4 text-center\"> <b class=\"f24 a141\">SENTIMENT COMPETITION (THE LAST {totadate} DAYS )</b> <br> <span class=\"f14 a141\">Sentiment comparison among source brand mentions</span> </div> <div class=\"col-md-12\"> <table class=\"table mg-b-0 tx-30-r10 \"> <tr> <th></th> <th class=\" tx-black tx-18\" style=\"color: #7ee87c; \">POSITIVE </th> <th class=\" tx-black tx-18\" style=\"color: #db6a87; \">NEGATIVE</th> <th class=\" tx-black tx-18\" style=\"color: #f3973e; \">NEUTRAL</th> <th class=\" tx-black tx-18\" style=\"color: #7dcbe9; \">POTENTIAL REACH</th> </tr> <tbody> <tr class=\"tr td th fontsize20\" each=\"{o,i in prjList}\"> <td class=\" tx-black tx-18\"><b>{o}</b></td> <td class=\" tx-black tx-18\" style=\"color: #7ee87c; \"> <i class=\"fa fa-thumbs-up\"></i> <b>{cachepositive[i] ? cachepositive[i].formatMoney(0).replace(\\',\\', \\'.\\') : cachepositive[i]}</b></td> <td class=\" tx-black tx-18\" style=\"color: #db6a87; \"> <i class=\"fa fa-thumbs-down\"></i> <b>{cachenegative[i] ? cachenegative[i].formatMoney(0).replace(\\',\\', \\'.\\') : cachenegative[i]}</b></td> <td class=\" tx-black tx-18\" style=\"color: #f3973e; \"> <i class=\"fa fa-question-circle\"></i> <b>{cacheneutral[i] ? cacheneutral[i].formatMoney(0).replace(\\',\\', \\'.\\') : cacheneutral[i]}</b></td> <td class=\" tx-black tx-18\" style=\"color: #7dcbe9; \"> <i class=\"fa fa-users\"></i> <b>{potentialreach[i] ? potentialreach[i].formatMoney(0).replace(\\',\\', \\'.\\') : potentialreach[i]}</b></td> </tr> <tr class=\"tr td th fontsize20\" if=\"{this.parent.competition}\"> <td class=\" tx-black tx-18\">SOV ({namevaluId})</td> <td class=\" tx-black tx-18\" style=\"color: #7ee87c; \"> <i class=\"fa fa-thumbs-up\"></i> <b>{totalpositives ? totalpositives.toLocaleString(\\'id\\', {minimumFractionDigits: 0, maximumFractionDigits: 2}) : 0} %</b></td> <td class=\" tx-black tx-18\" style=\"color: #db6a87; \"> <i class=\"fa fa-thumbs-down\"></i> <b>{totalnegatives ?  totalnegatives.toLocaleString(\\'id\\', {minimumFractionDigits: 0, maximumFractionDigits: 2}) : 0} %</b></td> <td class=\" tx-black tx-18\" style=\"color: #f3973e; \"> <i class=\"fa fa-question-circle\"></i> <b>{totalneutrals ?  totalneutrals.toLocaleString(\\'id\\', {minimumFractionDigits: 0, maximumFractionDigits: 2}) : 0} %</b></td> <td class=\" tx-black tx-18\" style=\"color: #7dcbe9; \"> <i class=\"fa fa-users\"></i> <b>{totalreachs ? totalreachs.toLocaleString(\\'id\\', {minimumFractionDigits: 0, maximumFractionDigits: 2}) : 0} %</b></td> </tr> <tr class=\"tr td th\" if=\"{this.total == 0}\"> <td colspan=\"2\" class=\"txtcenter\">No data found, please input another dates</td> </tr> </tbody> </table> </div> </div> </div> </div>',\"\",\"\",(function(t){this.cachesentimentmention={},this.totadate=0,this.cachepositive={},this.cachenegative={},this.cacheneutral={},this.chacetotal={},this.chacereachtotal={},this.potentialreach={},this.totalpositive=[],this.totalnegative=[],this.totalneutral=[],this.totalreach=[],this.render=()=>{let t=_.clone(this.parent.search),e=new Date(t.since),i=new Date(t.until);this.totadate=(i-e)/864e5+1,APP.apiGet({path:\"projects/list?selected_fields=key_id,key_name\",success:t=>{this.projectList=t}}).done(()=>{this.createObject(t,this.projectList)}),this.update()},this.createObject=(t,e)=>{this.competitionProjects=this.parent.projectAll.split(\",\"),this.prjList={};for(let t in this.competitionProjects){const i=this.competitionProjects[t],a=_.find(e,{key_id:parseInt(i)});a&&a.key_name&&(this.prjList[i]=a.key_name)}var i=this.competitionProjects;this.datavalue(t,i),this.potentialreach(t,i)},this.datavalue=(t,e)=>{async.each(e,(e,i)=>{t.project=e,APP.apiGet({path:\"mentions/sentiment-count\",data:t,success:t=>{let a=this.parent.component;a.compositionbrandlast=!0,6===_.filter(a,t=>t).length&&this.parent.updateid();const s=(t=t.items).negative?parseInt(t.negative):0,o=t.positive?parseInt(t.positive):0,c=t.neutral?parseInt(t.neutral):0;this.totalpositive.push(o),this.totalnegative.push(s),this.totalneutral.push(c),this.chacetotal[e]=o+s+c,this.cachepositive[e]=o,this.cachenegative[e]=s,this.cacheneutral[e]=c,this.sValue=t,this.update(),i()}}),this.update({isLoading:!1})},()=>{let t=p(\"project\"),e=_.filter(this.projectList,e=>t.indexOf(e.key_id)>-1);this.namevaluId=e[0].key_name;let i=this.cachepositive[t],a=_.sumBy(this.totalpositive);this.totalpositives=100*i/a;let s=this.cachenegative[t],o=_.sumBy(this.totalnegative);this.totalnegatives=100*s/o;let c=this.cacheneutral[t],n=_.sumBy(this.totalneutral);this.totalneutrals=100*c/n,this.update()})},this.potentialreach=(t,e)=>{t.compare=!0,async.each(e,(e,i)=>{t.project=e;var a=\"\",s=0;for(let e in t)t[e]&&\"\"!=t[e]&&(a+=s>0?`&${e}=${encodeURIComponent(t[e])}`:`?${e}=${encodeURIComponent(t[e])}`,s++);APP.apiGet({path:\"summary/potential-reach\"+a,success:t=>{t=t.items,this.potentialreach[e]=t.potential_reach?t.potential_reach:0,this.totalreach.push(this.potentialreach[e]),this.update(),i()}}),this.update({isLoading:!1})},()=>{let t=p(\"project\")?p(\"project\").split(\",\"):APP.getProject().split(\",\"),e=this.potentialreach[t],i=_.sumBy(this.totalreach);this.totalreachs=100*e/i,this.update()})}}))},166:function(t,e,i){i(0).tag2(\"sentimentcompetititon\",'<div class=\"mg-t-30 \" each=\"{o,i in prjList}\"> <div class=\"row mt-4\"> <div class=\"col-md-6\"> <div class=\"row\"> <div class=\"col-md-12 mb-2 text-center\"> <b class=\"f24 a141\">WORDCLOUD POSITIVE ({o})</b> <br> <span class=\"f14 a141\">Top wordcloud positive</span> </div> <div class=\"col-md-12 mb-2 text-center\" id=\"wordcloud_positive{i}\" style=\"height: 300px; width: 100%;\"></div> </div> </div> <div class=\"col-md-6\"> <div class=\"row\"> <div class=\"col-md-12 mb-2 text-center\"> <b class=\"f24 a141\">WORDCLOUD NEGATIVE ({o})</b> <br> <span class=\"f14 a141\">Top wordcloud negative</span> </div> <div class=\"col-md-12 mb-2 text-center\" id=\"wordcloud_negative{i}\" prj style=\"height: 300px; width: 100%;\"></div> </div> </div> </div> <div class=\"row mt-4\"> <div class=\"col-md-10 offset-md-1\"> <div class=\"ripple-loader\" if=\"{isLoading}\"></div> <div class=\"row desktopshow\"> <div class=\"col-md-12 mb-2 text-center\"> <b class=\"f24 a141\">MENTIONS ({o})</b> <br> <span class=\"f14 a141\">Top mentions and keyword phrase</span> </div> <div class=\"col-md-4 mb-2 text-center\"> <b class=\"f18 colortittle\">POSITIVE</b> </div> <div class=\"col-md-4 \"> </div> <div class=\"col-md-4 mb-2 text-center\"> <b class=\"f18 colortittle\">NEGATIVE</b> </div> </div> <div class=\"col-12 mb-2 text-center d-block d-sm-none\"> <b class=\"f24 a141\">POSITIVE</b> </div> <div class=\"col-12 mb-2 text-center d-block d-sm-none\"> <div class=\"row\"> <div class=\"col-6 px-1\"><span class=\"p-hastag display-w\" each=\"{item,i in topwordpositivesvalue[i]}\" if=\"{i ==0}\">{item.phrase}</span></div> <div class=\"col-6 px-1\"><span class=\"p-hastag display-w\" each=\"{item,i in topwordpositivesvalue[i]}\" if=\"{i ==1}\">{item.phrase}</span></div> <div class=\"col-6 px-1\"><span class=\"p-hastag display-w\" each=\"{item,i in topwordpositivesvalue[i]}\" if=\"{i ==2}\">{item.phrase}</span></div> <div class=\"col-6 px-1\"><span class=\"p-hastag display-w\" each=\"{item,i in topwordpositivesvalue[i]}\" if=\"{i ==3}\">{item.phrase}</span></div> </div> </div> <div class=\"row minheight225\"> <div class=\"col-md-4 text-center\"> <div class=\"row\"> <div class=\"col-md-12 col-12 py-3 mb-2 pn-holder\" each=\"{item in itemspositivevalue[i]}\"> <div class=\"row\"> <div class=\"col-md-2 col-2 pr-0 pt-1\"> <img riot-src=\"{item.user.avatar}\" class=\"profpic-style\" if=\"{item.user.avatar}\" alt=\"Image\" onerror=\"this.onerror=null;this.src=\\'https://ui-avatars.com/api/?background=0D8ABC&color=fff&length=2&rounded=true&name={item.user.name ? item.user.name : item.user.profile}\\'\"> <img riot-src=\"https://ui-avatars.com/api/?background=0D8ABC&color=fff&length=2&rounded=true&name={item.user.name ? item.user.name : item.user.profile}\" if=\"{!item.user.avatar}\" class=\"profpic-style\" alt=\"Image\" onerror=\"this.onerror=null;this.src=\\'https://ui-avatars.com/api/?background=0D8ABC&color=fff&length=2&rounded=true&name={item.user.name ? item.user.name : item.user.profile}\\'\" class=\"profpic-style\"> </div> <div class=\"col-md-10 col-10 pr-0 text-left\"> <span>{item.text.length > 50 ? item.text.substring(0,50) + \\'...\\' : item.text}</span><br> <span class=\"tx-primary pull-right pd-r-10\">({item.user.profile ? item.user.profile : item.user.name}) </span> </div> </div> </div> </div> </div> <div class=\"col-md-4 d-none d-sm-block position-rel\"> <div class=\"position-abs-l-5-p-0\"> <span class=\"p-hastag display-w\" each=\"{item in topwordpositivesvalue[i]}\">{item.phrase}</span> </div> <div class=\"position-abs-r-2-b-0\"> <span class=\"n-hastag mg-r-5 display-w\" each=\"{item in topwordnegativevalue[i]}\">{item.phrase}</span> </div> <div> </div> </div> <div class=\"col-12 mb-2 text-center d-block d-sm-none\"> <b class=\"f24 a141\">NEGATIVE</b> </div> <div class=\"col-12 mb-2 text-center d-block d-sm-none\"> <div class=\"row\"> <div class=\"col-6 px-1\"><span class=\"n-hastag display-w\" each=\"{item,i in topwordnegativevalue[i]}\" if=\"{i ==0}\">{item.phrase}</span></div> <div class=\"col-6 px-1\"><span class=\"n-hastag display-w\" each=\"{item,i in topwordnegativevalue[i]}\" if=\"{i ==1}\">{item.phrase}</span></div> <div class=\"col-6 px-1\"><span class=\"n-hastag display-w\" each=\"{item,i in topwordnegativevalue[i]}\" if=\"{i ==2}\">{item.phrase}</span></div> <div class=\"col-6 px-1\"><span class=\"n-hastag display-w\" each=\"{item,i in topwordnegativevalue[i]}\" if=\"{i ==3}\">{item.phrase}</span></div> </div> </div> <div class=\"col-md-4 text-center\"> <div class=\"row\"> <div class=\"col-md-12 col-12 py-3 mb-2 pn-holder\" each=\"{item in streamsnegativevalue[i]}\"> <div class=\"row\"> <div class=\"col-md-2 col-2 pr-0 pt-1\"> <img riot-src=\"{item.user.avatar}\" if=\"{item.user.avatar}\" class=\"profpic-style\" alt=\"Image\" onerror=\"this.onerror=null;this.src=\\'https://ui-avatars.com/api/?background=0D8ABC&color=fff&length=2&rounded=true&name={item.user.name ? item.user.name : item.user.profile}\\'\" class=\"profpic-style\"> <img riot-src=\"https://ui-avatars.com/api/?background=0D8ABC&color=fff&length=2&rounded=true&name={item.user.name ? item.user.name : item.user.profile}\" if=\"{!item.user.avatar}\" class=\"profpic-style\" alt=\"Image\" onerror=\"this.onerror=null;this.src=\\'https://ui-avatars.com/api/?background=0D8ABC&color=fff&length=2&rounded=true&name={item.user.name ? item.user.name : item.user.profile}\\'\" class=\"profpic-style\"> </div> <div class=\"col-md-10 col-10 pr-0 text-left\"> <span>{item.text.length > 50 ? item.text.substring(0,50) + \\'...\\' : item.text}</span><br> <span class=\"tx-primary pull-right pd-r-10\">({item.user.profile ? item.user.profile : item.user.name}) </span> </div> </div> </div> </div> </div> </div> </div> </div> </div>',\"\",\"\",(function(t){this.isLoading=!0,this.dataWordcloudnegative={},this.dataWordcloudpositive={},this.topwordpositivesvalue={},this.topwordnegativevalue={},this.itemspositivevalue={},this.streamsnegativevalue={},this.render=()=>{let t=_.clone(this.parent.search);APP.apiGet({path:\"projects/list?selected_fields=key_id,key_name\",success:t=>{this.projectList=t}}).done(()=>{this.createObject(t,this.projectList)})},this.createObject=(t,e)=>{this.competitionProjects=this.parent.projectAll.split(\",\"),this.prjList={};for(let t in this.competitionProjects){const i=this.competitionProjects[t],a=_.find(e,{key_id:parseInt(i)});a&&a.key_name&&(this.prjList[i]=a.key_name)}var i=this.competitionProjects;setTimeout(()=>{this.topwordnegatives(t,i),this.topwordpositives(t,i),this.update_datanegative(t,i),this.update_datapositive(t,i),this.update({isLoading:!0})},1)},this.update_datapositive=(t,e)=>{t.section=\"positive\",t.limit=4e3,t.page=0,t.is_total=null,async.each(e,(i,a)=>{t.project=i,APP.apiGet({path:\"mentions/wordcloud\",data:t,success:s=>{let o=this.parent.component;o.sentimentcompetition=!0,6===_.filter(o,t=>t).length&&this.parent.updateid();let c=s&&s.items&&s.items.positive?s.items.positive:[],n=t.q;if(n)this.streamspositive(n,t,e);else{if(c.length>0)var r=c?c.map(t=>t[0]).slice(0,4).toString().replace(/\\,/g,\" or \"):null;else r=null;this.streamspositive(r,t,e)}var l=_.concat(c);if((l=_.orderBy(l,[1],[\"desc\"])).length>0){this.update({notdata:!1});const t=l[0][1];l.map(e=>{const i=e[0].length,a=parseInt(e[1]);let s=a/t*100;return i>20&&(s=10,a/t*100>60&&(s=a/t*50)),s<15&&(s=15),e[1]=s,e}),$(\"#wordcloud_container\").show(),$(\"#wordcloud_canvas\").removeClass(\"onload\"),$(\"#wordcloud_positive\"+i).show(),WordCloud(\"wordcloud_positive\"+i,{list:l,backgroundColor:\"transparent\",gridSize:Math.round(16*$(\"#wordcloud_positive\"+i).width()/1024),weightFactor:t=>t,shape:\"diamond\",shuffle:!1,rotateRatio:.2,rotationSteps:3})}else this.notdata=!0,$(\"#wordcloud_container\").hide(),$(\"#wordcloud_canvas\").removeClass(\"oload\"),$(\"#wordcloud_positive\"+i).html(\"Empty\"),$(\"#wordcloud_positive\"+i).show();a()}})})},this.update_datanegative=(t,e)=>{t.section=\"negative\",t.limit=4e3,t.page=0,t.is_total=null,async.each(e,(i,a)=>{t.project=i,APP.apiGet({path:\"mentions/wordcloud\",data:t,success:s=>{let o=s&&s.items&&s.items.negative?s.items.negative:[],c=t.q;if(c)this.streamsnegative(c,t,e);else{if(o.length>0)var n=o?o.map(t=>t[0]).slice(0,4).toString().replace(/\\,/g,\" or \"):null;else n=null;this.streamsnegative(n,t,e)}var r=_.concat(o);if((r=_.orderBy(r,[1],[\"desc\"])).length>0){this.update({notdata:!1});const t=r[0][1];r.map(e=>{const i=e[0].length,a=parseInt(e[1]);let s=a/t*100;return i>20&&(s=10,a/t*100>60&&(s=a/t*50)),s<15&&(s=15),e[1]=s,e}),this.dataWordcloudnegative[i]=r,$(\"#wordcloud_container\").show(),$(\"#wordcloud_canvas\").removeClass(\"onload\"),$(\"#wordcloud_negative\"+i).show(),WordCloud(\"wordcloud_negative\"+i,{list:r,backgroundColor:\"transparent\",gridSize:Math.round(16*$(\"#wordcloud_negative\"+i).width()/1024),weightFactor:t=>t,shape:\"diamond\",shuffle:!1,rotateRatio:.2,rotationSteps:3})}else this.notdata=!0,$(\"#wordcloud_container\").hide(),$(\"#wordcloud_canvas\").removeClass(\"oload\"),$(\"#wordcloud_negative\"+i).html(\"Empty\"),$(\"#wordcloud_negative\"+i).show();a()}})})},this.topwordpositives=(t,e)=>{this.topword=[],t.limit=6,t.page=0,t.section=\"positive\",async.each(e,(e,i)=>{t.project=e,APP.apiGet({path:\"mentions/phrase\",data:t,success:t=>{this.total2=t.length,this.topwordpositivesvalue[e]=t.items.slice(0,5),this.update({isLoading:!1})}})})},this.topwordnegatives=(t,e)=>{this.topword=[],t.page=0,t.section=\"negative\",async.each(e,(e,i)=>{t.project=e,APP.apiGet({path:\"mentions/phrase\",data:t,success:t=>{this.total2=t.length,this.topwordnegativevalue[e]=t.items.slice(0,5),this.update({isLoading:!1})}})})},this.streamspositive=(t,e,i)=>{APP.log(\"render Stream timeline\"),async.each(i,(t,i)=>{e.project=t;e.section=\"positive\",e.limit=5,e.group_service=!1;var a=\"\",s=0;for(let t in e)e[t]&&\"\"!=e[t]&&(a+=s>0?`&${t}=${encodeURIComponent(e[t])}`:`?${t}=${encodeURIComponent(e[t])}`,s++);APP.apiPost({path:\"stream\"+a,success:e=>{this.itemspositivevalue[t]=e.item,this.update({isLoading:!1})}})})},this.streamsnegative=(t,e,i)=>{APP.log(\"render Stream timeline\"),async.each(i,(t,i)=>{e.project=t;e.section=\"negative\",e.limit=5,e.group_service=!1;var a=\"\",s=0;for(let t in e)e[t]&&\"\"!=e[t]&&(a+=s>0?`&${t}=${encodeURIComponent(e[t])}`:`?${t}=${encodeURIComponent(e[t])}`,s++);APP.apiPost({path:\"stream\"+a,success:e=>{this.streamsnegativevalue[t]=e.item,this.update()}})})}}))},29:function(t,e,i){\"use strict\";t.exports=function(t,e){var i=36e5,a=\"MMMM DD, YYYY HH:00\";return\"daily\"==e?(i=864e5,a=\"MMMM DD, YYYY\"):\"monthly\"==e&&(i=2592e6,a=\"MMMM YYYY\"),Highcharts.setOptions({global:{useUTC:!1}}),new Highcharts.Chart({chart:{backgroundColor:\"none\",renderTo:t,type:\"spline\",marginTop:50},title:{text:\"\"},xAxis:{type:\"datetime\",gridLineWidth:1,gridLineColor:\"#f2f2f2\",minTickInterval:i,title:{text:null},labels:{style:{color:\"#ccc\"}}},yAxis:{title:{text:null},min:0,gridLineWidth:1,gridLineColor:\"#f2f2f2\",labels:{style:{color:\"#ccc\"},formatter:function(){return this.value.formatMoney(0)}}},exporting:{enabled:!1},tooltip:{formatter:function(){return[moment(this.x).format(a),\"<br>\",this.y+\" \"+this.series.name].join(\"\")}},plotOptions:{spline:{dataLabels:{enabled:!0}}},legend:{enabled:!0},credits:{enabled:!1},navigation:{buttonOptions:{enabled:!1}}})}}}]);","extractedComments":[]}