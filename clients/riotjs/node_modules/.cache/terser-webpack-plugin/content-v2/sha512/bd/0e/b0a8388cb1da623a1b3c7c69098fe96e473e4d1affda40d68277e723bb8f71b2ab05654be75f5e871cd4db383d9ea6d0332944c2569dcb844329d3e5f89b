{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[62],{246:function(t,e,i){\"use strict\";i.r(e);var s=i(1),a=i.n(s);i(0).tag2(\"chartsentiment\",'<div class=\"row\" style=\"height:200px\"> <div class=\"col-xs-6 col-md-6 col-md-6-r10\"> <div class=\"row row-sm \"> <div class=\"col\"> <p class=\"mg-b-0 tx-uppercase tx-15 tx-mont tx-semibold tx-greent-infg\">POSITIVE</p> <p class=\"tx-lato tx-greent-infg tx-normal mg-b-0 tx-80\">{sValue[\\'positive\\']}</p> <span class=\"tx-15 tx-roboto\" riot-style=\"color:{colorsentiment[\\'positive\\']}\"><i class=\"{iconsentiment[\\'positive\\']}\"></i>{sentPersence[\\'positive\\']}%</span> </div> </div> </div> <div class=\"col-xs-6 col-md-6 col-md-6-r10\"> <div class=\"row row-sm \"> <div class=\"col\"> <p class=\"mg-b-0 tx-uppercase tx-15 tx-mont tx-semibold tx-red-infg\">NEGATIVE</p> <p class=\"tx-lato tx-red-infg tx-normal mg-b-0 tx-80\">{sValue[\\'negative\\']}</p> <span class=\"tx-15 tx-roboto\" riot-style=\"color:{colorsentiment[\\'negative\\']}\"><i class=\"{iconsentiment[\\'negative\\']}\"></i>{sentPersence[\\'negative\\']}%</span> </div> </div> </div> </div> <div class=\"row\"> <div class=\"col-md-12\"> <div class=\"card bg-primary-teals bd-0\" riot-style=\"height: {heightval}px;\"> <div class=\"\"> <h6 class=\"tx-15 tx-uppercase tx-medium tx-spacing-1 mg-b-10 tx-tittle-infg\">Daily Statistics</h6> <div id=\"sentimentdaily\" class=\" mg-t-m-30\" riot-style=\"height: {heightval - 30}px;\"> </div> </div> </div> </div> </div> <div class=\"row\"> <div class=\"col-md-12\"> <div class=\"card bg-primary-teals bd-0\"> <div class=\"\"> <h6 class=\"tx-15 tx-uppercase tx-medium tx-spacing-1 mg-b-10 tx-tittle-infg\">Hourly Statistics</h6> <div id=\"sentimenthourly\" class=\"mg-t-m-30\" riot-style=\"height: {heightval - 30}px;\"> </div> </div> </div> </div> </div>',\"\",\"\",(function(t){this.dataProjects=[],this.sValue=[],this.sentPersence=[],this.iconsentiment=[],this.colorsentiment=[],this.persentasedata=[],this.type=\"hourly\",this.chart=null,this.times=[{id:\"hourly\",name:\"Hourly\",selected:!1},{id:\"daily\",name:\"Daily\",selected:!0},{id:\"monthly\",name:\"Monthly\",selected:!1}],this.sentimentall=[{color:\"#66ae9b\",id:\"positive\",nameval:\"positive\",name:\"Positive\",no:1},{color:\"#dc8c81\",id:\"negative\",nameval:\"negative\",name:\"Negative\",no:2}],this.on(\"mount\",()=>{this.heightval=(window.innerHeight-300)/2,this.update()}),this.render=t=>{this.renderdaily(),this.update_data(),this.renderhourly()},this.update_data=()=>{APP.log(\"sentiment : update data\"),this.isLoading=!0,this.update({isLoading:!0});let t=_.clone(this.parent.search);t.limit=\"\",t.page=\"\",t.section=\"positive,negative,neutral\",t.compare=!0,this.xhrbuzzvolume=APP.apiGet({path:\"mentions/sentiment-count\",data:t,success:t=>{t=t.items,this.total=t.total.current?t.total.current:0,this.totalpercent=t.total.movement[1]?t.total.movement[1]:0;const e=t.total.movement[0];this.totalicon=\"up\"===e?\"fa fa-caret-up\":\"down\"===e?\"fa fa-caret-down\":\"fa fa-minus\",this.colorpersent=\"up\"===e?\"#1c770c\":\"down\"===e?\"rgb(220, 53, 69, 0.8)\":\"#d2dc35\",this.sValue.positive=t.positive.current?t.positive.current:0,this.sentPersence.positive=t.positive.movement[1]?t.positive.movement[1]:0;const i=t.positive.movement[0];this.iconsentiment.positive=\"up\"===i?\"fa fa-caret-up\":\"down\"===i?\"fa fa-caret-down\":\"fa fa-minus\",this.colorsentiment.positive=\"up\"===i?\"#1c770c\":\"down\"===i?\"rgb(220, 53, 69, 0.8)\":\"#d2dc35\",this.sValue.negative=t.negative.current?t.negative.current:0,this.sentPersence.negative=t.negative.movement[1]?t.negative.movement[1]:0;const s=t.negative.movement[0];this.iconsentiment.negative=\"up\"===s?\"fa fa-caret-up\":\"down\"===s?\"fa fa-caret-down\":\"fa fa-minus\",this.colorsentiment.negative=\"up\"===s?\"rgb(220, 53, 69, 0.8) \":\"down\"===s?\"#1c770c\":\"#d2dc35\",this.sValue.neutral=t.neutral.current?t.neutral.current:0,this.sentPersence.neutral=t.neutral.movement[1]?t.neutral.movement[1]:0;const a=t.neutral.movement[0];this.iconsentiment.neutral=\"up\"===a?\"fa fa-caret-up\":\"down\"===a?\"fa fa-caret-down\":\"fa fa-minus\",this.colorsentiment.neutral=\"up\"===a?\"#1c770c\":\"down\"===a?\"rgb(220, 53, 69, 0.8)\":\"#d2dc35\",this.update()}})},this.renderdaily=()=>{let t=_.clone(this.parent.search);t.group_service=\"false\",t.project=APP.currentProject,this.renderdata(t,\"daily\",\"sentimentdaily\")},this.renderhourly=()=>{let t=_.clone(this.parent.search);t.group_service=\"false\",t.project=APP.currentProject,this.renderdata(t,\"hourly\",\"sentimenthourly\")},this.renderdata=(t,e,i)=>{t.type=e,this.chart&&this.chart.spacing&&this.chart.destroy(),this.update({Loader:!0});var s=[];async.each(this.sentimentall,(e,i)=>{t.section=e.id;this.chart=APP.apiGet({path:\"mentions\",data:t,success:t=>{t=t.items;let a=[];a=(t=_.sortBy(t,t=>moment(t.date).toDate())).map(t=>[moment(t.date).utc().valueOf(),t.count]),a.length>0&&(this.nodata=!1);var o=0;_.each(a,(t,e)=>{o+=t[1]}),s.push({id:\"response\",shadow:!1,noid:o,name:e.name,nameval:e.nameval,type:\"areaspline\",lineWidth:1,color:e.color,colorval:e.color,fillColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,e.color],[1,Highcharts.Color(e.color).setOpacity(0).get(\"rgba\")]]},marker:{radius:3},data:a}),i()}},(t,e,i)=>{console.log({x:t,y:e,z:i})},i)},()=>{if(!this.nodata){const o=i;this.update({nodata:this.nodata});let n=_.orderBy(s,[\"noid\"],[\"desc\"]);this.chart=a()(o,e,\"#ccc\",!1);for(var t=0;t<=n.length-1;t++)this.chart.addSeries(n[t])}this.update({Loader:!1})})}}))},247:function(t,e,i){i(0).tag2(\"mybrandnegative\",'<div class=\"widget-2\"> <div class=\"card shadowbase overflow-hidden\"> <div class=\"card-header pd-20 bg-transparent borderbottom0 d-block text-center\"> <h4 class=\"panel-body header-title\"> <span class=\"myButtonR10\">NEGATIVE WORDCLOUD</span> </h4> </div> <div class=\"ripple-loader\" if=\"{isLoading}\"></div> <div class=\"card-body pd-10 bd-color-gray-lighter\"> <div class=\"row row-sm\"> <div class=\"col-md-12\"> <div id=\"wordcloud_container \"> <div id=\"wordcloud_canvas \" class=\"table-responslive mg-b-20\"> <div id=\"wordcloud_negative\" riot-style=\"height:{heightval - 150}px; width:100%;\"> </div> </div> </div> </div> </div> <div class=\"row row-sm\"> <div class=\"col-md-4 col-md-4-r10\"> <h4 class=\"header-title\"><span class=\"myButtonR10 streams\">PHRASE </span></h4> <div class=\"accsaved mg-t-10 topwordnegativeinfographic\" each=\"{o,i in topword}\" if=\"{i < 5}\"> {o.phrase}</div> </div> <div class=\"col-md-8 col-md-8-r10\"> <h4 class=\"panel-body header-title\"> <span class=\"myButtonR10 streams\">NEGATIVE STREAMS</span> </h4> <div class=\"panel \" if=\"{isLoading}\"> <div if=\"{isLoading}\" class=\"loader\"></div> <div class=\"panel-body bg-white\"> </div> </div> <div class=\"panel \" if=\"{this.total==0 && !isLoading}\" style=\" min-height: 290px;\"> <div class=\"panel-body bg-white \" style=\"text-align: center;margin-top:3px;\"> No Data </div> </div> <div class=\"panels mg-t-10\" style=\"text-align: -webkit-auto;\" each=\"{items}\"> <div class=\"panel-body streams\" if=\"{!isLoading && this.total != 0}\">{text.substring(0,200)} <br> <a class=\"servicetext\"> {service}</a></div> </div> </div> </div> </div> </div> </div>',\"\",\"\",(function(t){this.isLoading=!0,this.notdata=!1,this.value={},this.xhr=null,this.render=()=>{this.update_data(),this.topwordnegative()},this.update_data=()=>{this.notdata=!1,APP.log(\"wordcloude : render\"),this.update({isLoading:!0});_.find(this.times,{selected:!0});let t=_.clone(this.parent.search);t.section=\"negative\",t.limit=4e3,t.page=0,t.project=p(\"project\"),t.is_total=null,this.xhrWordCloud=APP.apiGet({path:\"mentions/wordcloud\",data:t,success:function(e){let i=e&&e.items&&e.items.negative?e.items.negative:[],s=t.q;if(s)this.streamsnegative(s);else{if(i.length>0)var a=i?i.map(t=>t[0]).slice(0,4).toString().replace(/\\,/g,\" or \"):null;else a=null;this.streamsnegative(a)}var o=_.clone(i);if((o=_.orderBy(o,[1],[\"desc\"])).length>0){this.update({notdata:!1});const t=o[0][1];o.map(e=>{const i=e[0].length,s=parseInt(e[1]);let a=s/t*100;return i>20&&(a=10,s/t*100>60&&(a=s/t*50)),a<15&&(a=25),e[1]=a,e}),$(\"#wordcloud_container\").show(),$(\"#wordcloud_canvas\").removeClass(\"oload\"),$(\"#wordcloud_negative\").show(),WordCloud(\"wordcloud_negative\",{list:o,backgroundColor:\"transparent\",gridSize:Math.round(16*$(\"#wordcloud_negative\").width()/1024),minSize:10,weightFactor:t=>t,shape:\"diamond\",shuffle:!1,rotateRatio:.2,rotationSteps:3})}else this.notdata=!0,$(\"#wordcloud_container\").hide(),$(\"#wordcloud_canvas\").removeClass(\"oload\"),$(\"#wordcloud_negative\").html(\"Empty\"),$(\"#wordcloud_negative\").show();this.update({isLoading:!1})}.bind(this)}),this.xhrWordCloud.readyState&&this.update({isLoading:!1,notdata:!0})},this.topwordnegative=()=>{let t=_.clone(this.parent.search);this.topword=[],t.limit=6,t.page=0,t.section=\"negative\",this.xhrTopWords=APP.apiGet({path:\"mentions/phrase\",data:t,success:t=>{this.total2=t.length,this.topword=t.items,this.update({isLoading:!1})}}),this.xhrTopWords.readyState&&this.update({isLoading:!1,total2:0})},this.streamsnegative=t=>{APP.log(\"render Stream timeline\");const e=_.find(this.times,{selected:!0});let i=_.clone(this.parent.search),s=i.q?i.q:t;i.type=e,i.section=\"negative\",i.limit=3,i.q=s,i.group_service=!1;var a=\"\",o=0;for(let t in i)i[t]&&\"\"!=i[t]&&(a+=o>0?`&${t}=${encodeURIComponent(i[t])}`:`?${t}=${encodeURIComponent(i[t])}`,o++);this.xhrStream=APP.apiPost({path:\"stream\"+a,success:function(t){this.dataImage=t.item.map(t=>t.user.avatar),this.items=t.item,this.total=this.items.length,this.isLoading=!1,this.userLoadingSentiment=void 0,this.update()}.bind(this)}),this.xhrStream.readyState&&this.update({isLoading:!1,total:0})},this.on(\"mount\",()=>{this.heightval=window.innerHeight/2,this.xhrWordCloud=null,this.xhrStream=null,this.xhrTopWords=null}),this.on(\"unmount\",()=>{this.xhrWordCloud&&this.xhrWordCloud.abort(),this.xhrStream&&this.xhrStream.abort(),this.xhrTopWords&&this.xhrTopWords.abort()})}))}}]);","extractedComments":[]}