{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{32:function(e,t,r){\"use strict\";r.r(t),function(e){var t=r(1),o=r.n(t),n=r(21),a=r(26),i=r.n(a),s=r(4),c=(r(63),r(195)),u=r(0);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(null==r)return;var o,n,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(o=r.next()).done)&&(a.push(o.value),!t||a.length!==t);i=!0);}catch(e){s=!0,n=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw n}}return a}(e,t)||g(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function h(e){return(h=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function g(e,t){if(e){if(\"string\"==typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===r&&e.constructor&&(r=e.constructor.name),\"Map\"===r||\"Set\"===r?Array.from(e):\"Arguments\"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?y(e,t):void 0}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}function v(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,\"value\"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var b=new(function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t),this.currentLayout=null,this.apiurldonwloadreport=\"https://ping.r10.co/\",this.apiDomain=\"https://api.ripple10.com\",this.appInfographicUrl=\"http://localhost:5000/competitive/infographic?project=<project>&from=<sdate>00%3A00%3A00&to=<ndate>23%3A59%3A59&filterBot=0&v2=yes&token=<tmp_token>&uid=<userid>\",this.appInfographicBrandUrl=\"http://localhost:5000/infographic?project=<project>&from=<sdate>00%3A00%3A00&to=<ndate>23%3A59%3A59&filterBot=0&v2=yes&token=<tmp_token>&uid=<userid>\",this.appCCUrl=\"http://localhost:5000/monitor?rid=<prj>&screen=<no>&ccv2=yes&token=<tmp_token>\",this.appStaticToken=\"f5e0771d078aedf5a6d4c117becabc98\",this.apiUrl=\"https://api.ripple10.com/api/v2/\",this.apiprdashboard=\"http://startup.ripple10.com/v1/\",this.appid=\"147890702621380\",this.apiImage=\"https://s3.ripple10.com/\",this.forceLogin=!1,this.currentProject=null,this.currentHash=null,this.currentTag=null,this.apiuploadimag=e.env.API_UPLOAD_IMAGE,this.isDev=\"true\"===localStorage.getItem(\"DEBUG\")}var a,l,d;return a=t,(l=[{key:\"init\",value:function(){var e=this;if(this.log(\"init...\"),s.default.check()){s.default.releaseFromStorage();var t=0;$.ajaxSetup({tryCount:0,retryLimit:3,retryInterval:2e3,beforeSend:function(e,t){e.setRequestHeader(\"Authorization\",\"Bearer \"+s.default.getToken()),p(\"since\")?localStorage.setItem(\"since\",moment(decodeURIComponent(p(\"since\"))).format(\"YYYY-MM-DD\")):localStorage.since||localStorage.setItem(\"since\",moment().subtract(7,\"d\").format(\"YYYY-MM-DD\")),p(\"until\")?localStorage.setItem(\"until\",moment(decodeURIComponent(p(\"until\"))).format(\"YYYY-MM-DD\")):localStorage.until||localStorage.setItem(\"until\",moment().format(\"YYYY-MM-DD\"))},statusCode:{401:function(e){t<1&&(b.forceLogin=!0,s.default.logout(),b.goTo(\"/login\"),t++,localStorage.removeItem(\"until\"),localStorage.removeItem(\"since\"),localStorage.removeItem(\"url\"),localStorage.removeItem(\"level\"),localStorage.removeItem(\"App_version\"),localStorage.clear())}},complete:function(e){var t=e.getResponseHeader(\"Authorization\");if(null!=t)try{var r=t.split(\" \");s.default.setToken(r[1])}catch(e){}}})}var a,l=function(e,t){var r=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!r){if(Array.isArray(e)||(r=g(e))||t&&e&&\"number\"==typeof e.length){r&&(e=r);var o=0,n=function(){};return{s:n,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:n}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var a,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw a}}}}(i.a);try{var f=function(){var t=a.value;try{e.log(t.import),r(199)(\"./\"+t.import),Object(n.a)(t.hash,(function(r){try{e.currentHash=t.hash,\"login\"==t.hash?b.setLayout(\"login\"):t.auth&&s.default.check()?(b.setLayout(t.layout),e.currentTag&&Object(u.isFunction)(e.currentTag.unmount)&&e.currentTag.unmount(),e.currentTag=o.a.mount(document.getElementById(\"content\"),t.tag)[0]):(localStorage.clear(),e.goTo(\"login\"))}catch(e){console.error(e)}}))}catch(e){console.error(e)}};for(l.s();!(a=l.n()).done;)f()}catch(e){l.e(e)}finally{l.f()}Object(n.a)(\"/\",(function(){if(s.default.check())if(0===s.default.projects.length)b.goTo(\"setting/project-setup\");else{var e=Object(u.orderBy)(s.default.projects,[\"index\"],[\"asc\"])[0].id,t=JSON.parse(localStorage.getItem(\"package\")).menu[0];\"summary\"==t?b.goTo(\"summary?project=\"+e):\"mentions\"==t?b.goTo(\"mentions?project=\"+e):\"authors\"==t?b.goTo(\"authors?project=\"+e):\"analysis\"==t?b.goTo(\"analysis/my-stream?project=\"+e):\"comparison\"==t?b.goTo(\"comparison?project=\"+e):(\"infographic\"==t||\"pr_dashboard\"==t||\"project-settings\"==t||null==t)&&b.goTo(\"setting/project-update?project=\"+e)}else b.goTo(\"login\")})),Object(n.a)(\"/logout\",(function(){s.default.logout(),b.goTo(\"/\"),e.goTo(\"login\"),localStorage.clear()})),n.a.start(!0),localStorage.setItem(\"app_version\",c.a)}},{key:\"goTo\",value:function(e){Object(n.a)(e)}},{key:\"setLayout\",value:function(e){this.log(\"Set Layout To: \",e);try{this.currentLayout!=e&&o.a.mount(\"body\",e)}catch(e){console.error(e)}}},{key:\"getProject\",value:function(){if(0!=s.default.projects.length)return this.currentProject?this.currentProject:Object(u.head)(s.default.projects).id}},{key:\"getname\",value:function(){return Object(u.head)(s.default.projects).name}},{key:\"downloadcsv\",value:function(e,t,r){var o=\"object\"!=h(e)?JSON.parse(e):e,n=\"\";if(n+=t+\"\\r\\n\\n\",r){var a=\"\";for(var i in o[0])a+=i+\",\";n+=(a=a.slice(0,-1))+\"\\r\\n\"}for(var s=0;s<o.length;s++){for(var i in a=\"\",o[s])a+='\"'+(o[s][i]?o[s][i]:\"0\")+'\",';a.slice(0,a.length-1),n+=a+\"\\r\\n\"}if(\"\"!=n){var c=\"Report_\";c+=t.replace(/ /g,\"_\");var u=\"data:text/csv;charset=utf-8,\"+n,l=document.createElement(\"a\");l.href=u,l.style=\"visibility:hidden\",l.download=c+\".csv\",document.body.appendChild(l),l.click(),document.body.removeChild(l)}else alert(\"Invalid data\")}},{key:\"donwloadXLS\",value:function(e,t,r){var o=[];o.push(t),$.each(e,(function(e,t){var r=[];$.each(t,(function(e,t){r.push(t)})),o.push(r)}));var n=r+\".xlsx\",a=r;\"undefined\"!=typeof console&&console.log(new Date);var i=XLSX.utils.book_new(),s=XLSX.utils.aoa_to_sheet(o);XLSX.utils.book_append_sheet(i,s,a),\"undefined\"!=typeof console&&console.log(new Date),XLSX.writeFile(i,n),\"undefined\"!=typeof console&&console.log(new Date)}},{key:\"patchDateFormat\",value:function(e,t){var r=localStorage.filter_timesince,o=localStorage.filter_timeuntil,n={},a=e.split(\"?\")[0];if(e.indexOf(\"?\")>-1){for(var i in n=(e.split(\"?\")[1]||\"\").split(\"&\").map((function(e){return e.split(\"=\")})).reduce((function(e,t){var r=m(t,2),o=r[0],n=r[1];return e[o]=n,e}),{}),e=a+\"?\",n)\"since\"===i?r&&(n.since=moment(n.since).format(\"YYYY-MM-DD\")+\" \"+r):\"until\"===i&&o&&(n.until=moment(n.until).format(\"YYYY-MM-DD\")+\" \"+o);e+=Object.keys(n).map((function(e){return e+\"=\"+encodeURIComponent(n[e])})).join(\"&\")}for(var s in t)\"since\"===s?r&&(t.since=moment(t.since).format(\"YYYY-MM-DD\")+\" \"+r):\"until\"===s&&o&&(t.until=moment(t.until).format(\"YYYY-MM-DD\")+\" \"+o);return{url:e,data:t}}},{key:\"apiGet\",value:function(e,t){var r=this.patchDateFormat(b.apiUrl+e.path,e.data),o={url:r.url,method:\"get\",data:r.data,dataType:\"json\"};return e.error?o.error=function(t,r,o){e.error(t,r,o)}:o.error=function(e,r,o){b.error(e,t)},e.success&&(o.success=function(t,r,o){e.parse_data?e.success(t,o):e.success(t.data,o)}),$.ajax(o)}},{key:\"apiGetPR\",value:function(e){var t=this.patchDateFormat(b.apiUrl+e.path,e.data),r={url:t.url,method:\"get\",data:t.data,dataType:\"json\"};return e.error?r.error=function(t,r,o){e.error(t,r,o)}:r.error=function(e,t,r){b.error(e)},e.success&&(r.success=function(t,r,o){e.success(t)}),$.ajax(r)}},{key:\"apiPost\",value:function(e){var t=this.patchDateFormat(b.apiUrl+e.path,e.data),r={url:t.url,method:\"post\",data:t.data,dataType:\"json\",error:function(e,t,r){b.error(e)}};return e.error?r.error=function(t,r,o){e.error(t,r,o)}:r.error=function(e,t,r){401==t?console.log(\"this is login failure\"):b.error(e)},e.success&&(r.success=function(t,r,o){e.parse_data?e.success(t):e.success(t.data,r,o)}),$.ajax(r)}},{key:\"apiUpload\",value:function(e){var t=this.patchDateFormat(b.apiUrl+e.path,e.data),r={url:t.url,method:\"put\",data:t.data,processData:!1,contentType:!1,error:function(e,t,r){b.error(e)}};return e.error?r.error=function(t,r,o){e.error(t,r,o)}:r.error=function(e,t,r){401==t?console.log(\"this is login failure\"):b.error(e)},e.success&&(r.success=function(t,r,o){e.parse_data?e.success(t):e.success(t.data,r,o)}),$.ajax(r)}},{key:\"apiPut\",value:function(e){var t=this.patchDateFormat(b.apiUrl+e.path,e.data),r={url:t.url,method:\"put\",data:t.data,dataType:\"json\",error:function(e,t,r){b.error(e)}};e.success&&(r.success=function(t){var r=t.data;error.trigger(\"responseput\",r),e.success(r)}),$.ajax(r)}},{key:\"error\",value:function(e,t){if(402==e.status&&(this.forceLogin=!0,s.default.logout(),b.goTo(\"/\"),this.goTo(\"login\")),400==e.status&&$.notify(e.responseJSON.message,\"info\"),401==e.status)return null;if(menu.trigger(\"response\",e.responseJSON),this.forceLogin)return!1;if(\"abort\"==e.statusText)return!1;e.status&&401==e.status&&(this.forceLogin=!0,s.default.logout(),b.goTo(\"/\"),this.goTo(\"login\"));var r=\"Oops error...\",o=!1;e.responseJSON&&e.responseJSON.message?(r=e.responseJSON.message,Object(u.isObject)(e.responseJSON.message)?r=e.responseJSON.message.message+\"<br>\"+e.responseJSON.message.file:r.indexOf(\"Limit\")>-1&&(o=!0)):e.statusText?r=e.statusText:e.responseText&&(r=e.responseText),0==e.status&&\"abort\"!=e.statusText?r=\"Please check your connection\":404==e.status&&(r=\"Please check your API\"),o?Object(u.isFunction)(t)&&t():$.notify(r,\"info\")}},{key:\"success\",value:function(e,t){swal({title:\"Success\",text:e.message,type:\"success\",confirmButtonColor:\"#42a3b8\",closeOnConfirm:!0},t)}},{key:\"animationFadeIn\",value:function(){$(\".fade\").each((function(e){setTimeout(function(){$(this).addClass(\"in\")}.bind(this),100)}))}},{key:\"log\",value:function(){if(this.isDev){for(var e,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];(e=console).log.apply(e,[\"[LOG]\"].concat(r))}}},{key:\"popupMessage\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=f({title:\"Warning!\",text:e,type:\"warning\",showCancelButton:!1,confirmButtonColor:\"#42a3b8\",closeOnConfirm:!0},t);return swal(r)}}])&&v(a.prototype,l),d&&v(a,d),t}()),w=o.a.observable();b.init(),window.Auth=s.default,window.APP=b,window.Streams=w,window.PERMISSION=null,window.pageLimit=10,window.urlStream=o.a.observable(),window.menu=o.a.observable(),window.menuleft=o.a.observable(),window.NameProfile=o.a.observable(),window.maxStreams=o.a.observable(),window.menuActive=o.a.observable(),window.breadCrumb=o.a.observable(),window.renderchart=o.a.observable(),window.renderchartpie=o.a.observable(),window.rendercharttoptime=o.a.observable(),window.error=o.a.observable(),window.p=function(e){var t=new RegExp(\"[?&]\"+e+\"=([^&#]*)\").exec(window.location.href);return null==t?null:t[1]||0},Number.prototype.formatMoney=function(e,t,r){var o=this,n=(e=isNaN(e=Math.abs(e))?2:e,t=null==t?\",\":t,r=null==r?\".\":r,o<0?\"-\":\"\"),a=parseInt(o=Math.abs(+o||0).toFixed(e))+\"\",i=(i=a.length)>3?i%3:0;return n+(i?a.substr(0,i)+r:\"\")+a.substr(i).replace(/(\\d{3})(?=\\d)/g,\"$1\"+r)+(e?t+Math.abs(o-a).toFixed(e).slice(2):\"\")}}.call(this,r(196))}}]);","extractedComments":[]}