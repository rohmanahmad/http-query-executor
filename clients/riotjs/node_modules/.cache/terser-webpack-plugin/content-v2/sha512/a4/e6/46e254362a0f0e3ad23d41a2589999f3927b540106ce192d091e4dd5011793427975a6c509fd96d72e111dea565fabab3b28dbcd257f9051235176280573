{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{31:function(e,t,o){\"use strict\";o.r(t),function(e){var t=o(0),r=o.n(t),n=o(20),a=o(25),i=o(4),s=(o(65),o(194));function c(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function u(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?c(Object(o),!0).forEach((function(t){l(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):c(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function l(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var o=null==e?null:\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(null==o)return;var r,n,a=[],i=!0,s=!1;try{for(o=o.call(e);!(i=(r=o.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){s=!0,n=e}finally{try{i||null==o.return||o.return()}finally{if(s)throw n}}return a}(e,t)||function(e,t){if(!e)return;if(\"string\"==typeof e)return d(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);\"Object\"===o&&e.constructor&&(o=e.constructor.name);if(\"Map\"===o||\"Set\"===o)return Array.from(e);if(\"Arguments\"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return d(e,t)}(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,r=new Array(t);o<t;o++)r[o]=e[o];return r}function m(e){return(m=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function h(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var g=new(function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t),this.currentLayout=null,this.apiurldonwloadreport=\"https://ping.r10.co/\",this.apiDomain=\"https://api.ripple10.com\",this.appInfographicUrl=\"http://localhost:5000/competitive/infographic?project=<project>&from=<sdate>00%3A00%3A00&to=<ndate>23%3A59%3A59&filterBot=0&v2=yes&token=<tmp_token>&uid=<userid>\",this.appInfographicBrandUrl=\"http://localhost:5000/infographic?project=<project>&from=<sdate>00%3A00%3A00&to=<ndate>23%3A59%3A59&filterBot=0&v2=yes&token=<tmp_token>&uid=<userid>\",this.appCCUrl=\"http://localhost:5000/monitor?rid=<prj>&screen=<no>&ccv2=yes&token=<tmp_token>\",this.appStaticToken=\"f5e0771d078aedf5a6d4c117becabc98\",this.apiUrl=\"https://api.ripple10.com/api/v2/\",this.apiprdashboard=\"http://startup.ripple10.com/v1/\",this.appid=\"147890702621380\",this.apiImage=\"https://s3.ripple10.com/\",this.forceLogin=!1,this.currentProject=null,this.currentHash=null,this.currentTag=null,this.apiuploadimag=e.env.API_UPLOAD_IMAGE,this.isDev=\"true\"===localStorage.getItem(\"DEBUG\")}var c,l,d;return c=t,(l=[{key:\"init\",value:function(){var e=this;if(this.log(\"init...\"),i.default.check()){i.default.releaseFromStorage();var t=0;$.ajaxSetup({tryCount:0,retryLimit:3,retryInterval:2e3,beforeSend:function(e,t){e.setRequestHeader(\"Authorization\",\"Bearer \"+i.default.getToken()),p(\"since\")?localStorage.setItem(\"since\",moment(decodeURIComponent(p(\"since\"))).format(\"YYYY-MM-DD\")):localStorage.since||localStorage.setItem(\"since\",moment().subtract(7,\"d\").format(\"YYYY-MM-DD\")),p(\"until\")?localStorage.setItem(\"until\",moment(decodeURIComponent(p(\"until\"))).format(\"YYYY-MM-DD\")):localStorage.until||localStorage.setItem(\"until\",moment().format(\"YYYY-MM-DD\"))},statusCode:{401:function(e){t<1&&(g.forceLogin=!0,i.default.logout(),g.goTo(\"/login\"),t++,localStorage.removeItem(\"until\"),localStorage.removeItem(\"since\"),localStorage.removeItem(\"url\"),localStorage.removeItem(\"level\"),localStorage.removeItem(\"App_version\"),localStorage.clear())}},complete:function(e){var t=e.getResponseHeader(\"Authorization\");if(null!=t)try{var o=t.split(\" \");i.default.setToken(o[1])}catch(e){}}})}_.each(a,(function(t){o(198)(\"./\"+t.import),Object(n.a)(t.hash,(function(o){e.currentHash=t.hash,\"login\"==t.hash?g.setLayout(\"login\"):t.auth&&i.default.check()?(g.setLayout(t.layout),e.currentTag&&_.isFunction(e.currentTag.unmount)&&e.currentTag.unmount(),e.currentTag=r.a.mount(document.getElementById(\"content\"),t.tag)[0]):(localStorage.clear(),e.goTo(\"login\"))}))})),Object(n.a)(\"/\",(function(){if(i.default.check())if(0===i.default.projects.length)g.goTo(\"setting/project-setup\");else{var e=_.orderBy(i.default.projects,[\"index\"],[\"asc\"])[0].id,t=JSON.parse(localStorage.getItem(\"package\")).menu[0];\"summary\"==t?g.goTo(\"summary?project=\"+e):\"mentions\"==t?g.goTo(\"mentions?project=\"+e):\"authors\"==t?g.goTo(\"authors?project=\"+e):\"analysis\"==t?g.goTo(\"analysis/my-stream?project=\"+e):\"comparison\"==t?g.goTo(\"comparison?project=\"+e):(\"infographic\"==t||\"pr_dashboard\"==t||\"project-settings\"==t||null==t)&&g.goTo(\"setting/project-update?project=\"+e)}else g.goTo(\"login\")})),Object(n.a)(\"/logout\",(function(){i.default.logout(),g.goTo(\"/\"),e.goTo(\"login\"),localStorage.clear()})),n.a.start(!0),localStorage.setItem(\"app_version\",s.a)}},{key:\"goTo\",value:function(e){Object(n.a)(e)}},{key:\"setLayout\",value:function(e){this.currentLayout!=e&&r.a.mount(\"body\",e)}},{key:\"getProject\",value:function(){if(0!=i.default.projects.length)return this.currentProject?this.currentProject:_.head(i.default.projects).id}},{key:\"getname\",value:function(){return _.head(i.default.projects).name}},{key:\"downloadcsv\",value:function(e,t,o){var r=\"object\"!=m(e)?JSON.parse(e):e,n=\"\";if(n+=t+\"\\r\\n\\n\",o){var a=\"\";for(var i in r[0])a+=i+\",\";n+=(a=a.slice(0,-1))+\"\\r\\n\"}for(var s=0;s<r.length;s++){for(var i in a=\"\",r[s])a+='\"'+(r[s][i]?r[s][i]:\"0\")+'\",';a.slice(0,a.length-1),n+=a+\"\\r\\n\"}if(\"\"!=n){var c=\"Report_\";c+=t.replace(/ /g,\"_\");var u=\"data:text/csv;charset=utf-8,\"+n,l=document.createElement(\"a\");l.href=u,l.style=\"visibility:hidden\",l.download=c+\".csv\",document.body.appendChild(l),l.click(),document.body.removeChild(l)}else alert(\"Invalid data\")}},{key:\"donwloadXLS\",value:function(e,t,o){var r=[];r.push(t),$.each(e,(function(e,t){var o=[];$.each(t,(function(e,t){o.push(t)})),r.push(o)}));var n=o+\".xlsx\",a=o;\"undefined\"!=typeof console&&console.log(new Date);var i=XLSX.utils.book_new(),s=XLSX.utils.aoa_to_sheet(r);XLSX.utils.book_append_sheet(i,s,a),\"undefined\"!=typeof console&&console.log(new Date),XLSX.writeFile(i,n),\"undefined\"!=typeof console&&console.log(new Date)}},{key:\"patchDateFormat\",value:function(e,t){var o=localStorage.filter_timesince,r=localStorage.filter_timeuntil,n={},a=e.split(\"?\")[0];if(e.indexOf(\"?\")>-1){for(var i in n=(e.split(\"?\")[1]||\"\").split(\"&\").map((function(e){return e.split(\"=\")})).reduce((function(e,t){var o=f(t,2),r=o[0],n=o[1];return e[r]=n,e}),{}),e=a+\"?\",n)\"since\"===i?o&&(n.since=moment(n.since).format(\"YYYY-MM-DD\")+\" \"+o):\"until\"===i&&r&&(n.until=moment(n.until).format(\"YYYY-MM-DD\")+\" \"+r);e+=Object.keys(n).map((function(e){return e+\"=\"+encodeURIComponent(n[e])})).join(\"&\")}for(var s in t)\"since\"===s?o&&(t.since=moment(t.since).format(\"YYYY-MM-DD\")+\" \"+o):\"until\"===s&&r&&(t.until=moment(t.until).format(\"YYYY-MM-DD\")+\" \"+r);return{url:e,data:t}}},{key:\"apiGet\",value:function(e,t){var o=this.patchDateFormat(g.apiUrl+e.path,e.data),r={url:o.url,method:\"get\",data:o.data,dataType:\"json\"};return e.error?r.error=function(t,o,r){e.error(t,o,r)}:r.error=function(e,o,r){g.error(e,t)},e.success&&(r.success=function(t,o,r){e.parse_data?e.success(t,r):e.success(t.data,r)}),$.ajax(r)}},{key:\"apiGetPR\",value:function(e){var t=this.patchDateFormat(g.apiUrl+e.path,e.data),o={url:t.url,method:\"get\",data:t.data,dataType:\"json\"};return e.error?o.error=function(t,o,r){e.error(t,o,r)}:o.error=function(e,t,o){g.error(e)},e.success&&(o.success=function(t,o,r){e.success(t)}),$.ajax(o)}},{key:\"apiPost\",value:function(e){var t=this.patchDateFormat(g.apiUrl+e.path,e.data),o={url:t.url,method:\"post\",data:t.data,dataType:\"json\",error:function(e,t,o){g.error(e)}};return e.error?o.error=function(t,o,r){e.error(t,o,r)}:o.error=function(e,t,o){401==t?console.log(\"this is login failure\"):g.error(e)},e.success&&(o.success=function(t,o,r){e.parse_data?e.success(t):e.success(t.data,o,r)}),$.ajax(o)}},{key:\"apiUpload\",value:function(e){var t=this.patchDateFormat(g.apiUrl+e.path,e.data),o={url:t.url,method:\"put\",data:t.data,processData:!1,contentType:!1,error:function(e,t,o){g.error(e)}};return e.error?o.error=function(t,o,r){e.error(t,o,r)}:o.error=function(e,t,o){401==t?console.log(\"this is login failure\"):g.error(e)},e.success&&(o.success=function(t,o,r){e.parse_data?e.success(t):e.success(t.data,o,r)}),$.ajax(o)}},{key:\"apiPut\",value:function(e){var t=this.patchDateFormat(g.apiUrl+e.path,e.data),o={url:t.url,method:\"put\",data:t.data,dataType:\"json\",error:function(e,t,o){g.error(e)}};e.success&&(o.success=function(t){var o=t.data;error.trigger(\"responseput\",o),e.success(o)}),$.ajax(o)}},{key:\"error\",value:function(e,t){if(402==e.status&&(this.forceLogin=!0,i.default.logout(),g.goTo(\"/\"),this.goTo(\"login\")),400==e.status&&$.notify(e.responseJSON.message,\"info\"),401==e.status)return null;if(menu.trigger(\"response\",e.responseJSON),this.forceLogin)return!1;if(\"abort\"==e.statusText)return!1;e.status&&401==e.status&&(this.forceLogin=!0,i.default.logout(),g.goTo(\"/\"),this.goTo(\"login\"));var o=\"Oops error...\",r=!1;e.responseJSON&&e.responseJSON.message?(o=e.responseJSON.message,_.isObject(e.responseJSON.message)?o=e.responseJSON.message.message+\"<br>\"+e.responseJSON.message.file:o.indexOf(\"Limit\")>-1&&(r=!0)):e.statusText?o=e.statusText:e.responseText&&(o=e.responseText),0==e.status&&\"abort\"!=e.statusText?o=\"Please check your connection\":404==e.status&&(o=\"Please check your API\"),r?_.isFunction(t)&&t():$.notify(o,\"info\")}},{key:\"success\",value:function(e,t){swal({title:\"Success\",text:e.message,type:\"success\",confirmButtonColor:\"#42a3b8\",closeOnConfirm:!0},t)}},{key:\"animationFadeIn\",value:function(){$(\".fade\").each((function(e){setTimeout(function(){$(this).addClass(\"in\")}.bind(this),100)}))}},{key:\"log\",value:function(){if(this.isDev){for(var e,t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];(e=console).log.apply(e,[\"[LOG]\"].concat(o))}}},{key:\"popupMessage\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=u({title:\"Warning!\",text:e,type:\"warning\",showCancelButton:!1,confirmButtonColor:\"#42a3b8\",closeOnConfirm:!0},t);return swal(o)}}])&&h(c.prototype,l),d&&h(c,d),t}()),y=r.a.observable();g.init(),window.Auth=i.default,window.APP=g,window.Streams=y,window.PERMISSION=null,window.pageLimit=10,window.urlStream=r.a.observable(),window.menu=r.a.observable(),window.menuleft=r.a.observable(),window.NameProfile=r.a.observable(),window.maxStreams=r.a.observable(),window.menuActive=r.a.observable(),window.breadCrumb=r.a.observable(),window.renderchart=r.a.observable(),window.renderchartpie=r.a.observable(),window.rendercharttoptime=r.a.observable(),window.error=r.a.observable(),window.p=function(e){var t=new RegExp(\"[?&]\"+e+\"=([^&#]*)\").exec(window.location.href);return null==t?null:t[1]||0},Number.prototype.formatMoney=function(e,t,o){var r=this,n=(e=isNaN(e=Math.abs(e))?2:e,t=null==t?\",\":t,o=null==o?\".\":o,r<0?\"-\":\"\"),a=parseInt(r=Math.abs(+r||0).toFixed(e))+\"\",i=(i=a.length)>3?i%3:0;return n+(i?a.substr(0,i)+o:\"\")+a.substr(i).replace(/(\\d{3})(?=\\d)/g,\"$1\"+o)+(e?t+Math.abs(r-a).toFixed(e).slice(2):\"\")}}.call(this,o(195))}}]);","extractedComments":[]}