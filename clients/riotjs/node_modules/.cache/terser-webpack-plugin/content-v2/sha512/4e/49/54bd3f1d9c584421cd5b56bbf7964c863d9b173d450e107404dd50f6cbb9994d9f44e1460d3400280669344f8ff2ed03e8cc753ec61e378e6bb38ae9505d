{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{244:function(t,e,s){s(0).tag2(\"buzzgeodistributionpage\",'<div class=\"col-md-12 mg-t-20\"> <span class=\"panel-body header-title mg-t-70\"> <span class=\"tx-tittle-infg\"> BUZZ GEO DISTRIBUTION</span> </span> <div class=\"body\" id=\"sentimentbuzgeo\" riot-style=\"height: {heightval}px;\"></div> </div>',\"\",\"\",(function(t){this.on(\"mount\",()=>{this.heightval=(window.innerHeight-200)/2,this.update()}),this.render=()=>{APP.log(\"geo-competitive: render\"),this.notdata=!1;let t=_.clone(this.parent.search);t.project=p(\"project\")?p(\"project\"):APP.getProject();let e=[],s=[],i=[];async.series([function(t){$.getJSON(\"/assets/js/id-all.geo.json\",(function(s){e=s,t()}))},function(t){$.getJSON(\"/assets/js/province.json\",(function(e){s=e,t()}))}],()=>{this.update({isLoading:!0}),this.xhr=APP.apiGet({path:\"mentions/popular-locations\",data:{...t,service_category:\"1,2,3,4,5,6,7,8\",limit:1e3},success:t=>{0===(t=(t=t.items).map(t=>t&&t.lat?t:null).filter(t=>null!==t)).length?this.notdata=!0:this.update({notdata:!1});let e=_.map(t,(function(t){let e=null;return null!=t&&s.features&&(i=getProvince(s.features,t.lat||0,t.lon||0),_.isEmpty(i)||i&&(e={\"hc-key\":i.HASC_1.replace(\".\",\"-\").toLowerCase(),hasc:i.NAME_1,value:t.count})),e}));e=_.reduce(e,(function(t,e){return _.isObject(e)&&(t[e.hasc]?t[e.hasc].value+=e.value:t[e.hasc]=e),t}),{});var a=[];_.each(e,(t,e)=>{a.push(t)}),e=a,Highcharts.mapChart(\"sentimentbuzgeo\",{chart:{map:\"countries/id/id-all\",backgroundColor:\"none\"},title:{text:\"\"},mapNavigation:{enabled:!1,buttonOptions:{verticalAlign:\"bottom\"}},colorAxis:{min:0},exporting:{enabled:!1},credits:{enabled:!1},colorAxis:{dataClasses:[{color:\"#C40401\"}]},colorAxis:{min:0,stops:[[0,\"#d5dbde\"],[.5,\"#7f8d96\"],[1,\"#384d5a\"]]},series:[{data:e,name:\"Streams\",states:{hover:{color:\"#85c4b5\"}}}]}),this.update({isLoading:!1})}})})}}))},245:function(t,e,s){s(0).tag2(\"buzzvolume\",'<div style=\"margin-right: 0px;margin-left: 0px;\"> <div class=\"pd-x-25 mg-r--1\"> <h1 class=\"tx-30 tx-uppercase tx-tittle-infg tx-semibold tx-spacing-1 mg-t-20\">BUZZ VOLUME </h1> <h1 class=\"tx-40 tx-light tx-tittle-infg mg-b-0\">{this.sValue[\\'total\\'] ? this.sValue[\\'total\\'].formatMoney(0) : 0}</h1> </div> <div class=\"container\"> <div class=\"row\"> <div class=\"col-md-12\"> <h3 class=\"progress-title tx-greent-infg\">POSITIVE ({this.sValue[\\'positive\\'] ? this.sValue[\\'positive\\'].formatMoney(0) : 0}) </h3> <div class=\"progress positive\"> <div class=\"progress-bar\" riot-style=\"width:{this.persentasedata[\\'positive\\'] < 10 ? 10 :this.persentasedata[\\'positive\\']}%; background:#66ae9b;\"> <span class=\"progress-icon fa fa-thumbs-o-up\"></span> <div class=\"progress-value\"><span>{this.persentasedata[\\'positive\\']}</span>%</div> </div> </div> <h3 class=\"progress-title tx-red-infg\">NEGATIVE ({this.sValue[\\'negative\\'] ? this.sValue[\\'negative\\'].formatMoney(0) : 0})</h3> <div class=\"progress negative\"> <div class=\"progress-bar\" riot-style=\"width:{this.persentasedata[\\'negative\\'] < 10 ? 10 : this.persentasedata[\\'negative\\']}%; background:#dc8c81;\"> <span class=\"progress-icon fa fa-thumbs-o-down\"></span> <div class=\"progress-value\"><span>{this.persentasedata[\\'negative\\']}</span>%</div> </div> </div> <h3 class=\"progress-title tx-orange-infg\">NEUTRAL ({this.sValue[\\'neutral\\'] ? this.sValue[\\'neutral\\'].formatMoney(0) : 0})</h3> <div class=\"progress neutral\"> <div class=\"progress-bar\" riot-style=\"width:{this.persentasedata[\\'neutral\\'] < 10 ? 10 : this.persentasedata[\\'neutral\\']}%; background:#eaa25c;\"> <span class=\"progress-icon fa fa-question-circle\"></span> <div class=\"progress-value\"><span id=\"{this.persentasedata[\\'neutral\\']}\"> {this.persentasedata[\\'neutral\\']}</span>%</div> </div> </div> </div> </div> </div> </div>',\"\",\"\",(function(t){this.sValue=[],this.persentasedata=[],this.sValue.positive=0,this.sValue.negative=0,this.sValue.neutral=0,this.on(\"mount\",()=>{let t=(window.innerHeight-200)/2;this.heightval=t-30,window.innerWidth<500?this.bdRadius=50:this.bdRadius=100,this.update()}),this.render=()=>{this.update_data(),this.renderchartdefault()},this.update_data=()=>{APP.log(\"sentiment : update data\");let t=_.clone(this.parent.search);this.xhrbuzzvolume=APP.apiGet({path:\"mentions/sentiment-count\",data:t,success:t=>{const e=(t=t.items).negative?parseInt(t.negative):0,s=t.positive?parseInt(t.positive):0,i=t.neutral?parseInt(t.neutral):0;return this.total=e+s+i,this.valueNegative=100*t.negative/this.total,this.valuePositive=100*t.positive/this.total,this.valueNeutral=100*t.neutral/this.total,this.persentasedata={negative:parseFloat(this.valueNegative.toFixed(1)),positive:parseFloat(this.valuePositive.toFixed(1)),neutral:parseFloat(this.valueNeutral.toFixed(1))},this.isLoading=!1,this.sValue=t,this.update(),!1}}),this.xhrbuzzvolume.readyState&&this.update({isLoading:!1,persentasedata:{negative:0,positive:0,neutral:0},total:0,sValue:{negative:0,neutral:0,positive:0}})},this.renderchartdefault=()=>{}}))},246:function(t,e,s){\"use strict\";s.r(e);var i=s(1),a=s.n(i);s(0).tag2(\"chartsentiment\",'<div class=\"row\" style=\"height:200px\"> <div class=\"col-xs-6 col-md-6 col-md-6-r10\"> <div class=\"row row-sm \"> <div class=\"col\"> <p class=\"mg-b-0 tx-uppercase tx-15 tx-mont tx-semibold tx-greent-infg\">POSITIVE</p> <p class=\"tx-lato tx-greent-infg tx-normal mg-b-0 tx-80\">{sValue[\\'positive\\']}</p> <span class=\"tx-15 tx-roboto\" riot-style=\"color:{colorsentiment[\\'positive\\']}\"><i class=\"{iconsentiment[\\'positive\\']}\"></i>{sentPersence[\\'positive\\']}%</span> </div> </div> </div> <div class=\"col-xs-6 col-md-6 col-md-6-r10\"> <div class=\"row row-sm \"> <div class=\"col\"> <p class=\"mg-b-0 tx-uppercase tx-15 tx-mont tx-semibold tx-red-infg\">NEGATIVE</p> <p class=\"tx-lato tx-red-infg tx-normal mg-b-0 tx-80\">{sValue[\\'negative\\']}</p> <span class=\"tx-15 tx-roboto\" riot-style=\"color:{colorsentiment[\\'negative\\']}\"><i class=\"{iconsentiment[\\'negative\\']}\"></i>{sentPersence[\\'negative\\']}%</span> </div> </div> </div> </div> <div class=\"row\"> <div class=\"col-md-12\"> <div class=\"card bg-primary-teals bd-0\" riot-style=\"height: {heightval}px;\"> <div class=\"\"> <h6 class=\"tx-15 tx-uppercase tx-medium tx-spacing-1 mg-b-10 tx-tittle-infg\">Daily Statistics</h6> <div id=\"sentimentdaily\" class=\" mg-t-m-30\" riot-style=\"height: {heightval - 30}px;\"> </div> </div> </div> </div> </div> <div class=\"row\"> <div class=\"col-md-12\"> <div class=\"card bg-primary-teals bd-0\"> <div class=\"\"> <h6 class=\"tx-15 tx-uppercase tx-medium tx-spacing-1 mg-b-10 tx-tittle-infg\">Hourly Statistics</h6> <div id=\"sentimenthourly\" class=\"mg-t-m-30\" riot-style=\"height: {heightval - 30}px;\"> </div> </div> </div> </div> </div>',\"\",\"\",(function(t){this.dataProjects=[],this.sValue=[],this.sentPersence=[],this.iconsentiment=[],this.colorsentiment=[],this.persentasedata=[],this.type=\"hourly\",this.chart=null,this.times=[{id:\"hourly\",name:\"Hourly\",selected:!1},{id:\"daily\",name:\"Daily\",selected:!0},{id:\"monthly\",name:\"Monthly\",selected:!1}],this.sentimentall=[{color:\"#66ae9b\",id:\"positive\",nameval:\"positive\",name:\"Positive\",no:1},{color:\"#dc8c81\",id:\"negative\",nameval:\"negative\",name:\"Negative\",no:2}],this.on(\"mount\",()=>{this.heightval=(window.innerHeight-300)/2,this.update()}),this.render=t=>{this.renderdaily(),this.update_data(),this.renderhourly()},this.update_data=()=>{APP.log(\"sentiment : update data\"),this.isLoading=!0,this.update({isLoading:!0});let t=_.clone(this.parent.search);t.limit=\"\",t.page=\"\",t.section=\"positive,negative,neutral\",t.compare=!0,this.xhrbuzzvolume=APP.apiGet({path:\"mentions/sentiment-count\",data:t,success:t=>{t=t.items,this.total=t.total.current?t.total.current:0,this.totalpercent=t.total.movement[1]?t.total.movement[1]:0;const e=t.total.movement[0];this.totalicon=\"up\"===e?\"fa fa-caret-up\":\"down\"===e?\"fa fa-caret-down\":\"fa fa-minus\",this.colorpersent=\"up\"===e?\"#1c770c\":\"down\"===e?\"rgb(220, 53, 69, 0.8)\":\"#d2dc35\",this.sValue.positive=t.positive.current?t.positive.current:0,this.sentPersence.positive=t.positive.movement[1]?t.positive.movement[1]:0;const s=t.positive.movement[0];this.iconsentiment.positive=\"up\"===s?\"fa fa-caret-up\":\"down\"===s?\"fa fa-caret-down\":\"fa fa-minus\",this.colorsentiment.positive=\"up\"===s?\"#1c770c\":\"down\"===s?\"rgb(220, 53, 69, 0.8)\":\"#d2dc35\",this.sValue.negative=t.negative.current?t.negative.current:0,this.sentPersence.negative=t.negative.movement[1]?t.negative.movement[1]:0;const i=t.negative.movement[0];this.iconsentiment.negative=\"up\"===i?\"fa fa-caret-up\":\"down\"===i?\"fa fa-caret-down\":\"fa fa-minus\",this.colorsentiment.negative=\"up\"===i?\"rgb(220, 53, 69, 0.8) \":\"down\"===i?\"#1c770c\":\"#d2dc35\",this.sValue.neutral=t.neutral.current?t.neutral.current:0,this.sentPersence.neutral=t.neutral.movement[1]?t.neutral.movement[1]:0;const a=t.neutral.movement[0];this.iconsentiment.neutral=\"up\"===a?\"fa fa-caret-up\":\"down\"===a?\"fa fa-caret-down\":\"fa fa-minus\",this.colorsentiment.neutral=\"up\"===a?\"#1c770c\":\"down\"===a?\"rgb(220, 53, 69, 0.8)\":\"#d2dc35\",this.update()}})},this.renderdaily=()=>{let t=_.clone(this.parent.search);t.group_service=\"false\",t.project=APP.currentProject,this.renderdata(t,\"daily\",\"sentimentdaily\")},this.renderhourly=()=>{let t=_.clone(this.parent.search);t.group_service=\"false\",t.project=APP.currentProject,this.renderdata(t,\"hourly\",\"sentimenthourly\")},this.renderdata=(t,e,s)=>{t.type=e,this.chart&&this.chart.spacing&&this.chart.destroy(),this.update({Loader:!0});var i=[];async.each(this.sentimentall,(e,s)=>{t.section=e.id;this.chart=APP.apiGet({path:\"mentions\",data:t,success:t=>{t=t.items;let a=[];a=(t=_.sortBy(t,t=>moment(t.date).toDate())).map(t=>[moment(t.date).utc().valueOf(),t.count]),a.length>0&&(this.nodata=!1);var n=0;_.each(a,(t,e)=>{n+=t[1]}),i.push({id:\"response\",shadow:!1,noid:n,name:e.name,nameval:e.nameval,type:\"areaspline\",lineWidth:1,color:e.color,colorval:e.color,fillColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,e.color],[1,Highcharts.Color(e.color).setOpacity(0).get(\"rgba\")]]},marker:{radius:3},data:a}),s()}},(t,e,s)=>{console.log({x:t,y:e,z:s})},s)},()=>{if(!this.nodata){const n=s;this.update({nodata:this.nodata});let o=_.orderBy(i,[\"noid\"],[\"desc\"]);this.chart=a()(n,e,\"#ccc\",!1);for(var t=0;t<=o.length-1;t++)this.chart.addSeries(o[t])}this.update({Loader:!1})})}}))},247:function(t,e,s){s(0).tag2(\"mybrandnegative\",'<div class=\"widget-2\"> <div class=\"card shadowbase overflow-hidden\"> <div class=\"card-header pd-20 bg-transparent borderbottom0 d-block text-center\"> <h4 class=\"panel-body header-title\"> <span class=\"myButtonR10\">NEGATIVE WORDCLOUD</span> </h4> </div> <div class=\"ripple-loader\" if=\"{isLoading}\"></div> <div class=\"card-body pd-10 bd-color-gray-lighter\"> <div class=\"row row-sm\"> <div class=\"col-md-12\"> <div id=\"wordcloud_container \"> <div id=\"wordcloud_canvas \" class=\"table-responslive mg-b-20\"> <div id=\"wordcloud_negative\" riot-style=\"height:{heightval - 150}px; width:100%;\"> </div> </div> </div> </div> </div> <div class=\"row row-sm\"> <div class=\"col-md-4 col-md-4-r10\"> <h4 class=\"header-title\"><span class=\"myButtonR10 streams\">PHRASE </span></h4> <div class=\"accsaved mg-t-10 topwordnegativeinfographic\" each=\"{o,i in topword}\" if=\"{i < 5}\"> {o.phrase}</div> </div> <div class=\"col-md-8 col-md-8-r10\"> <h4 class=\"panel-body header-title\"> <span class=\"myButtonR10 streams\">NEGATIVE STREAMS</span> </h4> <div class=\"panel \" if=\"{isLoading}\"> <div if=\"{isLoading}\" class=\"loader\"></div> <div class=\"panel-body bg-white\"> </div> </div> <div class=\"panel \" if=\"{this.total==0 && !isLoading}\" style=\" min-height: 290px;\"> <div class=\"panel-body bg-white \" style=\"text-align: center;margin-top:3px;\"> No Data </div> </div> <div class=\"panels mg-t-10\" style=\"text-align: -webkit-auto;\" each=\"{items}\"> <div class=\"panel-body streams\" if=\"{!isLoading && this.total != 0}\">{text.substring(0,200)} <br> <a class=\"servicetext\"> {service}</a></div> </div> </div> </div> </div> </div> </div>',\"\",\"\",(function(t){this.isLoading=!0,this.notdata=!1,this.value={},this.xhr=null,this.render=()=>{this.update_data(),this.topwordnegative()},this.update_data=()=>{this.notdata=!1,APP.log(\"wordcloude : render\"),this.update({isLoading:!0});_.find(this.times,{selected:!0});let t=_.clone(this.parent.search);t.section=\"negative\",t.limit=4e3,t.page=0,t.project=p(\"project\"),t.is_total=null,this.xhrWordCloud=APP.apiGet({path:\"mentions/wordcloud\",data:t,success:function(e){let s=e&&e.items&&e.items.negative?e.items.negative:[],i=t.q;if(i)this.streamsnegative(i);else{if(s.length>0)var a=s?s.map(t=>t[0]).slice(0,4).toString().replace(/\\,/g,\" or \"):null;else a=null;this.streamsnegative(a)}var n=_.clone(s);if((n=_.orderBy(n,[1],[\"desc\"])).length>0){this.update({notdata:!1});const t=n[0][1];n.map(e=>{const s=e[0].length,i=parseInt(e[1]);let a=i/t*100;return s>20&&(a=10,i/t*100>60&&(a=i/t*50)),a<15&&(a=25),e[1]=a,e}),$(\"#wordcloud_container\").show(),$(\"#wordcloud_canvas\").removeClass(\"oload\"),$(\"#wordcloud_negative\").show(),WordCloud(\"wordcloud_negative\",{list:n,backgroundColor:\"transparent\",gridSize:Math.round(16*$(\"#wordcloud_negative\").width()/1024),minSize:10,weightFactor:t=>t,shape:\"diamond\",shuffle:!1,rotateRatio:.2,rotationSteps:3})}else this.notdata=!0,$(\"#wordcloud_container\").hide(),$(\"#wordcloud_canvas\").removeClass(\"oload\"),$(\"#wordcloud_negative\").html(\"Empty\"),$(\"#wordcloud_negative\").show();this.update({isLoading:!1})}.bind(this)}),this.xhrWordCloud.readyState&&this.update({isLoading:!1,notdata:!0})},this.topwordnegative=()=>{let t=_.clone(this.parent.search);this.topword=[],t.limit=6,t.page=0,t.section=\"negative\",this.xhrTopWords=APP.apiGet({path:\"mentions/phrase\",data:t,success:t=>{this.total2=t.length,this.topword=t.items,this.update({isLoading:!1})}}),this.xhrTopWords.readyState&&this.update({isLoading:!1,total2:0})},this.streamsnegative=t=>{APP.log(\"render Stream timeline\");const e=_.find(this.times,{selected:!0});let s=_.clone(this.parent.search),i=s.q?s.q:t;s.type=e,s.section=\"negative\",s.limit=3,s.q=i,s.group_service=!1;var a=\"\",n=0;for(let t in s)s[t]&&\"\"!=s[t]&&(a+=n>0?`&${t}=${encodeURIComponent(s[t])}`:`?${t}=${encodeURIComponent(s[t])}`,n++);this.xhrStream=APP.apiPost({path:\"stream\"+a,success:function(t){this.dataImage=t.item.map(t=>t.user.avatar),this.items=t.item,this.total=this.items.length,this.isLoading=!1,this.userLoadingSentiment=void 0,this.update()}.bind(this)}),this.xhrStream.readyState&&this.update({isLoading:!1,total:0})},this.on(\"mount\",()=>{this.heightval=window.innerHeight/2,this.xhrWordCloud=null,this.xhrStream=null,this.xhrTopWords=null}),this.on(\"unmount\",()=>{this.xhrWordCloud&&this.xhrWordCloud.abort(),this.xhrStream&&this.xhrStream.abort(),this.xhrTopWords&&this.xhrTopWords.abort()})}))}}]);","extractedComments":[]}