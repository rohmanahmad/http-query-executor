{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{71:function(t,i,e){e(0).tag2(\"prdash-sentiment\",'<nav class=\"navbar\"> <ul class=\"navbar-nav main-navigation nopadding fullwidth\"> <li class=\"col-xs-4 nav-item sentiment nav-space {\\'active\\': selected} {id}\" id=\"pointer\" each=\"{sentiment}\" onclick=\"{toggle}\"> <a class=\"nav-link\"><span class=\"garis\">{numeral(total ? total:\\'0\\').format(\\'0.00 a\\').replace(\\'.00\\', \\'\\')} <div if=\"{isLoading}\" class=\"loader\"></div> </span> <span class=\"garis\">{name} </span></a> </li> </li> </ul> </nav> <nav class=\"navbar\"> <ul class=\"navbar-nav main-navigation nopadding fullwidth\"> <li class=\"col-xs-6 nav-item sentiment nav-space {\\'active\\': selected} {id}\" id=\"pointer\"> <a class=\"nav-link\"><span class=\"garis\">{numeral(total_online ? total_online:\\'0\\').format(\\'0%\\')} <div if=\"{isLoading}\" class=\"loader\"></div> </span> <span class=\"garis\">Online </span></a> </li> <li class=\"col-xs-6 nav-item sentiment nav-space {\\'active\\': selected} {id}\" id=\"pointer\"> <a class=\"nav-link\"><span class=\"garis\">{numeral(total_offline ? total_offline:\\'0\\').format(\\'0%\\')} <div if=\"{isLoading}\" class=\"loader\"></div> </span> <span class=\"garis\">Offline </span></a> </li> </ul> </nav>',\"\",\"\",(function(t){this.sentiment=[{id:\"positive\",total:0,name:\"Positive\",selected:!0,color:\"count-txt color-green-500\"},{id:\"negative\",total:0,name:\"Negative\",selected:!0,color:\"count-txt color-red-500\"},{id:\"neutral\",total:0,name:\"Netral\",selected:!0,color:\"count-txt color-orange-500\"}],this.toggle=t=>{APP.log(\"prdash-sentiment: toggle\");let i=t.item;i.selected=!i.selected,this.update(),this.Selected()},this.Selected=()=>{if(APP.log(\"prdash-sentiment: Selected\"),\"function\"==typeof t.cb){let i=[];_.forEach(this.sentiment,(function(t){t.selected&&i.push(t.id)})),t.cb(i.toString())}},this.render=t=>{APP.log(\"prdash-sentiment: render\");const i=this.parent.search;i.section=\"\",APP.apiGet({path:\"prdash\",data:i,success:t=>{let e=0,a=0,s=0,n=0,l=0;_.forEach(t,(function(t){const d=i.service_category?i.service_category.split(\",\").map(Number):\"\";d?d.indexOf(t.cat_id)>-1?t.selected=!0:t.selected=!1:t.selected=!0,t.selected&&(e+=t.positive_count,a+=t.negative_count,s+=t.neutral_count,\"online\"===t.cat_type?n+=t.positive_count+t.negative_count+t.neutral_count:l+=t.positive_count+t.negative_count+t.neutral_count)})),_.forEach(this.sentiment,(function(t){\"positive\"===t.id&&(t.total=e),\"negative\"===t.id&&(t.total=a),\"neutral\"===t.id&&(t.total=s)})),this.total_online=n/(n+l),this.total_offline=l/(n+l),this.update()}})},this.renderChannel=t=>{let i=0,e=0,a=0,s=0,n=0;_.forEach(t,(function(t){t.selected&&(i+=t.positive_count,e+=t.negative_count,a+=t.neutral_count,\"online\"===t.cat_type?s+=t.positive_count+t.negative_count+t.neutral_count:n+=t.positive_count+t.negative_count+t.neutral_count)})),_.forEach(this.sentiment,(function(t){\"positive\"===t.id&&(t.total=i),\"negative\"===t.id&&(t.total=e),\"neutral\"===t.id&&(t.total=a)})),this.total_online=s/(s+n),this.total_offline=n/(s+n),this.update()}}))},73:function(t,i,e){\"use strict\";e.r(i);e(5),e(74),e(32);e(0).tag2(\"prdash-stream-timeline\",'<div class=\"row nomargin \"> <div class=\"col-md-6 col-xs-12 header-title\"> TIMELINE MENTIONS </div> <div if=\"{Loading}\" class=\"loadersentiment\"></div> <div class=\" col-md-6 col-xs-12 nopadding\"> <div class=\"holder-drop pull-right\"> <select class=\"form-control form-control-overide pointer\" onchange=\"{changeLimit}\" ref=\"limitPage\"> <option value=\"5\">5</option> <option value=\"10\">10</option> <option value=\"20\">20</option> <option value=\"50\">50</option> <option value=\"100\">100</option> </select> </div> <pagging pagination=\"{pagination}\"></pagging> <div><i class=\" pull-right pointer refres-streams\" onclick=\"{reload}\"><a class=\"btn btn-outline2 btn-info2 refres-streams mrg-top5\"><i class=\"fa fa-refresh\"></i></a> </i> </div> </div> </div> <div class=\"panel\" style=\"height:100px;\" if=\"{isLoading}\"> <div if=\"{isLoading}\" class=\"loader\"></div> <div class=\"panel-body bg-white\"> </div> </div> <div class=\"panel\" style=\"height:100px;\" if=\"{this.total==0}\"> <div class=\"panel-body bg-white \" style=\"text-align: center;margin-top:3px;\"> No Data </div> </div> <div class=\"panel\" style=\"height:100px;\" if=\"{filter}\"> <div if=\"{filter}\" class=\"loader\"></div> <div class=\"panel-body bg-white\"> </div> </div> <prdash-stream-modal ref=\"streamdetail\" cb=\"{setSentiment}\" cb2=\"{delete}\"></prdash-stream-modal> <div if=\"{!isLoading}\" class=\"panel bg-transparent row nomargin \" each=\"{items}\" id=\"setvaleu{_id}\"> <div if=\"{isLoadingset(_id)}\" class=\"loadersentiment\"></div> <div class=\"col-xs-12 holder-timeline {_id} \"> <div class=\"row nomargin {_id}\"> <div class=\"inblock\"> <div class=\"nama \"> <a href=\"{source}\" target=\"_blank\">{user.name}</a></br> </div> <div class=\"tanggal \" style=\"margin-top:0px\"> </br> {service} -{moment(date_format).format(\\' MMMM D, YYYY HH:mm \\')} </div> <div class=\"content \" style=\"text-align: justify;\"> <img alt=\"\" if=\"{images != undefined && images != \\'\\'}\" riot-src=\"{APP.apiImage +((images) ? (images[0] ? images[0].url : \\'\\') : \\'\\')}\" class=\"imgText cursor\" data-toggle=\"modal\" data-target=\"#PRdashboard\" onclick=\"{imgmodalf}\"> <stream-html text=\"{text.substring(0,255)+\\'...\\'}\"></stream-html> <button class=\"selanjutnya pointer\" data-toggle=\"modal\" data-target=\"#SmDetailModal\" onclick=\"{detailStream}\">selengkapnya</button> </div> <br> <div class=\"tanggal\" style=\"margin-top:20px\"> <div class=\"col-md-4\" style=\"margin-left: -10px;\"> <div class=\"texttags\" style=\"float: left;\">Tags: </div> <div class=\"tagsprdasboardAdd\" if=\"{!settotal[_id] || settotal[_id] == 0}\"> - </div> <div class=\"tagsprdasboard\" each=\"{o,i in tagvalue[_id]}\" if=\"{settotal[_id] > 0}\">{o}</div> </div> <div class=\"col-md-4\" style=\"margin-left: -10px;\"> <div class=\"texttags\" style=\"float: left;\">Newstrend: </div> <div class=\"tagsprdasboardAdd\" if=\"{newstrend == ⁗ ⁗ || newstrend == undefined}\"> - </div> <div class=\"tagsprdasboard\" if=\"{newstrend}\">{newstrend}</div> </div> <div class=\"col-md-4\"> <div class=\"buttons-act\" style=\"right:-65%;position: relative;\"> <div class=\"button-single1 {net:(sentiment != null) && sentiment.value == 0} cursor5\" id=\"neutral\" onclick=\"{setSentiment}\"> <i class=\"fa fa-question-circle\" id=\"neutral\"></i> </div> <div class=\"button-single2 {pos:(sentiment != null) && sentiment.value >0} cursor2\" id=\"positive\" onclick=\"{setSentiment}\"> <i class=\"fa fa-thumbs-up\" id=\"positive\"></i> </div> <div class=\"button-single3 {neg:(sentiment != null) && sentiment.value < 0} cursor3\" id=\"negative\" onclick=\"{setSentiment}\"> <i class=\"fa fa-thumbs-down\" id=\"negative\"></i> </div> <div class=\"button-single4 cursor4\" onclick=\"{delete}\"> <i class=\"fa fa-trash\"></i> </div> </div> </div> </div> </div> </div> </div> </div> <div class=\"modal fade\" id=\"PRdashboard\" tabindex=\"-1\"> <div class=\"modal-dialog\" role=\"document\"> <div class=\"modal-content\"> <div class=\"modal-body\"> <img alt=\"\" if=\"{imgmodal != undefined && imgmodal != \\'\\'}\" riot-src=\"{APP.apiImage +((imgmodal) ? (imgmodal[0] ? imgmodal[0].url : \\'\\') : \\'\\')}\" width=\"100%\"></img> </div> <div class=\"modal-footer\"> <div class=\"col-md-12\"> <div type=\"button\" id=\"cancel\" class=\"accsaved pointer pull-right\" data-dismiss=\"modal\">Close</div> </div> </div> </div> </div> </div>',\"\",\"\",(function(t){this.userLoadingSentiment;const i=this;this.search={project:p(\"project\")?p(\"project\"):APP.getProject()},this.data=\"\",this.query={limit:pageLimit,page:0,sort:\"-name\"},this.pagination={page:1,cb:t=>{this.update({Loading:!0}),i.query.page=(t-1)*i.query.limit,i.render()}},this.changeLimit=t=>{APP.log(\"prdash-stream: changeLimit\"),this.update({isLoading:!0}),t.preventDefault(),this.query.limit=parseInt(t.target.value),this.query.page=0,this.pagination.page=1,setTimeout(function(){this.isLoading=!1,this.update()}.bind(this),2e3),this.render()},this.isLoadingset=t=>this.userLoadingSentiment===t,this.imgmodalf=t=>{this.imgmodal=t.item.images},this.on(\"mount\",(function(){APP.log(\"prdash-stream: mount\"),this.isLoading=!0,this.refs.limitPage.value=pageLimit,this.update()})),this.saveData=()=>{APP.log(\"prdash-stream: saveData\"),\"function\"==typeof t.cb&&t.cb()},this.setSentiment=t=>{APP.log(\"prdash-stream: setSentiment\");let i=t.target.id,e=t.item._id;this.userLoadingSentiment=e,this.search.streamid=e,this.search.sentiment=i,APP.apiGet({path:\"prdash/update_sentiment\",data:this.search,success:function(t){$.notify(\"Sentiment changed to \"+this.search.sentiment,\"info\"),this.userLoadingSentiment=void 0,this.saveData(),this.render()}.bind(this)})},this.delete=t=>{APP.log(\"prdash-stream: delete\");t.item._id;swal({title:\"Alert\",text:\"Are you sure you want to delete this stream?\",type:\"warning\",showCancelButton:!0,confirmButtonColor:\"#DD6B55\",closeOnConfirm:!0,confirmButtonText:\"YES \",cancelButtonText:\"NO\"},()=>{let i=t.item._id;this.search.streamid=i,APP.apiGet({path:\"stream/delete_stream\",data:this.search,success:function(t){$(\"#setvaleu\"+i).fadeOut(1600),this.saveData()}.bind(this)}),this.update()})},this.detailStream=t=>{APP.log(\"prdash-stream: detailStream\"),this.refs.streamdetail.render(t.item)},this.render=()=>{APP.log(\"prdash-stream: render\");let t=this,i=this.parent.search;i.limit=this.query.limit,i.page=this.query.page,APP.apiGet({path:\"prdash/streams\",data:i,success:function(i){t.items=i.item,this.total=this.items.length,this.loadTags(t.items),t.pagination.pages=Math.ceil(i.total/this.query.limit),t.isLoading=!1,this.update()}.bind(this)}),this.userLoadingSentiment=void 0,this.isLoad=!1,this.Loading=!1},this.tagvalue={},this.settotal={},this.loadTags=t=>{_.each(t,(function(t,e){t.tags&&(i.tagvalue[t._id]=t.tags,i.settotal[t._id]=i.tagvalue[t._id].length)}))},this.reload=()=>{this.isLoading=!0,this.render()}}))},74:function(t,i,e){e(0).tag2(\"prdash-stream-modal\",'<div class=\"modal fade\" id=\"SmDetailModal\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"myModalLabel\"> <div class=\"modal-dialog\" style=\"width: 80%;\" role=\"document\"> <div class=\"modal-content\"> <div class=\"modal-header panel\"> <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span> </button> <div class=\"row\"> <div class=\"col-md-12\"> <h4 class=\"modal-title\"> </h4> <h5 class=\"item-account-stream\"> <a href=\"{item.source}\" target=\"_blank\">{item.user?item.user.name:\\'\\'}</a> </h5> <i class=\"ion-android-globe icon-source\"></i> <i> {item.service},&nbsp; <i class=\"fa fa-clock-o fsize15\"></i> {moment(date_format).format(\\' MMMM D, YYYY HH:mm \\')} </i> </div> <div class=\"col-md-12\"> <div class=\"col-md-4\" style=\"margin-left: -10px;\"> <div class=\"texttags\" style=\"float: left;\">Tags:</div> <div class=\"tagsprdasboardAdd\" if=\"{!this.totalvalue || this.totalvalue == 0}\"> - </div> <div class=\"tagsprdasboard\" each=\"{o,i in tagvalue}\" if=\"{totalvalue > 0}\">{o}</div> </div> <div class=\"col-md-5\" style=\"margin-left: -10px;\"> <div class=\"texttags\" style=\"float: left;\">Newstrend: </div> <div class=\"tagsprdasboardAdd\" if=\"{item.newstrend == ⁗ ⁗ || item.newstrend == undefined}\"> - </div> <div class=\"tagsprdasboard\" if=\"{item.newstrend}\">{item.newstrend}</div> </div> <div class=\"col-md-3\" style=\"margin-left: -10px;\"> <div class=\"buttons-act hidden-xs\" style=\"right:0px;\"> <div class=\"button-single1 {net:(item.sentiment != null) && item.sentiment.value == 0} cursor5\" id=\"neutral\" onclick=\"{setSentiment}\"> <i class=\"fa fa-question-circle\" id=\"neutral\"></i> </div> <div class=\"button-single2 {pos:(item.sentiment != null) && item.sentiment.value >0} cursor2\" id=\"positive\" onclick=\"{setSentiment}\"> <i class=\"fa fa-thumbs-up\" id=\"positive\"></i> </div> <div class=\"button-single3 {neg:(item.sentiment != null) && item.sentiment.value < 0} cursor3\" id=\"negative\" onclick=\"{setSentiment}\"> <i class=\"fa fa-thumbs-down\" id=\"negative\"></i> </div> <div class=\"button-single4 cursor4\" onclick=\"{delete}\"> <i class=\"fa fa-trash\"></i> </div> </div> <div class=\"visible-xs\"> <div class=\"button-single1 {net:(item.sentiment != null) && item.sentiment.value == 0} cursor5\" id=\"neutral\" onclick=\"{setSentiment}\"> <i class=\"fa fa-question-circle\" id=\"neutral\"></i> </div> <div class=\"button-single2 {pos:(item.sentiment != null) && item.sentiment.value >0} cursor2\" id=\"positive\" onclick=\"{setSentiment}\"> <i class=\"fa fa-thumbs-up\" id=\"positive\"></i> </div> <div class=\"button-single3 {neg:(item.sentiment != null) && item.sentiment.value < 0} cursor3\" id=\"negative\" onclick=\"{setSentiment}\"> <i class=\"fa fa-thumbs-down\" id=\"negative\"></i> </div> <div class=\"button-single4 cursor4\" onclick=\"{delete}\"> <i class=\"fa fa-trash\"></i> </div> </div> </div> </div> </div> </div> <div class=\"modal-body\"> <div if=\"{item.images}\" id=\"img-carousel\" style=\"margin-bottom:20px\" class=\"carousel slide\" data-ride=\"carousel\"> <ol class=\"carousel-indicators\"> <li each=\"{itm,idx in item.images}\" data-target=\"#img-carousel\" data-slide-to=\"{idx}\" class=\"{active:idx==0}\"></li> </ol> <div class=\"carousel-inner\" role=\"listbox\"> <div each=\"{itm,idx in item.images}\" class=\"item {active:idx==0}\"> <img alt=\"\" riot-src=\"{APP.apiImage + itm.url}\" data-src=\"{APP.apiImage + itm.url}\" onerror=\"this.src =\\'http://via.placeholder.com/640x360\\'\" alt=\"{itm.caption}\"> <div class=\"carousel-caption\"> <h3>{itm.captio}</h3> </div> </div> </div> <a class=\"left carousel-control\" href=\"#img-carousel\" role=\"button\" data-slide=\"prev\"> <span class=\"glyphicon glyphicon-chevron-left\" aria-hidden=\"true\"></span> <span class=\"sr-only\">Previous</span> </a> <a class=\"right carousel-control\" href=\"#img-carousel\" role=\"button\" data-slide=\"next\"> <span class=\"glyphicon glyphicon-chevron-right\" aria-hidden=\"true\"></span> <span class=\"sr-only\">Next</span> </a> </div> <div class=\"content full95block \" style=\"margin-left: 0px;width: 100%;\"> <p ref=\"detailtext\" class=\"modalformat\" style=\"margin-left: 0px;\">&nbsp;</p> </div> </div> <div class=\"modal-footer\"> <button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">Close</button> </div> </div> </div> </div>',\"\",\"\",(function(t){this.item={},this.render=t=>{console.log(t.newstrend),t.tags&&(this.tagvalue=t.tags,this.totalvalue=this.tagvalue.length),APP.log(\"prdash-stream-modal: render\"),this.item=t,this.refs.detailtext.innerHTML=t.text,this.update()},this.setSentiment=i=>{APP.log(\"prdash-stream-modal: setSentiment\"),\"function\"==typeof t.cb&&(i.item=this.item,t.cb(i)),$(\"#SmDetailModal\").modal(\"hide\")},this.delete=i=>{APP.log(\"prdash-stream-modal: delete\"),\"function\"==typeof t.cb2&&(i.item=this.item,t.cb2(i)),$(\"#SmDetailModal\").modal(\"hide\")}}))},78:function(t,i,e){e(0).tag2(\"prdash-total\",'<nav class=\"navbar\"> <ul class=\"navbar-nav main-navigation nopadding fullwidth\"> <li class=\"col-xs-12 nav-item sentiment nav-space active positive\"> <a class=\"nav-link\"><span class=\"garis\"><h1>{total}</h1> <div if=\"{isLoading}\" class=\"loader\"></div> </span> <span class=\"garis\"><h1>Total Streams</h1></span></a> </li> </li> </ul> </nav>',\"\",\"\",(function(t){this.render=t=>{this.total=t,this.update()}}))}}]);","extractedComments":[]}