{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{209:function(t,e,i){i(0).tag2(\"channel-cometitive\",'<div class=\"panel bg-grey-50\"> <div class=\"btn-group\"> <button type=\"button\" id=\"ser-cat\" class=\"btn btn-default btn-source {\\'bg-grey-300\\': allSelected}\" onclick=\"{selectAllChannel}\"> <div class=\"ion-earth icon-source\"></div>All <p>{numeral(total).format(\\'0 a\\')}</p> </button> <button type=\"button\" class=\"btn btn-default btn-source {\\'bg-grey-300\\': selected}\" each=\"{channels}\" onclick=\"{selectChannel}\"> <div class=\"{icon} icon-source\"></div>{name} <p>{numeral(count).format(\\'0 a\\')}</p> </button> </div> </div>',\"\",\"\",(function(t){this.total=0,this.allSelected=!0,this.idTO=null,this.channels=[{id:1,name:\"Facebook\",selected:!0,icon:\"ion-social-facebook\",color:\"#425F9C\",count:0},{id:2,name:\"Twitter\",selected:!0,icon:\"ion-social-twitter\",color:\"#00ACEE\",count:0},{id:4,name:\"Blogs\",selected:!0,icon:\"ion-social-rss\",color:\"#000000\",count:0},{id:5,name:\"Forum\",selected:!0,icon:\"ion-android-chat\",color:\"#babcbc\",count:0},{id:3,name:\"News\",selected:!0,icon:\"ion-ios-paper\",color:\"#eda900\",count:0},{id:6,name:\"Video\",selected:!0,icon:\"ion-ios-videocam\",color:\"#b2576e\",count:0},{id:7,name:\"Photo\",selected:!0,icon:\"ion-images\",color:\"#847667\",count:0},{id:8,name:\"Other\",selected:!0,icon:\"ion-ios-keypad\",color:\"#758452\",count:0}],this.selectAllChannel=t=>{t.preventDefault(),clearTimeout(this.idTO);const e=this.allSelected=!this.allSelected;this.channels=_.map(this.channels,t=>(t.selected=e,t)),this.update(),this.idTO=setTimeout(()=>{this.channelSelected()},1250)},this.selectChannel=t=>{APP.log(\"channel-cometitive: selectChannel\"),t.preventDefault(),clearTimeout(this.idTO),t.item.selected=!t.item.selected;const e=_.find(this.channels,{selected:!1});this.allSelected=!e,this.update(),this.idTO=setTimeout(()=>{this.channelSelected()},1250)},this.channelSelected=()=>{if(APP.log(\"channel-cometitive: channelSelected\"),\"function\"==typeof t.cb){const e=this.getChannelSelected();e.length>0&&t.cb(e)}},this.getChannelSelected=()=>{APP.log(\"channel-cometitive: getChannelSelected\");return _.filter(this.channels,t=>t.selected)},this.updateCount=(t,e)=>{APP.log(\"channel-cometitive: updateCount\");const i=_.findIndex(this.channels,{id:t});this.channels[i].count=e,this.total=_.sumBy(this.channels,\"count\"),this.update()},this.on(\"mount\",()=>{APP.log(\"channel-cometitive: mount\"),this.update({total:_.sumBy(this.channels,\"count\")})})}))},210:function(t,e,i){\"use strict\";i.r(e);var n=i(27),s=i.n(n);i(1);i(0).tag2(\"chart-negative\",'<div if=\"{this.nuull}\"> <div class=\"header-title\">NEGATIVE SENTIMENT</div> <div class=\"panel padding-10-20\" if=\"{!notdata}\"> <div class=\"col-md-6\"> </div> <div class=\"col-md-6\"> <div class=\"btn-group pull-right\"> <button onclick=\"{selectTime}\" type=\"button\" style=\"z-index: 901;\" class=\"btn btn-default btn-sm {\\'bg-grey-300\\': selected}\" each=\"{times}\">{name}</button> </div> <i class=\" pull-right pointer\" onclick=\"{reload}\"><a class=\"btn btn-sm btn-outline btn-info \"><i class=\"fa fa-refresh\"></i></a> </i> </div> <div class=\"clearfix\"></div> <div if=\"{isLoading}\" class=\"loader\"></div> <div id=\"chartstream1\" class=\"panel-body bg-white height300\"> </div> </div> </div> <div class=\"panel\" if=\"{notdata}\"> <div class=\"panel-body\"> <div class=\"txtcenter\">No Data </div> </div> </div>',\"\",\"\",(function(t){this.nuull=!0,this.notdata=!1,this.dataProjects=[],this.xhr=null,this.type=\"daily\",this.isExist=!0,this.chartnegative=null,this.isLoading=!0,this.times=[{id:\"hourly\",name:\"Hourly\",selected:!1},{id:\"daily\",name:\"Daily\",selected:!0},{id:\"monthly\",name:\"Monthly\",selected:!1}],this.selectTime=t=>{APP.log(\"chart-negative: selectTime\"),t.preventDefault(),t.item.selected=!0;const e=t.item.id;this.times=_.map(this.times,t=>(t.id!=e&&(t.selected=!1),t)),this.update(),this.render()},this.on(\"mount\",()=>{this.prj=this.parent.data,this.update(),setTimeout(()=>{},3e3)}),this.render=t=>{this.notdata=!1,APP.log(\"chart-negative: render\"),this.xhr=setTimeout(()=>{this.nuull=!0;var e=_.filter(this.parent.dataProjects,(function(t){return t.checked}));const i=_.find(this.times,{selected:!0}).id;let n=_.clone(this.parent.search);n.project=p(\"project\")?p(\"project\"):APP.getProject(),n.type=i;var a=e.map((function(t){return{name:t.name,color:t.color}})),o=_.reduce(a,(function(t,e){return t[e.name]=e.color,t}),{});if(this.update({isLoading:!0}),void 0!==n.section&&\"\"!==n.section&&null!==n.section&&\"negative,neutral,positive\"!==n.section&&\"neutral,negative,positive\"!==n.section&&\"positive,neutral,negative\"!==n.section&&\"neutral,positive,negative\"!==n.section&&\"positive,neutral,negative\"!==n.section&&\"positive,negative,neutral\"!==n.section&&\"negative,neutral\"!==n.section&&\"positive,negative\"!==n.section&&\"negative\"!==n.section)return this.update({isLoading:!1,nuull:!1}),this.nuull=!1,!1;n.section=\"negative\";const c=this.chartnegative=s()(\"chartstream1\",i);this.xhr=APP.apiGet({path:\"stream/brand/mention\",data:n,success:function(e){0===e.length?this.notdata=!0:this.update({notdata:!1});var i=_.groupBy(e,(function(t){return t.brand_name}));i=Object.keys(i).sort().reduce((t,e)=>(t[e]=i[e],t),{});for(let t in i){var n=_.sortBy(i[t],t=>moment(t.date).toDate());if(n=n.map((function(t){return[moment(t.date).utc().valueOf(),t.count,t.brand_name]})),!this.isExist)return;c.addSeries({id:\"response\",shadow:!1,name:t,lineWidth:2,color:o[t],marker:{radius:3},data:n})}this.update({isLoading:!1}),_.isFunction(t)&&t()}.bind(this)})},3e3)},this.reload=()=>{this.Loading=!0,this.render()},this.on(\"mount\",()=>{this.xhr=null}),this.on(\"unmount\",()=>{this.isExist=!1,APP.log(\"chart-negative: unmount\"),this.xhr&&this.xhr.abort(),this.chartnegative&&this.chartnegative.destroy()})}))}}]);","extractedComments":[]}