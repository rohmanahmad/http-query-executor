{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[97],{145:function(t,e,a){a(0).tag2(\"media-distribution\",'<div class=\"card-header pd-20 bg-transparent bb-1\"> <h6 class=\"card-title tx-20 tx-uppercase tx-12 mg-b-0\"> <img src=\"assets/img/image/line-chart-teal.png\" width=\"30\" height=\"30\" class=\"mg-r-5\"> COMPETITION MEDIA DISTRIBUTION </h6> </div> <div class=\"no-gutters widget-1 mg-t-20\"> <div class=\"col-md-12\"> <div class=\"bg-transparent min-height360 \"> <div class=\"bd bd-gray-300 table-striped table-bordered rounded table-responsive\"> <table class=\"table mg-b-0 tx-17-r10\"> <thead> <tr class=\"toptable bg-gray-600\"> <th class=\"tx-white text-center tx-17-r10\">NO</th> <th class=\"tx-white text-center tx-17-r10\">Media Source</th> <th class=\"text-center tx-white tx-17-r10\">Twitter</th> <th class=\"text-center tx-white tx-17-r10\" title=\"Includes Instagram\">Images(IG)</th> <th class=\"text-center tx-white tx-17-r10\">Facebook</th> <th class=\"text-center tx-white tx-17-r10\">Blogs</th> <th class=\"text-center tx-white tx-17-r10\" title=\"Includes Youtube & Tiktok\">Videos</th> <th class=\"text-center tx-white tx-17-r10\">Forums</th> <th class=\"text-center tx-white tx-17-r10\" title=\"Includes Google Search & All News Websites\">News</th> <th class=\"text-center tx-white tx-17-r10\">total</th> </tr> </thead> <tbody> <tr each=\"{o,i in valuedataTable}\" class=\"\"> <td class=\"tx-white bg-gray-600 text-center\">{i+1}</td> <td class=\"tx-white bg-gray-600 text-center\" each=\"{projectfilter}\" if=\"{id == Number(o.prj)}\">{name}</td> <td class=\"text-center tx-black\"><b> {o.Twitter ? o.Twitter : 0}</b></td> <td class=\"text-center tx-black\"><b> {o.Instagram ? o.Instagram :0} </b></td> <td class=\"text-center tx-black\"><b> {o.Facebook ? o.Facebook : 0} </b></td> <td class=\"text-center tx-black\"><b> {o.Blog ? o.Blog : 0} </b> </td> <td class=\"text-center tx-black\"><b> {o.Video ? o.Video : 0} </b></td> <td class=\"text-center tx-black\"><b> {o.Forum ? o.Forum : 0} </b> </td> <td class=\"text-center tx-black\"><b> {o.Portal ? o.Portal : 0} </b> </td> <td class=\"text-center tx-black\"><b> {o.total ? o.total : 0} </b> </td> </tr> <tr class=\"\"> <th class=\"tx-white bg-gray-600\">&nbsp;</th> <th class=\"tx-white bg-gray-600 text-center\">Total</th> <td class=\"text-center tx-black\"> <b> {totalchannelAll[\\'Twitter\\'] || 0} </b> </td> <td class=\"text-center tx-black\"> <b> {totalchannelAll[\\'Instagram\\'] || 0} </b> </td> <td class=\"text-center tx-black\"> <b> {totalchannelAll[\\'Facebook\\'] || 0} </b> </td> <td class=\"text-center tx-black\"> <b> {totalchannelAll[\\'Blog\\'] || 0} </b> </td> <td class=\"text-center tx-black\"> <b> {totalchannelAll[\\'Video\\'] || 0} </b> </td> <td class=\"text-center tx-black\"> <b> {totalchannelAll[\\'Forum\\'] || 0} </b> </td> <td class=\"text-center tx-black\"> <b> {totalchannelAll[\\'Portal\\'] || 0} </b> </td> <td class=\"text-center tx-black\"> <b> {totaldataAll || 0} </b> </td> </tr> <tr class=\"\"> <th class=\"tx-white bg-gray-600\">&nbsp;</th> <td class=\"tx-white bg-gray-600 text-center\">Percentage</td> <td class=\"text-center tx-black\"> <b> {totaldatapersentase[\\'Twitter\\'].formatMoney(2)} % </b> </td> <td class=\"text-center tx-black\"> <b> {totaldatapersentase[\\'Instagram\\'].formatMoney(2)} % </b> </td> <td class=\"text-center tx-black\"> <b> {totaldatapersentase[\\'Facebook\\'].formatMoney(2)} % </b> </td> <td class=\"text-center tx-black\"> <b> {totaldatapersentase[\\'Blog\\'].formatMoney(2)} % </b> </td> <td class=\"text-center tx-black\"> <b> {totaldatapersentase[\\'Video\\'].formatMoney(2)} % </b> </td> <td class=\"text-center tx-black\"> <b> {totaldatapersentase[\\'Forum\\'].formatMoney(2)} % </b> </td> <td class=\"text-center tx-black\"> <b> {totaldatapersentase[\\'Portal\\'].formatMoney(2)} % </b> </td> <td class=\"text-center tx-black\"> <b> 100 % </b> </td> </tr> <tr class=\"tr td th\" if=\"{this.total == 0}\"> <td colspan=\"2\" class=\"txtcenter\">No data found, please input another dates</td> </tr> </tbody> </table> </div> </div> </div> </div>',\"\",\"\",(function(t){this.isLoading=!0,this.totalchannel={},this.totalchannelAll={},this.valuedataTablelenght=0,this.totaldata={},this.totaldatapersentase={Facebook:0,Twitter:0,Instagram:0,Blog:0,Video:0,Forum:0,Portal:0},this.xhr=null,this.render=()=>{APP.log(\"influent-sosial : render\");_.find(this.times,{selected:!0});this.dataarray=[];let t=_.clone(this.parent.search);const e=p(\"project\"),a=document.projectCompetition?document.projectCompetition:\"\",s=decodeURIComponent(`${e},${a}`),r=\"string\"==typeof s?s.split(\",\").map(t=>t.trim()).filter(t=>\"\"!==t).toString():\"\";this.validProjects=r;var i=r.split(\",\");this.update({isLoading:!0}),this.renderchart(r),this.renderTotal(r),async.each(i,(e,a)=>{t.project=e,APP.apiGet({path:\"mentions/composition\",data:t,success:function(t){t=t.items;var s=[];_.each(t,t=>{\"Image\"==t.name&&(t.name=\"Instagram\"),s.push(t)});var r={};_.each(s,t=>{r[t.name]=t.total});let i=0;for(let t in r)i+=r[t];this.totaldata[e]=i,r.total=i,r.prj=e;let c=this.totalchannel[e]=r;this.dataarray.push(c),this.update(),a()}.bind(this)}),this.update({isLoading:!1})},()=>{this.renderproject(),this.valuedataTable=_.orderBy(this.dataarray,[\"total\"],[\"desc\"]),this.valuedataTablelenght=this.valuedataTable.length})},this.renderTotal=t=>{let e=_.clone(this.parent.search);e.project=t,APP.apiGet({path:\"mentions/composition\",data:e,success:t=>{const e=t.items;var a={};_.each(e,t=>{\"Image\"==t.name&&(t.name=\"Instagram\"),a[t.name]=t.total}),this.totalchannelAll=a;let s=0;for(let t in a)s+=a[t];this.totaldataAll=s,this.update()}})},this.renderchart=t=>{APP.log(\"chart share streams : render\"),\"analysis/my-stream..\"==APP.currentHash&&this.update({tombolrefres:!0});let e=_.clone(this.parent.search);e.is_total=null,e.project=t,this.update({isLoading:!0}),\"analysis/my-stream..\"!=APP.currentHash&&(p(\"section\")?e.section=p(\"section\"):e.section=null),this.xhr=APP.apiGet({path:\"stream/shareofstream\",data:e,success:t=>{t=t.items;let e=[],a={Twitter:\"#7dcae8\",Facebook:\"#4267b2\",Blogs:\"#fff9f6\",Forum:\"#eeb64f\",News:\"#39d44c\",Video:\"#ff0400\",Image:\"#9b2db6\",Portal:\"#a77e0c\"};for(const s in t){let r={};r={y:t[s].count,name:s,color:a[s]},e.push(r)}e.map((function(t){return\"Image\"==t.name&&(t.name=\"Instagram\"),\"Portal\"==t.name&&(t.name=\"News\"),t}));0===e.length?this.notdata=!0:this.update({notdata:!1});var s;s=_.sumBy(e,\"y\");var r={};_.each(e,t=>{r[t.name]=t.y}),this.totaldatapersentase={Facebook:100*(r.Facebook||0)/s,Twitter:100*(r.Twitter||0)/s,Instagram:100*(r.Instagram||0)/s,Blog:100*(r.Blog||0)/s,Video:100*(r.Video||0)/s,Forum:100*(r.Forum||0)/s,Portal:100*(r.News||0)/s};let i=0,c=0;for(const t in this.totaldatapersentase)i+=this.totaldatapersentase[t],c+=r[t];this.parent.refs.mediadistributorcahrt.createChart({data:e})}}),this.xhr.readyState&&this.update({isLoading:!1,notdata:!0})},this.renderproject=()=>{APP.apiGet({path:\"projects/list\",data:{selected_fields:\"key_id,key_name,time_add,key_color\"},success:function(t){this.dataproject=t,setTimeout(()=>{this.getproject(t)},1e3),this.update()}.bind(this)})},this.dataProjects=[],this.getproject=t=>{this.dataProjects=[];t=t;const e=this.validProjects.split(\",\").map(Number);_.map(t,(function(t){return{id:t.key_id,date:moment(t.key_start_date).format(\"DD MMMM YYYY\"),name:t.key_name,color:t.key_color}})).forEach(t=>{e.indexOf(t.id)>-1?t.checked=!0:t.checked=!1,this.dataProjects.push(t)}),this.projectfilter=_.filter(this.dataProjects,(function(t){return t.checked})),this.update()},this.reload=()=>{this.Loading=!0,this.render()},this.on(\"mount\",()=>{this.xhr=null}),this.on(\"unmount\",()=>{this.xhr&&this.xhr.abort()})}))},151:function(t,e,a){a(0).tag2(\"compositionbybrand\",'<div class=\"row no-gutters widget-1\"> <div class=\"col-md-12\"> <div class=\"card-header pd-20 bg-transparent\"> <h6 class=\"card-title tx-20 tx-uppercase tx-12 mg-b-0\"> <img src=\"assets/img/image/line-chart-teal.png\" width=\"30\" height=\"30\" class=\"mg-r-5\"> COMPOSITION BY BRAND </h6> </div> <div class=\" pd-y-15 bg-transparent\"> <div class=\"br-section-wrapper stats\"> <div class=\"bd-gray-300 rounded table-responsive\"> <table class=\"table mg-b-0 tx-30-r10 \"> <tbody> <tr class=\"tr td th fontsize20\" each=\"{o,i in valueDataArray}\"> <td class=\" tx-black\"><b>{o.prj}</b></td> <td class=\" tx-black\" style=\"color: #7dcbe9; \"> <i class=\"fa fa-comments\"></i> <b>{o.total ? o.total.formatMoney(0) : o.total}</b></td> <td class=\" tx-black\" style=\"color: #7ee87c; \"> <i class=\"fa fa-thumbs-up\"></i> <b>{o.positive ? o.positive.formatMoney(0) : o.positive}</b></td> <td class=\" tx-black\" style=\"color: #db6a87; \"> <i class=\"fa fa-thumbs-down\"></i> <b>{o.negative ? o.negative.formatMoney(0) : o.negative}</b></td> <td class=\" tx-black\" style=\"color: #f3973e; \"> <i class=\"fa fa-question-circle\"></i> <b>{o.neutral ? o.neutral.formatMoney(0) : o.neutral}</b></td> </tr> <tr class=\"tr td th\" if=\"{this.total == 0}\"> <td colspan=\"2\" class=\"txtcenter\">No data found, please input another dates</td> </tr> </tbody> </table> </div> </div> </div> </div> </div>',\"\",\"\",(function(t){this.cachesentimentmention={},this.cachepositive={},this.cachenegative={},this.cacheneutral={},this.chacetotal={},this.chacereachtotal={},this.render=()=>{let t=_.clone(this.parent.search);this.parent.competitionProjects[0]?this.competitionProjects=_.concat(parseInt([t.project]),this.parent.competitionProjects):this.competitionProjects=[t.project];let e=this.parent.projectList;e?this.createObject(t,e):APP.apiGet({path:\"projects/list?selected_fields=key_id,key_name\",success:t=>{e=t}}).done(()=>{this.parent.projectList=e,this.createObject(t,e)})},this.valueDataArray=[],this.DataArray=[],this.createObject=(t,e)=>{this.prjList={};for(let t in this.competitionProjects){const a=this.competitionProjects[t],s=_.find(e,{key_id:parseInt(a)});s&&s.key_name&&(this.prjList[a]=s.key_name)}var a=this.competitionProjects;async.each(a,(e,a)=>{t.project=e,APP.apiGet({path:\"mentions/sentiment-count\",data:t,success:function(t){const s=(t=t.items).negative?parseInt(t.negative):0,r=t.positive?parseInt(t.positive):0,i=t.neutral?parseInt(t.neutral):0;this.chacetotal[e]=r+s+i,this.cachepositive[e]=r,this.cachenegative[e]=s,this.cacheneutral[e]=i,this.DataArray.push({negative:s,positive:r,neutral:i,total:r+s+i,prj:this.prjList[e]}),this.update(),a()}.bind(this)}),this.update({isLoading:!1})},()=>{let t=_.orderBy(this.DataArray,[\"total\"],[\"desc\"]);this.valueDataArray=t,this.update()})}}))}}]);","extractedComments":[]}