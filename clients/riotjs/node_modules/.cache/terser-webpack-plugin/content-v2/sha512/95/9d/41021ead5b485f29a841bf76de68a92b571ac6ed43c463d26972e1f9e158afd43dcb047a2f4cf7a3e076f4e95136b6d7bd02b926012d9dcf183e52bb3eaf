{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{84:function(t,e,a){\"use strict\";a.r(e);a(18);a(0).tag2(\"shareofvoicesentiment\",'<div class=\"widget-1\"> <div class=\"card shadow-base overflow-hidden\"> <div class=\"card-header bb-1\"> <h6 class=\"card-title\"> <img src=\"assets/img/image/pie-chart-teal.png\" width=\"20\" height=\"20\" class=\"mg-r-5\"> SHARE OF SENTIMENT</h6> <span> <img src=\"assets/img/image/dowload-teal.png\" width=\"20\" height=\"20\" class=\"mg-r-10 cursor-pointer \" data-toggle=\"tooltip\" data-placement=\"top\" title=\"Download\" onclick=\"{downloadcsv}\"> <span class=\"cursor-default\" aria-hidden=\"true\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"Comparison of the total mention about your project to other project of your choosing\">?</span> </span> </div> <div class=\"ripple-loader\" if=\"{isLoading}\"></div> <div class=\"card-body pd-0 bd-color-gray-lighter textcenter mg-t-20 height280\" if=\"{notdata}\"> <div calss=\"textcenter mg-t-20\">No data found, please input another dates</div> </div> <div class=\"card-body pd-10 bd-color-gray-lighter height300 \" id=\"shareofvoicesentiment\" if=\"{!notdata}\"> </div> </div> </div>',\"\",\"\",(function(t){this.chartreemp=null,this.isLoading=!0,this.notdata=!1,this.isExist=!0,this.xhr=null,this.data={},this.render=t=>{APP.apiGet({path:\"projects/list\",data:{selected_fields:\"key_id,key_name\"},success:e=>{this.dataproject=e,setTimeout(()=>{let a=_.clone(this.parent.search);a.section?this.searchsection=a.section:this.searchsection=\"positive,negative,neutral\",this.renderdata(e),_.isFunction(t)&&t()},1e3),this.update()}})};var e=this;this.renderdata=t=>{this.update({isLoading:!0}),APP.log(\"sentiment : update data\"),async.parallel({positive:function(t){a((function(e){t(null,e)}),\"positive\")},negative:function(t){a((function(e){t(null,e)}),\"negative\")},neutral:function(t){a((function(e){t(null,e)}),\"neutral\")}},(e,a)=>{this.update({isLoading:!1,nodata:!1}),this.mapData(a,t)})},this.generateData=t=>{let e=[];_.each(_.groupBy(t,\"brand_name\"),(t,a)=>{let s=_.sumBy(t,\"count\"),i={};return i[a]=s,e.push(i)})},this.mapData=(t,e)=>{if(t){let a=t.positive,i=t.negative,o=t.neutral;\"positive\"==this.searchsection?(a=t.positive,i=[],o=[]):\"negative\"==this.searchsection?(a=[],i=t.negative,o=[]):\"neutral\"==this.searchsection?(a=[],i=[],o=t.neutral):\"neutral,positive\"==this.searchsection||\"positive,neutral\"==this.searchsection?(a=t.positive,i=[],o=t.neutral):\"neutral,negative\"==this.searchsection||\"negative,neutral\"==this.searchsection?(a=[],i=t.negative,o=t.neutral):\"positive,negative\"!=this.searchsection&&\"negative,positive\"!=this.searchsection||(a=t.positive,i=t.negative,o=[]);let n={positive:{},negative:{},neutral:{}};const r={};for(let t in a){const e=a[t].brand_name;n.positive[e]||(n.positive[e]=0),n.positive[e]=n.positive[e]+a[t].count,r[e]||(r[e]=0),r[e]+=a[t].count}for(let t in i){const e=i[t].brand_name;n.negative[e]||(n.negative[e]=0),n.negative[e]=n.negative[e]+i[t].count,r[e]||(r[e]=0),r[e]+=i[t].count}for(let t in o){const e=o[t].brand_name;n.neutral[e]||(n.neutral[e]=0),n.neutral[e]=n.neutral[e]+o[t].count,r[e]||(r[e]=0),r[e]+=o[t].count}this.items=n;const h=p(\"project\"),l=document.projectCompetition?document.projectCompetition:\"\",c=decodeURIComponent(`${h},${l}`),d=e,u=(\"string\"==typeof c?c.split(\",\").map(t=>t.trim()).filter(t=>\"\"!==t).toString():\"\").split(\",\").map(t=>parseInt(t.trim())),m=d.filter(t=>u.indexOf(t.key_id)>=0).map(t=>t.key_name),g=this.searchsection.split(\",\");let v={};for(let t in g){const e=g[t];v[e]=[];for(let t in m){const a=m[t];n[e]||(n[e]={}),n[e][a]||(n[e][a]=0);r[a];const s=n[e][a];v[e].push(s)}}s(v,m,r)}};var a=(t,e)=>{let a=_.clone(this.parent.search);a.section=e,APP.apiGet({path:\"stream/brand/mention\",data:a,success:e=>{t(e.items)}})},s=(t,a,s)=>{var i={positive:\"#6cb17d\",negative:\"#d74943\",neutral:\"#ffb848\"};a.map(t=>s[t]);var o=_.map(t,(t,e)=>({name:e,color:i[e],data:t}));this.update({isLoading:!1}),Highcharts.chart(\"shareofvoicesentiment\",{chart:{type:\"bar\",margin:[20,60]},title:{text:\"\"},xAxis:{categories:a,crosshair:!0,labels:{style:{color:\"#333\",font:\"12px Trebuchet MS, Verdana, sans-serif\",fontWeight:\"bold\"},formatter:function(){return this.value.length>15?this.value.substr(0,15)+\"...\":this.value}}},yAxis:{min:0,labels:{formatter:function(t){return numeral(null!==this.value?this.value:\"0\").format(\"0.00 a\").replace(\".00\",\"\")},style:{color:\"#333\",font:\"12px Trebuchet MS, Verdana, sans-serif\",fontWeight:\"bold\"}},title:{text:\"\"}},tooltip:{enabled:!1},credits:{enabled:!1},navigation:{buttonOptions:{enabled:!1}},legend:{enabled:!0,itemStyle:{color:\"#33333\",fontSize:\"12px\"}},plotOptions:{series:{dataLabels:{enabled:!0,useHTML:!0,formatter:function(){const t=s[this.x],e=(100*this.y/t).formatMoney(1);return\"<span style='z-index:0;position:relative; font-size:12px;'> \"+this.y.formatMoney(0)+`(${e}%)</span>`}},maxPointWidth:100,minPointLength:20,cursor:\"pointer\",events:{click:function(t){var a=JSON.parse(localStorage.projects),s=_.filter(a,(e,a)=>e.key_name==t.point.category),i=s?s[0].key_id:\"\";e.parent.detailmentions(null,t.point.series.name,null,null,null,null,t.point.category,i)}}},column:{stacking:\"percent\",pointPadding:.2,borderWidth:0}},series:o})};this.downloadcsv=()=>{let t={};t.positive=this.items.positive,t.negative=this.items.negative,t.neutral=this.items.neutral;const e=Object.keys(t.positive).map(t=>t);let a=[];for(const s in t){let i={sentiment:s};for(const a of e)i[a]=t[s][a];a.push(i)}a.length>0&&APP.downloadcsv(a,\"share_of_voice_competition_\"+p(\"project\").replace(/,/g,\"_\"),!0)},this.on(\"mount\",()=>{this.xhr=null}),this.on(\"unmount\",()=>{this.isExist=!1,this.xhr&&this.xhr.abort(),this.chartreemp&&this.chartreemp.spacing&&this.chartreemp.destroy()})}))},85:function(t,e,a){\"use strict\";a.r(e);a(8);a(0).tag2(\"twittercomparison\",'<div class=\"card shadow-base bd-0\"> <div class=\"row no-gutters widget-1\"> <div class=\"col-md-12\"> <div class=\"card-header pd-20 bg-transparent\" style=\"border-bottom: 1px solid #eaecf0;\"> <h6 class=\"card-title tx-uppercase mg-b-0 cursor-pointer\" id=\"2\" onclick=\"{valuedataname}\"> <img src=\"assets/img/image/twitter-teal.png\" width=\"20\" height=\"20\" class=\"mg-r-5\" id=\"2\"> TWITTER COMPARISON </h6> <div class=\"btn-group\" role=\"group\" aria-label=\"Basic example\"> <button data-toggle=\"modal\" data-target=\"#modaldemo1\" class=\"btn btn-outline-primary btn-block mg-b-0 mg-t-0 pd-5 mg-r-10 width200 cursor-pointer\">ADD COMPARISON</button> <span> <img src=\"assets/img/image/dowload-teal.png\" width=\"20\" height=\"20\" class=\"mg-l-10 mg-r-5 mg-t-5 cursor-pointer \" data-toggle=\"tooltip\" data-placement=\"top\" title=\"Download\" onclick=\"{downloadcsv}\"> <span class=\"mg-t-5 cursor-default\" aria-hidden=\"true\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"Twitter mentions statistics compared to other projects that you\\'ve chosen\">?</span> </span> </div> </div> <div class=\"card-footer pd-y-15 bg-transparent\"> <div class=\"ripple-loader\" if=\"{isLoading}\"></div> <table class=\"tableresp table table-striped mg-b-0\"> <thead> <tr> <th scope=\"col\">PROJECT NAME</th> <th scope=\"col\" class=\"text-right\">UNIQUE ACCOUNTS</th> <th scope=\"col\" class=\"text-right\">TOP REACH </th> <th scope=\"col\" class=\"text-right\">TOP 10 REACH </th> <th scope=\"col\" class=\"text-right\">REGULAR TWEETS</th> <th scope=\"col\" class=\"text-right\">RETWEETS</th> <th scope=\"col\" class=\"text-right\">AVERAGE EXPOSURE</th> </tr> </thead> <tbody> <tr each=\"{data}\"> <td scope=\"row\" data-label=\"PROJECT NAME\">{name}</td> <td data-label=\"UNIQUE ACCOUNTS\" class=\"text-right\">{unique_account_tw ? unique_account_tw.formatMoney(0) : 0}</td> <td data-label=\"TOP REACH\" class=\"text-right\">{top_reach_tw ? top_reach_tw.formatMoney(0) : 0}</td> <td data-label=\"TOP 10 REACH\" class=\"text-right\">{top_reach10_tw ? top_reach10_tw.formatMoney(0) : 0}</td> <td data-label=\"REGULAR TWEETS\" class=\"text-right\">{regular_tw ? regular_tw.formatMoney(0): 0}</td> <td data-label=\"RETWEETS\" class=\"text-right\">{retweet_tw ? retweet_tw.formatMoney(0) : 0}</td> <td data-label=\"AVERAGE EXPOSURE\" class=\"text-right\">{ae_tw ? Number(ae_tw).formatMoney(0) : 0}</td> </tr> </tbody> </table> </div> </div> </div> </div>',\"\",\"\",(function(t){this.isLoading=!1,this.xhr=null,this.chacheSummary={},this.valuedataname=t=>{let e=t.target.id;this.parent.detailmentions(null,null,e,null,null,null)},this.render=()=>{APP.log(\"number summary : render\");let t=_.clone(this.parent.search);t.type=null,this.update({isLoading:!0});let e=this;APP.log(\"query summary\"),this.xhr=APP.apiGet({path:\"summary/bybrand\",data:t,success:t=>{t=t.items,this.parent.refs.facebookcomparison.renderData(t),this.parent.refs.instagramcomparison.renderData(t),e.data=t,e.update({isLoading:!1})}})},this.downloadcsv=()=>{var t=this.data.map(t=>({Project:t.name,unique_account:t.unique_account_tw?t.unique_account_tw.formatMoney(0):0,top_reach:t.top_reach_tw?t.top_reach_tw.formatMoney(0):0,top_reach10:t.top_reach10_tw?t.top_reach10_tw.formatMoney(0):0,regular_tweet:t.regular_tw?t.regular_tw.formatMoney(0):0,retweet:t.retweet_tw?t.retweet_tw.formatMoney(0):0,average_exposure:t.ae_tw?t.ae_tw.formatMoney(0):0}));t.length>0&&APP.downloadcsv(t,\"Twitter_Comparison_\"+p(\"project\"),!0)},this.on(\"mount\",()=>{this.xhr=null}),this.on(\"unmount\",()=>{this.data=null,this.xhr&&this.xhr.abort(),delete this.data})}))},90:function(t,e,a){\"use strict\";a.r(e);a(16);a(0).tag2(\"top-hastag\",'<menubrand cb=\"{updatemenu}\" ref=\"menuValue\"></menuBrand> <div class=\"row no-gutters widget-1\"> <div class=\"col-md-12\"> <div class=\"card-header pd-20 bg-transparent\"> <h6 class=\"card-title tx-uppercase mg-b-0\"> <img src=\"assets/img/image/hashtag-teal.png\" width=\"20\" height=\"20\" class=\"mg-r-5\"> TOP HASHTAGS</h6> <span> <img src=\"assets/img/image/dowload-teal.png\" width=\"20\" height=\"20\" class=\"cursor-pointer mg-r-10 \" data-toggle=\"tooltip\" data-placement=\"top\" title=\"Download\" onclick=\"{downloadcsv}\"> <span class=\"cursor-default\" aria-hidden=\"true\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"Most frequent hashtags that\\'s used in mentions about your chosen keywords\">?</span> </span> </div> <div class=\"card-footer pd-y-15 bg-transparent\" if=\"{total != 0}\"> <div class=\"ripple-loader\" if=\"{isLoading}\"></div> <table class=\"table table-striped mg-b-0\"> <thead> </thead> <tbody> <tr each=\"{o,i in items}\"> <td class=\"b-t-0 cursor-pointers\" onclick=\"{tophastagsvalue}\">#{o._id.tag}</td> <td class=\"displaytable\"> {o.count.toLocaleString({ minimumFractionDigits: 2 })}</br> <span class=\"tx-11\"> Mention</span> </td> </tr> </tbody> </table> </div> <div class=\"card-footer displayblock textcenter\" if=\"{total == 0}\"> <span> <p>No data found, please input another dates</p> </span> </div> </div>',\"\",\"\",(function(t){this.isLoading=!0,this.isLoadingword=!0,this.chacheTophastag={},this.currentProjectId=null,this.xhr=null,this.isExist=!0,this.tophastagsvalue=t=>{t.item.o._id.tag},this.render=t=>{this.chacheTophastag={},!t&&this.currentProjectId?this.updatemenu(this.currentProjectId):this.updatemenu(t)},this.updatemenu=t=>{if(APP.log(\"top hastags : update menuId\"),null==t){var e=this.refs.menuValue.dataProjects[0].id.toString();(a=_.clone(this.parent.search)).project=e,this.valprj=e}else{_.find(this.times,{selected:!0});var a;(a=_.clone(this.parent.search)).project=t,this.valprj=t}if(this.update({isLoading:!0}),this.chacheTophastag[a.project]){var s=this.chacheTophastag[a.project];this.items=s.items,this.loadtoltiphashtag(this.items),this.total=s.items,this.update({isLoading:!1})}else this.xhr=APP.apiGet({path:\"mentions/hashtags\",data:a,success:function(t){this.isExist&&(this.chacheTophastag[a.project]=t,this.items=t.items,this.loadtoltiphashtag(this.items),this.total=t.items.length,this.update({isLoading:!1}))}.bind(this)});this.currentProjectId=t},this.hasthag={},this.loadtoltiphashtag=t=>{setTimeout(()=>{$('[data-toggle=\"tooltip\"]').tooltip()},1e3)},this.downloadcsv=()=>{var t=this.chacheTophastag[Number(this.valprj)].items.map(t=>({count:t.count,Hashtags:\"\"+t._id.tag}));t.length>0&&APP.downloadcsv(t,\"TopHashtags_\"+this.valprj,!0)},this.on(\"unmount\",()=>{this.isExist=!1,this.chacheTophastag=null,this.chacheTophastagword=null,this.items=null,this.word=null,this.search=null,this.xhr&&this.xhr.abort(),delete this.chacheTophastag,delete this.chacheTophastagword,delete this.items,delete this.word,delete this.search}),this.on(\"mount\",()=>{this.xhr=null})}))},92:function(t,e,a){\"use strict\";a.r(e);var s=a(10),i=a.n(s);a(0).tag2(\"topmention-daily\",'<div class=\"card\"> <menubrand cb=\"{updatemenu}\" ref=\"menuValue\"></menuBrand> <div class=\"card-header bg-transparent d-flex justify-content-between align-items-center\"> <h6 class=\"card-title tx-uppercase tx-12 mg-b-0\"> <img src=\"assets/img/image/clock-teal.png\" width=\"20\" height=\"20\" class=\"mg-r-5\"> TOP MENTION TIME</h6> <span> <img src=\"assets/img/image/dowload-teal.png\" width=\"20\" height=\"20\" class=\"mg-r-10 cursor-pointer \" data-toggle=\"tooltip\" data-placement=\"top\" title=\"Download\" onclick=\"{downloadcsv}\" id=\"{valprj}\"> <span class=\"cursor-default\" aria-hidden=\"true\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"When has the most buzz occured in day and time\">?</span> </span> </div> <div class=\"ripple-loader\" if=\"{isLoading}\"></div> <div class=\"card-body pd-0 bd-color-gray-lighter textcenter mg-t-20\" if=\"{notdata}\"> <div calss=\"textcenter mg-t-20\">No data found, please input another dates</div> </div> <div class=\"card-body pd-0 bd-color-gray-lighter height530\" id=\"topmentionstime\" if=\"{!notdata}\"> </div> </div>',\"\",\"\",(function(t){this.isLoading=!0,this.notdata=!1,this.charttoptime=null,this.currentProjectId=null,this.isExist=!0,this.cacheTopmention={},this.cacheTopmentionval={},this.isExist=!0,this.xhr=null,this.render=t=>{APP.log(\"average-daily: render\"),this.cacheTopmention={},!t&&this.currentProjectId?this.updatemenu(this.currentProjectId):this.updatemenu(t)},this.updatemenu=t=>{if(APP.log(\"average-daily: updatemenu\"),null==t){var e=this.refs.menuValue.dataProjects[0].id.toString();(a=_.clone(this.parent.search)).project=e,this.valprj=e}else{_.find(this.times,{selected:!0});var a;(a=_.clone(this.parent.search)).project=t,this.valprj=t}if(this.cacheTopmention[a.project]){var s=this.cacheTopmention[a.project];this.update({isLoading:!1}),this.dataChart(s,t)}else this.update({isLoading:!0}),this.xhr=APP.apiGet({path:\"mentions/top-mentions-time\",data:a,success:t=>{t=t.items,this.isExist&&(this.cacheTopmention[a.project]=t,this.dataChart(t,a.project),setTimeout(()=>{this.update({isLoading:!1})},500))}});this.currentProjectId=t},this.dataChart=(t,e)=>{let a=[];for(const e in t){let s=_.result(t,e,\"\");a.push([new Date(e.substring(0,10)).getTime(),s.jam,s.count])}if(0===(t=a.length))return this.notdata=!0,!1;this.update({notdata:!1}),this.charttoptime&&this.charttoptime.spacing&&this.charttoptime.destroy(),this.cacheTopmentionval[Number(e)]=a,(this.charttoptime=i()(\"topmentionstime\")).addSeries({color:\"#38a1f2\",data:a})},this.downloadcsv=()=>{let t=Number(this.valprj);var e;(e=this.cacheTopmentionval[t].map((t,e)=>({date:moment(Number(t[0])).format(\"YYYY-MM-DD\"),Jam:t[1]+\" : 00\",Count:t[2]}))).length>0&&APP.downloadcsv(e,\"\"+(\"Top_Mention_time_\"+t),!0)},this.on(\"unmount\",()=>{this.isExist=!1,this.cacheTopmention=null,delete this.cacheTopmention,this.xhr&&this.xhr.abort(),this.charttoptime&&this.charttoptime.spacing&&(this.charttoptime.destroy(),APP.log(\"chart streams : destroy chart\"))}),this.on(\"mount\",()=>{this.xhr=null})}))},93:function(t,e,a){\"use strict\";a.r(e);a(16);a(0).tag2(\"toword\",'<menubrand cb=\"{updatemenu}\" ref=\"menuValue\"></menuBrand> <div class=\"row no-gutters widget-1\"> <div class=\"col-md-12\"> <div class=\"card-header pd-20 bg-transparent\"> <h6 class=\"card-title tx-uppercase mg-b-0\"> <img src=\"assets/img/image/word-teal.png\" width=\"20\" height=\"20\" class=\"mg-r-5\"> TOP WORD</h6> <span> <img src=\"assets/img/image/dowload-teal.png\" width=\"20\" height=\"20\" class=\"cursor-pointer mg-r-10 \" data-toggle=\"tooltip\" data-placement=\"top\" title=\"Download\" onclick=\"{downloadcsv}\"> <span class=\"cursor-default\" aria-hidden=\"true\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"Most frequent words that\\'s used in mentions about your chosen keywords\">?</span> </span> </div> <div class=\"card-footer pd-y-15 bg-transparent\" if=\"{total != 0}\"> <div class=\"ripple-loader\" if=\"{isLoading}\"></div> <table class=\"table table-striped mg-b-0\"> <thead> </thead> <tbody> <tr each=\"{o,i in items}\"> <td class=\"b-t-0 cursor-pointers\" onclick=\"{topWordsvalue}\">{o.key}</td> <td class=\"displaytable \"> <span>{o.length.toLocaleString({ minimumFractionDigits: 2 })} </span></br> <span class=\"tx-11 \"> Mention </span> </td> </tr> </tbody> </table> </div> <div class=\"card-footer displayblock textcenter\" if=\"{total == 0}\"> <span> <p>No data found, please input another dates</p> </span> </div> </div>',\"\",\"\",(function(t){this.isLoading=!0,this.isLoadingword=!0,this.chacheTopword={},this.currentProjectId=null,this.xhr=null,this.isExist=!0,this.topWordsvalue=t=>{t.item.o.key},this.render=t=>{this.chacheTopword={},!t&&this.currentProjectId?this.updatemenu(this.currentProjectId):this.updatemenu(t)},this.updatemenu=t=>{setTimeout(()=>{if(APP.log(\"top hastags : update menuId\"),null==t){var e=(this.refs.menuValue&&this.refs.menuValue.dataProjects[0]&&this.refs.menuValue.dataProjects[0].id).toString();(a=_.clone(this.parent.search)).project=e,this.valprj=e}else{_.find(this.times,{selected:!0});var a;(a=_.clone(this.parent.search)).project=t,this.valprj=t}if(this.update({isLoading:!0}),this.chacheTopword[a.project]){var s=this.chacheTopword[a.project];this.items=s,this.loadtoltiphashtag(this.items),this.total=s,this.update({isLoading:!1})}else this.xhr=APP.apiGet({path:\"stream/brand/topwords\",data:a,success:t=>{t=t.items,this.isExist&&(this.chacheTopword[a.project]=t,this.items=t,this.loadtoltiphashtag(this.items),this.total=t.length,this.update({isLoading:!1,total:t.length}))}});this.currentProjectId=t},500)},this.hasthag={},this.loadtoltiphashtag=t=>{setTimeout(()=>{$('[data-toggle=\"tooltip \"]').tooltip()},1e3)},this.downloadcsv=()=>{var t=this.chacheTopword[Number(this.valprj)].map(t=>({count:t.length,Word:t.key.replace(/#/g,\"-\")}));t.length>0&&APP.downloadcsv(t,\"TopWords_\"+this.valprj,!0)},this.on(\"unmount\",()=>{this.isExist=!1,this.chacheTopword=null,this.chacheTopwordword=null,this.items=null,this.word=null,this.search=null,this.xhr&&this.xhr.abort(),delete this.chacheTopword,delete this.chacheTopwordword,delete this.items,delete this.word,delete this.search}),this.on(\"mount\",()=>{this.xhr=null})}))}}]);","extractedComments":[]}