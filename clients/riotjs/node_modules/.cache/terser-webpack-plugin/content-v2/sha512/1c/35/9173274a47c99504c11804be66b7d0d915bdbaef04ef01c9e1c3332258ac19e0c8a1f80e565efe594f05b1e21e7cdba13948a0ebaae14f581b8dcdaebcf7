{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[68],{206:function(t,i,e){\"use strict\";e.r(i);e(3),e(78),e(79),e(80);e(0).tag2(\"prdashboard\",'<div class=\"page-head bg-grey-100 nopaddingbottm \"> <h1 class=\"header-title nomargin inblock hidden-xs\"> PUBLIC RELATION DASHBOARD</h1> <h1 class=\"header-title nomargin inblock visible-xs\"> PR DASHBOARD</h1> <date-picker cb=\"{updateDate}\" since=\"{localStorage.since}\" until=\"{localStorage.until}\" class=\"btn bg-grey-50 padding-10-20 no-border color-grey-600 pull-right date-style\"></date-picker> </div> <div class=\"container-fluid\"> <div class=\"row\"> <div class=\"col-md-12\"> <prdashchart ref=\"prgraph\"></prdashChart> <div class=\"clearfix\"></div> </div> <div class=\"col-md-8\"> <prdashtimeline ref=\"prstream\"></prdashtimeline> </div> <div class=\"col-md-4\" style=\"margin-top: 50px;\"> <prdash-total ref=\"prsentiment\"></prdash-total> </div> </div> </div>',\"\",\"\",(function(t){this.search={since:null,until:null,project:null,service_category:null,pr_service:!0},this.render=()=>{this.refs.prstream.render(),this.refs.prgraph.render()},this.updateDate=(t,i)=>{APP.log(\"advanced-dashboard : updateDate\"),this.search.since=t,this.search.until=i,this.render()},this.projectId=null,this.on(\"mount\",()=>{APP.log(\"advanced-dashboard : mount\"),urlStream.trigger(\"changeUrl\",\"advanced-analysis/pr-dashboard\"),urlStream.trigger(\"Urlproject\",p(\"project\")?p(\"project\"):APP.getProject()),APP.currentProject=this.search.project=p(\"project\")?p(\"project\"):APP.getProject(),this.update()})}))},32:function(t,i,e){e(0).tag2(\"stream-html\",'<div ref=\"textdetail\"></div>',\"\",\"\",(function(t){this.on(\"mount\",()=>{APP.log(\"stream-html: mount\"),this.refs.textdetail.innerHTML=t.text})}))},79:function(t,i,e){\"use strict\";e.r(i);var a=e(1),s=e.n(a);e(0).tag2(\"prdashchart\",'<div class=\"panel padding-10-20\" if=\"{nodata}\"> <div if=\"{loading}\" class=\"loader\"></div> <div class=\"col-md-6\"> <p class=\"text-light padding-top-10\"><strong>CHART STREAM OF MENTION</strong></p> </div> <div class=\"col-md-6\"> <div class=\"btn-group pull-right\"> <button onclick=\"{selectTime}\" type=\"button\" class=\"btn btn-default btn-sm {\\'bg-grey-300\\': selected}\" each=\"{times}\">{name}</button> </div> </div> <div class=\"clearfix\"></div> <div id=\"pr-ghstream\" class=\"panel-body bg-white height300\"></div> </div> <div class=\"panel txtcenter\" style=\"height:300px;\" if=\"{!nodata}\"> <div class=\"panel-body\">NO DATA</div> <div id=\"pr-ghstream\" class=\"\"></div> </div>',\"\",\"\",(function(t){this.chart=null,window.check=this,this.type=\"daily\",this.nodata=!0,this.loading=!0,this.times=[{id:\"hourly\",name:\"Hourly\",selected:!1},{id:\"daily\",name:\"Daily\",selected:!0},{id:\"monthly\",name:\"Monthly\",selected:!1}],this.prgraph={},this.selectTime=t=>{APP.log(\"prdash-graph: selectTime\"),t.preventDefault(),t.item.selected=!0;const i=t.item.id;this.times=_.map(this.times,t=>(t.id!=i&&(t.selected=!1),t)),this.update(),this.type=i,this.filterproc()},this.datapoints,this.render=()=>{this.loading=!0;let t=this.parent.search;APP.apiGetPR({path:\"report.php?action=lists\",data:t,success:function(t){t.items;this.datapoints=t.items,this.update(),this.filterproc()}.bind(this)}),APP.log(\"prdash-filter: render\")},this.filterproc=()=>{APP.log(\"prdash-filter: filterproc\");var t=this.datapoints;t=_.map(t,t=>{if(\"hourly\"===this.type)var i=moment(t.date_mod).format(\"YYYY-MM-DD HH\");if(\"daily\"===this.type)i=moment(t.date_mod).format(\"YYYY-MM-DD\");if(\"monthly\"===this.type)i=moment(t.date_mod).format(\"YYYY-MM\");let e=null;return e={id:t.rid,date:i,formatdate:moment(t.date_mod).format(\"YYYY-MM-DD\"),date_mod:t.date_mod,count:1},e}).reduce((t,i)=>(_.isObject(i)&&(t[i.date]?t[i.date].count++:t[i.date]=i),t),{});let i=[];_.forEach(t,(function(t,e){i.push([moment(t.formatdate).utc().valueOf(),t.count])}));const e=this.chart=s()(\"pr-ghstream\",this.type);i=_.orderBy(i,[\"x\"]),e.addSeries({id:\"response\",shadow:!1,name:\"Mention\",lineWidth:2,color:\"#1C8348\",marker:{radius:3},data:i}),this.update({loading:!1})}}))},80:function(t,i,e){\"use strict\";e.r(i);e(81),e(77),e(32);e(0).tag2(\"prdashtimeline\",'<div class=\"row nomargin \"> <div class=\"col-md-6 col-xs-12 header-title\"> TIMELINE MENTIONS </div> <div if=\"{Loading}\" class=\"loadersentiment\"></div> <div class=\" col-md-6 col-xs-12 nopadding\"> <div class=\"holder-drop pull-right\"> <select class=\"form-control form-control-overide pointer\" onchange=\"{changeLimit}\" ref=\"limitPage\" style=\"padding: 0\"> <option value=\"5\">5</option> <option value=\"10\">10</option> <option value=\"20\">20</option> <option value=\"50\">50</option> <option value=\"100\">100</option> </select> </div> <pagination pagination=\"{pagination}\"></pagination> </div> </div> <div class=\"panel\" style=\"height:100px;\" if=\"{isLoading}\"> <div if=\"{isLoading}\" class=\"loader\"></div> <div class=\"panel-body bg-white\"> </div> </div> <div class=\"panel\" style=\"height:100px;\" if=\"{this.total==0}\"> <div class=\"panel-body bg-white \" style=\"text-align: center;margin-top:3px;\"> No Data </div> </div> <modal-stream ref=\"streamdetail\" cb=\"{setSentiment}\" cb2=\"{delete}\"></modal-stream> <div if=\"{!isLoading}\" class=\"panel bg-transparent row nomargin \" each=\"{o,i in items}\" id=\"setvaleu{rid}\"> <div class=\"col-xs-12 holder-timeline {rid} \"> <div class=\"row nomargin {rid}\"> <div class=\"inblock\"> <div class=\"nama \"> <a href=\"{source}\" target=\"_blank\">{o.media_name}</a></br> </div> <div class=\"content \" style=\"text-align: justify ; min-height: 0px; \"> {o.title} </div> <div class=\"tanggal \" style=\"margin-top:0px\"> </br> {o.service} -{moment(o.date_format).format(\\' MMMM D, YYYY HH:mm \\')} </div> <div class=\"content \" style=\"text-align: justify;\"> <img alt=\"\" if=\"{o.images != undefined && o.images != \\'\\'}\" riot-src=\"{APP.apiImage +((images) ? (images[0] ? images[0].url : \\'\\') : \\'\\')}\" class=\"imgText cursor\" data-toggle=\"modal\" data-target=\"#PRdashboard\" onclick=\"{imgmodalf}\"> <stream-html text=\"{o.summary.substring(0,1000)+\\'\\'}\"></stream-html> <button class=\"selanjutnya pointer\" data-toggle=\"modal\" data-target=\"#StreamsDetailModal\" onclick=\"{detailStream}\">selengkapnya</button> </div> <br> </div> </div> </div> </div> <div class=\"modal fade\" id=\"PRdashboard\" tabindex=\"-1\"> <div class=\"modal-dialog\" role=\"document\"> <div class=\"modal-content\"> <div class=\"modal-body\"> <img alt=\"\" if=\"{imgmodal != undefined && imgmodal != \\'\\'}\" riot-src=\"{APP.apiImage +((imgmodal) ? (imgmodal[0] ? imgmodal[0].url : \\'\\') : \\'\\')}\" width=\"100%\"></img> </div> <div class=\"modal-footer\"> <div class=\"col-md-12\"> <div type=\"button\" id=\"cancel\" class=\"accsaved pointer pull-right\" data-dismiss=\"modal\">Close</div> </div> </div> </div> </div> </div>',\"\",\"\",(function(t){this.userLoadingSentiment,this.array=!1;const i=this;this.search={project:p(\"project\")?p(\"project\"):APP.getProject()},this.data=\"\",this.query={limit:pageLimit,page:0,sort:\"-name\"},this.pagination={page:1,cb:t=>{this.update({Loading:!0}),i.query.page=(t-1)*i.query.limit,i.render()}},this.changeLimit=t=>{APP.log(\"prdash-stream: changeLimit\"),this.update({isLoading:!0}),t.preventDefault(),this.query.limit=parseInt(t.target.value),this.query.page=0,this.pagination.page=1,setTimeout(function(){this.isLoading=!1,this.update()}.bind(this),2e3),this.render()},this.isLoadingset=t=>this.userLoadingSentiment===t,this.imgmodalf=t=>{this.imgmodal=t.item.images},this.on(\"mount\",(function(){APP.log(\"prdash-stream: mount\"),this.isLoading=!0,this.refs.limitPage.value=pageLimit,this.update(),console.log(APP.apiprdashboard)})),this.saveData=()=>{APP.log(\"prdash-stream: saveData\"),\"function\"==typeof t.cb&&t.cb()},this.detailStream=t=>{this.refs.streamdetail.isLoading=!0,APP.log(\"prdash-stream: detailStream\");let i=this.parent.search;i.limit=this.query.limit,i.page=this.query.page,APP.apiGetPR({path:\"report.php?action=get\",data:i,success:function(i){this.refs.streamdetail.render(t.item.o),this.isLoading=!1,this.update()}.bind(this)})},this.render=()=>{APP.log(\"prdash-stream: render\");let t=this,i=this.parent.search;i.limit=this.query.limit,i.page=this.query.page,APP.apiGetPR({path:\"report.php?action=lists\",data:i,success:function(e){APP.apiGetPR({path:\"report.php?action=get\",data:i,success:function(i){var a=e.items;if(e=_.map(a,t=>{let e=null;return e={rid:t.rid,date_format:moment(t.date_mod).format(\"YYYY-MM-DD HH\"),title:i.items[0].title,media_name:i.items[0].media_name,service:i.items[0].service,summary:i.items[0].summary,service:i.items[0].service},e}),this.pagination.page)var s=(this.pagination.page-1)*this.query.limit,d=s+this.query.limit;this.parent.refs.prsentiment.render(e.length),t.items=e.slice(s,d),this.total=this.items.length,this.pagination.pages=Math.ceil(e.length/this.query.limit),t.isLoading=!1,t.update()}.bind(t)})}}),this.userLoadingSentiment=void 0,this.isLoad=!1,this.Loading=!1},this.reload=()=>{this.isLoading=!0,this.render()}}))}}]);","extractedComments":[]}