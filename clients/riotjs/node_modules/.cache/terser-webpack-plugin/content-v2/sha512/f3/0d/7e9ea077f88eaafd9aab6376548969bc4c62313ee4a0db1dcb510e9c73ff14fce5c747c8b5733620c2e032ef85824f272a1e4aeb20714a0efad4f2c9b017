{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{105:function(t,e,i){i(0).tag2(\"sociograpauthor\",'<div class=\"card bd-0\"> <div class=\"card overflow-hidden\"> <div class=\"card-header bg-transparent d-flex justify-content-between align-items-center\"> <h6 class=\"card-title tx-uppercase tx-12 mg-b-0\"> <img src=\"assets/img/image/share-teal.png\" width=\"20\" height=\"20\" class=\"mg-r-5\"> SOCIOGRAPH AUTHORS </h6> <span> <div class=\"btn-group\" role=\"group\" aria-label=\"Limit\"> <select class=\"btn btn-outline-info btn-icon cursor-pointer mg-r-20\" onchange=\"{changeLimit}\" ref=\"limitPage\"> <option value=\"100\" selected=\"{selected:pagelimitvalue == 100}\">100</option> <option value=\"500\" selected=\"{selected:pagelimitvalue == 500}\">500</option> <option value=\"1000\" selected=\"{selected:pagelimitvalue == 1000}\">1000</option> <option value=\"2000\" selected=\"{selected:pagelimitvalue == 2000}\">2000</option> <option value=\"3000\" selected=\"{selected:pagelimitvalue == 3000}\">3000</option> <option value=\"4000\" selected=\"{selected:pagelimitvalue == 4000}\">4000</option> <option value=\"5000\" selected=\"{selected:pagelimitvalue == 5000}\">5000</option> <option value=\"6000\" selected=\"{selected:pagelimitvalue == 6000}\">6000</option> <option value=\"7000\" selected=\"{selected:pagelimitvalue == 7000}\">7000</option> <option value=\"8000\" selected=\"{selected:pagelimitvalue == 8000}\">8000</option> <option value=\"9000\" selected=\"{selected:pagelimitvalue == 9000}\">9000</option> <option value=\"10000\" selected=\"{selected:pagelimitvalue == 10000}\">10000</option> <option value=\"11000\" selected=\"{selected:pagelimitvalue == 11000}\">11000</option> <option value=\"12000\" selected=\"{selected:pagelimitvalue == 12000}\">12000</option> </select> </div> <img src=\"assets/img/image/dowload-teal.png\" width=\"20\" height=\"20\" class=\"mg-r-15 cursor-pointer \" data-toggle=\"tooltip\" data-placement=\"top\" title=\"Download\" onclick=\"{downloadcsv}\"> <img src=\"assets/img/image/full-screent.png\" width=\"20\" height=\"20\" class=\"mg-r-5 cursor-pointer \" data-toggle=\"tooltip\" data-placement=\"top\" title=\"Full Screen\" onclick=\"{fullscreent}\"> <b class=\"cursor-default mg-l-10 fontweightinherit\" aria-hidden=\"true\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"???\">? </b> </span> </div> <div class=\"card-body pd-0 bd-color-gray-lighter height600 textcenter mg-t-20\" if=\"{total == 0}\"> No data found, please input another dates </div> <div class=\"ripple-loader\" if=\"{isLoading}\"></div> <div class=\"card-body pd-20 bd-color-gray-lighter height600 heightsvgsosiograph\" id=\"sosiographauthor\" if=\"{total != 0}\"> </div> </div> </div> <a id=\"return-to-top-sosiograph\" onclick=\"{outscreentsosiograph}\"><i class=\"fa fa-expand cursor-pointer colorwhite\"></i></a>',\"\",\"\",(function(t){this.renderer=null,this.pagelimitvalue=1e3,this.changeLimit=t=>{APP.log(\"change stream limit\"),this.pagelimitvalue=t.target.value,this.render()},this.render=()=>{let t=_.clone(this.parent.search);t.limit=this.pagelimitvalue,this.update({isLoading:!0}),APP.apiGet({path:\"mentions/sociograph/authors\",data:t,success:function(t){this.dataitems=t.items,t=t.items,this.datarender(t,!0),$('[data-toggle=\"tooltip\"]').tooltip()}.bind(this)})},this.datarender=(t,e)=>{if(_.isNull(this.renderer)||0!=this.total&&this.renderer.dispose(),this.total=t.length,0!=this.total){this.update();var i=t,o=Viva.Graph.graph(),s=Viva.Graph.View.svgGraphics(),a={},r=[],l=50;if(i.length<100)l=2;else if(i.length>100)l=10;else if(i.length>500)l=15;else if(i.length>1e3)l=20;else if(i.length>1500)l=25;else if(i.length>2e3)l=30;else if(i.length>3e3)l=50;l=0,i.forEach(t=>{let e=t.id.split(\".\");e.length>=2&&o.addNode(e[0]);for(let s=0;s<e.length;s++){var i=t.sentiment<0?\"#ff4027\":t.sentiment>0?\"#5dff27\":\"#f3973e\";0===s&&e.length>=2&&o.addLink(e[0],e[1],{retweet_id:t.retweet_id,stream_id:t.stream_id,user_id:t.user_id,sentiment:i,type:t.sentiment}),s<e.length-1&&s>0&&(a[e[s]]||(o.addNode(e[s]),a[e[s]]=!0),a[e[s+1]]||(o.addNode(e[s+1]),a[e[s+1]]=!0),o.addLink(e[s],e[s+1],{retweet_id:t.retweet_id,stream_id:t.stream_id,user_id:t.user_id,sentiment:i,type:t.sentiment}))}});var n=0;o.forEachNode(t=>{n<t.links.length&&(n=t.links.length)}),o.forEachNode(t=>{if(t.links.length<=l){let e=!1;t.links.forEach(t=>{o.getNode(t.toId).links.length>l&&(e=!0)}),e||r.push(t.id)}});var d=function(t,e){o.forEachLinkedNode(t,(function(t,i){var o=s.getLinkUI(i.id);o&&o.attr(\"stroke\",e?\"#999999\":i.data.sentiment)}))};s.node(t=>{let e=Viva.Graph.svg(\"g\");if(t.links.length>4)var i=\"#000\";else i=\"#246a9d\";let o=t.links.length/n*32;o=o<10?10:o;let s=Viva.Graph.svg(\"text\").attr(\"y\",10).attr(\"x\",-10).attr(\"stroke-width\",.5).attr(\"font-size\",o).attr(\"stroke\",i).attr(\"line-stroke\",i).text(t.id);$(e).hover((function(){d(t.id,!0)}),(function(){d(t.id,!1)}));let a=this;return $(e).click((function(){var e=[],i=[];_.each(t.links,(t,o)=>{e.push(t.data.retweet_id),i.push(t.data.stream_id)});var o=[],s=[];e.forEach((function(t){o.indexOf(t)<0&&o.push(t)})),i.forEach((function(t){s.indexOf(t)<0&&s.push(t)})),i=i?i.join(\",\"):null,o=o?o.join(\",\"):null,a.parent.detailmentions(null,null,null,t.id,null,null,\"Author\",null,i,o,!0)})),e.append(s),e}).placeNode((t,e)=>{t.attr(\"transform\",\"translate(\"+e.x+\",\"+(e.y-12)+\")\")}),s.link((function(t){return Viva.Graph.svg(\"path\").attr(\"stroke\",t.data.sentiment)})).placeLink((function(t,e,i){var o=\"M\"+e.x+\",\"+e.y+\"L\"+i.x+\",\"+i.y;t.attr(\"d\",o)})),r.forEach(t=>{o.removeNode(t)});var c=Viva.Graph.Layout.forceDirected(o,{springLength:50,springCoeff:.001,dragCoeff:.09,gravity:-1}),h=Viva.Graph.View.renderer(o,{graphics:s,container:document.getElementById(\"sosiographauthor\")});this.renderer=h;var m=$(\".heightsvgsosiograph\").height(),u=$(\".heightsvgsosiograph\").width();e&&setTimeout(()=>{$(\"#sosiographauthor svg\").css({width:u,height:m})},1),h.run(),setTimeout((function(){h.pause();var t=c.getGraphRect(),e=Math.min(t.x2-t.x1,t.y2-t.y1);!function t(e,i){e<i?(i=h.zoomOut(),setTimeout((function(){t(e,i)}),16)):(setTimeout((function(){h.zoomOut()}),16),setTimeout((function(){h.zoomOut()}),32),setTimeout((function(){h.zoomOut()}),50))}(Math.min($(\"#sosiographauthor\").width(),$(\"#sosiographauthor\").height())/e,1)}),1e4),this.update({isLoading:!1})}else this.update({isLoading:!1})},this.downloadcsv=()=>{var t=this.dataitems;t.length>0&&APP.downloadcsv(t,\"sociograph author\",!0)},this.fullscreent=()=>{$(\"#sosiographauthor svg\").css({display:\"block\",\"z-index\":\"9999\",position:\"fixed\",width:\"100%\",height:\"100%\",top:\"0\",right:\"0\",left:\"0\",bottom:\"0\",overflow:\"auto\",background:\"white\",zoom:\" 100%\"}),this.dataitems.length>0&&$(\"#return-to-top-sosiograph\").fadeIn(200)},this.outscreentsosiograph=()=>{let t=$(\".heightsvgsosiograph\").height(),e=$(\".heightsvgsosiograph\").width();this.datarender(this.dataitems,!0),$(\"#sosiograph svg\").css({width:e,height:t,display:\"\",\"z-index\":\"\",position:\"\",top:\"\",right:\"\",left:\"\",bottom:\"\",overflow:\"\",background:\"\"}),$(\"#return-to-top-sosiograph\").fadeOut(200),this.update()}}))},221:function(t,e,i){\"use strict\";i.r(e);i(3),i(2),i(9),i(105),i(17),i(21),i(44);i(0).tag2(\"dashboard-author\",'<breadcrumb current=\"Dashboard Author\" ref=\"breadcrumb\" mode=\"project\"></breadcrumb> <div class=\"br-pagebody pd-x-20 pd-sm-x-30\"> <div class=\"row\"> <div class=\"col-md-12\"> <div class=\"widget-2\"> <div class=\"card shadow-base overflow-hidden\"> <div class=\"card-header borderbottom0\"> <div class=\"media-body mg-t-10\"> <h4 class=\"tx-normal tx-roboto tx-inverse mg-b-5\">AUTHORS</h4> </div> <button onclick=\"{updatefilternamemodal}\" if=\"{updatefilternamenews}\" data-toggle=\"modal\" data-target=\"#modaldemo3\" class=\"btn {btn-outline-secondary:!colorblue} {btn-primary:colorblue} btn-block mg-b-0 mg-t-0 mg-r-10 width200save cursor-pointer\"> <i class=\"fa fa-floppy-o pstf\"></i> Save This Filter</button> <button onclick=\"{updatefiltername}\" if=\"{!updatefilternamenews}\" class=\"btn {btn-outline-secondary:!colorblue} {btn-primary:colorblue} btn-block mg-b-0 mg-t-0 mg-r-10 width200save {cursor-pointer:!colorblue}\" disabled=\"{disabled:colorblue}\"> <i class=\"fa fa-floppy-o pstf\"></i> Save This Filter</button> <button data-toggle=\"modal\" data-target=\"#modalfilterlist\" onclick=\"{inputfocus}\" class=\"btn btn-outline-primary mg-b-0 mg-t-0 mg-r-10 width200summary cursor-pointer\"><i class=\"mg-r-5 icon ion-funnel\"></i> Filter</button> <button onclick=\"{dowloadcontacts}\" class=\"btn btn-outline-primary btn-block mg-b-0 mg-t-0 mg-r-10 mg-t-0-r10 width100 mobilesbutton cursor-pointer mgt-mobile-max-415\">Export</button> <div class=\"btn-group pull-right mg-r-m-0\" role=\"group\" aria-label=\"Basic example\"> <div class=\"pd-x-25 tx-11 pd-y-12 tx-mont tx-medium datepickerbacgraoud\"> <span> <date-picker cb=\"{updateDate}\" since=\"{localStorage.since}\" until=\"{localStorage.until}\" class=\"fc-datepicker btn bg-grey-50 padding-10-20 no-border color-grey-600 pull-right date-style\" style=\"padding:0px\"></date-picker></span> </div> </div> </div> </div> </div> </div> </div> <filtervalue ref=\"filterformvalue\"></filtervalue> <div class=\"row row-sm\"> <div class=\"col-md-12 mg-t-10\" id=\"sentimentcomposition\"> <sentiment-composition cb=\"{updateSentiment}\"></sentiment-composition> </div> </div> <div class=\"row\"> <div class=\"col-md-12 mg-t-20\"> <sociograpauthor ref=\"sociographauthor\"></sociograpauthor> </div> <div class=\"col-md-12\"> <div class=\"widget-2 mg-t-20\"> <div class=\"card shadow-base overflow-hidden\"> <div class=\"ripple-loader\" if=\"{isLoading}\"></div> <div class=\"card-body pd-0 bd-color-gray-lighter \"> <div class=\"pd-t-20 pd-r-20 pd-b-20 pd-l-20\"> <table class=\"tableresp table table-striped mg-b-0\"> <thead> <tr> <th scope=\"col\" width=\"10\"></th> <th scope=\"col\" width=\"400\">AUTHOR</th> <th scope=\"col\" width=\"30\">SITE </th> <th scope=\"col\" class=\"text-right\" onclick=\"{filtermentions}\">MENTIONS </th> <th scope=\"col\" class=\"text-right\" onclick=\"{filterfollower}\">FOLLOWERS</th> <th scope=\"col\" class=\"text-right\" onclick=\"{filtersentiment}\">SENTIMENT RATE</th> </tr> </thead> <tbody> <tr each=\"{o,i in items}\"> <td scope=\"row\" data-label=\"no\">{i + 1}</td> <td data-label=\"AUTHOR\" onclick=\"{authorvalue}\" class=\"cursor-pointer\"> <img alt=\"\" riot-src=\"{o.profile_pic}\" if=\"{o.profile_pic}\" class=\"wd-30 rounded-circle\" alt=\"Image\" onerror=\"{reqExImg}\" name=\"{o.name}\"> <img alt=\"\" class=\"wd-30 \" if=\"{!o.profile_pic}\" riot-src=\"https://ui-avatars.com/api/?background=0D8ABC&color=fff&length=2&rounded=true&name={o.name}\" onerror=\"{reqExImg}\" name=\"{o.name}\"> {o.name} </td> <td data-label=\"SITE\"> <img alt=\"\" riot-src=\"{this.iconvalue[o.service]}\" width=\"16\" height=\"16\" class=\"center mg-t-0\"> </td> <td data-label=\"POST\" class=\"text-right\">{o.post ? o.post.formatMoney(0) : 0}</td> <td data-label=\"FOLLOWERS\" class=\"text-right\">{o.followers ? o.followers.formatMoney(0) : 0}</td> <td data-label=\"SENTIMENT SCORE\" class=\"text-right\">{o.sentiment_score === ⁗0.00⁗ ? 0 : (o.sentiment_score * 100).toLocaleString(\\'id\\', {minimumFractionDigits: 0, maximumFractionDigits: 1})} %</td> </tr> </tbody> <tfoot if=\"{loadingList}\"> <tr> <td colspan=\"6\" class=\"text-center\">Loading...</td> </tr> </tfoot> </table> </div> </div> <div class=\"card-footer textcenter\" if=\"{total == 0}\"> <p> No data found, please input another dates</p> </div> <div class=\"card-footer textcenter bkcwhite button-center pd-0\"> <button class=\"btn btn-primary active btn-block mg-b-10 mg-r-10 mg-t-10 width100 cursor-pointer\" onclick=\"{showmore}\">Show More</button> </div> </div> </div> </div> </div> <footer class=\"br-footer\"> <div class=\"footer-left\"> </div> <div class=\"footer-right d-flex align-items-center\"> </div> </footer> </div> <div id=\"modalfilterlist\" class=\"modal fade show\"> <div class=\"modal-dialog\" role=\"document\"> <form id=\"myFormid\" method=\"get\" onsubmit=\"{savefilter}\"> <div class=\"modal-content tx-size-sm\"> <div> <filter namefilter=\"false\" ref=\"filterval\"></filter> </div> </div> </form> </div> </div> <div id=\"modaldemo3\" class=\"modal fade show\"> <div class=\"modal-dialog modal-lg wd-40p\" role=\"document\"> <form id=\"myFormid\" method=\"get\" onsubmit=\"{saveFilterBookmark}\"> <div class=\"modal-content tx-size-sm\"> <div class=\"card-body pd-t-20 pd-r-20 pd-l-20 pd-0 mg-b-20\"> <div class=\"row mg-b-20\"> <div class=\"col-sm-12 mg-t-10 mg-sm-t-0 text-center\">Give this a filter name</div> </div> <div class=\"row\"> <div class=\"col-sm-12 mg-t-10 mg-sm-t-0\"> <input type=\"text\" id=\"inputfocusnamevalue\" name=\"inputfokus\" class=\"form-control\" placeholder=\"\" ref=\"nameFilter\"> <p class=\"pd-0 mg-b-0\" if=\"{!error}\">&nbsp;</p> <p class=\"pd-0 mg-b-0 colorred\" if=\"{error}\">This value is required.</p> </div> </div> </div> <div class=\"modal-footer d-block pd-0\"> <div class=\"row\"> <div class=\"col-md-6 pd-r-0\"> <button type=\"button\" class=\"btn btn-outline-secondary wd-100-color-transparant \" onclick=\"{saveFilterBookmark}\"> Save Filter</button> </div> <div class=\"col-md-6 pd-l-0\"> <button type=\"button\" class=\"btn btn-outline-secondary wd-100-color-transparant \" data-dismiss=\"modal\">Cancel</button> </div> </div> </div> </div> </form> </div> </div> <div id=\"modaldetailmentions\" class=\"modal fade show\"> <div class=\"modal-dialog modal-lg\" role=\"document\" style=\"width: 800px;\"> <div class=\"modal-content tx-size-sm\"> <detaimention ref=\"detailmentions\"></detaimention> </div> </div> </div>',\"\",\"\",(function(t){this.updatefilternamenews=!1,this.error=!1,this.colorblue=!1,this.tombolShow=!1,this.items=[],this.search={since:null,until:null,project:null,page:1,limit:10},this.iconvalue={Facebook:\"../assets/img/svg/facebook-grey3.png\",Twitter:\"../assets/img/svg/twitter-grey.png\",Video:\"../assets/img/svg/youtube-grey.png\",Image:\"../assets/img/svg/instagram-grey.png\",Portal:\"../assets/img/svg/news-grey.png\",Blog:\"../assets/img/svg/blogs-grey.png\",Forum:\"../assets/img/svg/chat-grey.png\"},this.updateSentiment=t=>{this.search.section=t,setTimeout(function(){this.render()}.bind(this),100)},this.authorvalue=t=>{$(\"#modaldetailmentions\").modal(\"toggle\");const e=t.item.o.username,i=t.item.o.service;if(\"Facebook\"==i)var o=1;if(\"Twitter\"==i)o=2;if(\"Video\"==i)o=6;if(\"Image\"==i)o=7;if(\"Portal\"==i)o=3;if(\"Blog\"==i)o=4;if(\"Forum\"==i)o=5;let s=o;this.detailmentions(null,null,s,e,null,null,\"Author\",null)},this.detailmentions=(t,e,i,o,s,a,r,l,n,d,c)=>{$(\"#modaldetailmentions\").modal(\"toggle\"),_.isEmpty(this.refs)||this.refs.detailmentions.modalsentimentvalue(t,e,i,o,s,a,r,l,n,d,c)},this.reqExImg=t=>{const e=t.target&&t.target.name?t.target.name:\"n\";t.srcElement.src=\"https://ui-avatars.com/api/?background=0D8ABC&color=fff&length=2&rounded=true&name=\"+e},this.on(\"mount\",()=>{menuActive.trigger(\"activated\",[\"authors\"]),urlStream.trigger(\"changeUrl\",\"authors\"),APP.currentProject=this.search.project=p(\"project\")?p(\"project\"):APP.getProject(),e()}),this.isLoading=!0,this.xhr=null,this.updateDate=(t,e)=>{this.search.since=t,this.search.until=e,setTimeout(function(){this.render(),this.update()}.bind(this),1e3)},this.showmore=()=>{this.search.page+=1,this.getAuthorsList()},this.getAuthorsList=()=>{this.update({loadingList:!0}),this.xhr=APP.apiGet({path:\"summary/authors\",data:this.search,success:t=>{this.update({isLoading:!1}),this.total=t.count,this.items=this.items.concat(t.items),this.update({loadingList:!1})}})},this.render=()=>{APP.log(\"influent-sosial : render\"),this.update({isLoading:!0}),this.refs.sociographauthor.render(),this.getAuthorsList()},this.filtermentions=()=>{this.items=_.orderBy(this.items,[\"post\"],[\"desc\"]),this.update()},this.filterfollower=()=>{this.items=_.orderBy(this.items,[\"followers\"],[\"desc\"]),this.update()},this.filtersentiment=()=>{this.items=_.orderBy(this.items,[\"sentiment_score\"],[\"desc\"]),this.update()},this.inputfocus=()=>{$(\"#modalfilterlist\").on(\"shown.bs.modal\",(function(){$(\"#inputfocusnameauthor\").focus()}))},this.updatefiltername=()=>{var t={name:this.namefiltervalue,keywords:this.search.q,domain:this.search.domain,author:this.search.author,filterbot:this.search.filterbot};!this.refs.filterformvalue.saveshowdropdown&&this.refs.filterformvalue.filtervalue&&this.refs.filterformvalue._id&&APP.apiPost({path:\"bookmark-filter/update/\"+this.refs.filterformvalue._id+\"?project=\"+p(\"project\"),data:t,success:e=>{APP.success(\"sukses\",()=>{this.refs.filterval.updatevaluekey(t),this.search.q=t.keywords,this.search.domain=t.domain,this.search.author=t.author,this.search.filterbot=\"true\"==t.filterbot,this.update(),this.render()})}})},this.updateFilter=t=>{this.refs.filterformvalue.updateFilter(t)},this.saveFilterBookmark=t=>{t.preventDefault(),this.updatenamefilter=this.refs.nameFilter.value,this.updatenamefilter?(this.colorblue=!0,this.refs.filterval.savefilter(t),this.updatefilternamenews=!1,this.update()):(this.error=!0,this.update())},this.updatefilternamemodal=()=>{$(\"#modaldemo3\").on(\"shown.bs.modal\",(function(){$(\"#inputfocusnamevalue\").focus()}))},this.resetFilter=()=>{setTimeout(function(){this.updatefilternamenews=!1,this.refs.filterformvalue.filtervalue=!1,this.render(),this.update()}.bind(this),100)},this.reload=()=>{this.Loading=!0,this.render()},this.on(\"mount\",()=>{this.xhr=null,$(\"body,html\").animate({scrollTop:0},500)}),this.on(\"unmount\",()=>{this.xhr&&this.xhr.abort(),localStorage.removeItem(\"Project_devault\")}),this.dowloadcontacts=()=>{$.notify(\"Download Contact \",\"info\"),this.Loading=!0;let t=this.search;const e=\"download/contacts?type=daily&token=\"+localStorage.AuthToken;var i=APP.apiUrl+e;for(let e in t)t[e]&&t[e].length>0&&(i+=`&${e}=${t[e]}`);this.doDownload(i)},this.doDownload=t=>{window.open(t,\"_blank\")};function e(){for(var t=($(\"#sentimentcomposition\").width()-20)/3,e=document.getElementsByClassName(\"widthsentiment\"),i=0;i<e.length;i++)e[i].style.width=t+\"px\"}window.onload=function(){e()},window.onresize=function(){e()},menu.on(\"sidebar\",t=>{setTimeout(()=>{e()},1e3)})}))}}]);","extractedComments":[]}