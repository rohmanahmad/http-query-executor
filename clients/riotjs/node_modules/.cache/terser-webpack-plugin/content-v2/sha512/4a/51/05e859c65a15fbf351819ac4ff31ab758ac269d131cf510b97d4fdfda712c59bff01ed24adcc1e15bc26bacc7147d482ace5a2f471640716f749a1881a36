{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{171:function(t,e,a){\"use strict\";a.r(e);var s=a(0),i=a(29),o=a.n(i);a(7);a(1).tag2(\"reac-of-mention\",'<div class=\"widget-2 mg-t-10\"> <div class=\"card shadow-base overflow-hidden\"> <div class=\"card-header\"> <h6 class=\"card-title\"> <img src=\"assets/images/components/icons/line-chart-teal.png\" width=\"20\" height=\"20\" class=\"mg-r-5\"> REACH VS MENTIONS </h6> <div class=\"btn-group\" role=\"group\" aria-label=\"Basic example\"> <a onclick=\"{selectTime}\" class=\"btn {active:selected} cursor-pointer\" each=\"{times}\">{name}</a> <img src=\"assets/images/components/icons/dowload-teal.png\" width=\"20\" height=\"20\" class=\"mg-l-10 mg-r-5 mg-t-5 cursor-pointer \" data-toggle=\"tooltip\" data-placement=\"top\" title=\"Download\" onclick=\"{downloadcsv}\"> <span class=\"pd-5 pull-right cursor-default\" aria-hidden=\"true\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"Visual representations of changes in the amount of mentions about your chosen keywords\">?</span> </div> </div> <div class=\"ripple-loader\" if=\"{Loader}\"></div> <tombol-refres cb=\"{refresError}\" if=\"{isLoadingerror}\"></tombol-refres> <div class=\"card-body pd-20 bd-color-gray-lighter height250 textcenter mg-t-0\" if=\"{nodata}\"> No data found, please input another dates </div> <div class=\"card-body pd-10 bd-color-gray-lighter \" if=\"{!nodata}\"> <div class=\"row no-gutters tx-center height250\" id=\"chartreachofmention\"> </div> </div> </div>',\"\",\"\",(function(t){var e=0;this.isLoadingerror=!1,this.type=\"daily\",this.chart=null,this.Loader=!0,this.times=[{id:\"hourly\",name:\"Hourly\",selected:!1},{id:\"daily\",name:\"Daily\",selected:!0},{id:\"monthly\",name:\"Monthly\",selected:!1}],this.mentionreach=[{color:\"#0a95a0\",id:\"mention\",name:\"Mention\",no:1},{color:\"#e27c73\",id:\"reach\",name:\"Reach\",no:2}],this.ajaxChannels=[],this.isExist=!0,this.selectTime=t=>{APP.log(\"chart streams : selecttme\"),t.preventDefault(),t.item.selected=!0;const e=t.item.id;this.times=Object(s.map)(this.times,t=>(t.id!=e&&(t.selected=!1),t)),this.update(),this.render()},this.render=t=>{setTimeout(()=>{$('[data-toggle=\"tooltip\"]').tooltip()},1e3),this.nodata=!0,APP.log(\"chart streams : render\");const a=Object(s.find)(this.times,{selected:!0}).id;let i=Object(s.clone)(this.parent.search);i.group_service=\"false\",i.project=APP.currentProject,i.type=a,this.chart&&this.chart.spacing&&this.chart.destroy(),this.update({Loader:!0});var r=[];async.each(this.mentionreach,(a,o)=>{if(!this.isExist)return!1;i.section=a.id;this.chart=APP.apiGet({path:\"mentions\",data:i,success:t=>{t=t.items;let e=[];e=(t=Object(s.sortBy)(t,t=>moment(t.date).toDate())).map(t=>[moment(t.date).utc().valueOf(),t.count]),e.length>0&&(this.nodata=!1),r.push({id:\"response\",shadow:!1,noid:a.no,name:a.name,type:\"Mention\"==a.name?\"areaspline\":\"column\",lineWidth:1,color:a.color,fillColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,a.color],[1,Highcharts.Color(a.color).setOpacity(0).get(\"rgba\")]]},marker:{radius:3},data:e,yAxis:\"Mention\"==a.name?1:0}),o()},error:a=>{++e<3&&setTimeout(()=>{this.render()},3e3),e>=3&&(this.Loader=!1,this.isLoadingerror=!0,this.update()),Object(s.isFunction)(t)&&t()}},(t,e,a)=>{console.log({x:t,y:e,z:a})},o),this.ajaxChannels.push([])},()=>{if(!this.nodata){const t=\"chartreachofmention\";this.update({nodata:this.nodata}),r=Object(s.orderBy)(r,[\"noid\"],[\"asc\"]),this.data=r,this.chart=o()(t,a,\"#ccc\");for(var e=0;e<=r.length-1;e++)this.chart.addSeries(r[e])}this.update({Loader:!1,isLoadingerror:!1}),Object(s.isFunction)(t)&&t()})},this.downloadcsv=()=>{const t=Object(s.cloneDeep)(this.data).map(t=>t.data.map(e=>({tgl:e[0],tipe:t.name,count:e[1]}))),e=Object(s.flatten)(t),a=Object(s.groupBy)(e,\"tgl\");let i=[];for(let t in a){const e=Object(s.groupBy)(a[t],\"tipe\"),o=Object(s.result)(e,\"Mention[0].count\",0),r=Object(s.result)(e,\"Reach[0].count\",0),n=o+r;i.push({tgl:moment(Number(t)).format(\"YYYY-MM-DD\"),mentions:o,reach:r,total:n})}i.length>0&&APP.downloadcsv(i,\"Reach_vs_mention_\"+p(\"project\"),!0)},this.on(\"mount\",()=>{this.chart=null,setTimeout(()=>{$('[data-toggle=\"tooltip\"]').tooltip()},1e3),this.ajaxChannels=[],this.isExist=!0}),this.on(\"unmount\",()=>{this.isExist=!1,APP.log(\"chart streams : unmount\"),this.chart&&this.chart.spacing&&(this.chart.destroy(),APP.log(\"chart streams : destroy chart\"))}),this.refresError=()=>{this.isLoadingerror=!1,this.Loader=!0,e=0,this.update(),this.render()}}))}}]);","extractedComments":[]}