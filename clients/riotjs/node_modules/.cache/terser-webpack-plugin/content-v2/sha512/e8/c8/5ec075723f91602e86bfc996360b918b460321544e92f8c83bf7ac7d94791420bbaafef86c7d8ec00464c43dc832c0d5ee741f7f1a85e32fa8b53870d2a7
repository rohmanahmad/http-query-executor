{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[107],{124:function(e,t,s){\"use strict\";s.r(t);var i=s(0);s(1).tag2(\"channel-sentiment\",'<div class=\"row\"> <div class=\"col-lg-8\" id=\"channels\"> <a class=\"btn All btn-icon mg-r-5 active mg-t-10 mg-r-10 height120 widthchannels \"> <img alt=\"\" src=\"../assets/img/svg/globe.png\" width=\"40\" height=\"40\" class=\"center displayinitial mg-t-10\"> <p class=\"tx-10 mg-t-10\">ALL</p> <p class=\"tx-14 mg-t-m-10\" if=\"{!isLoading}\">{total ? total.formatMoney(0) : 0}</p> <p if=\"{isLoading}\" class=\"mg-t-m-10\"><img alt=\"\" src=\"../assets/img/loading.svg\" width=\"20\" height: 12></img> </p> </a> <a class=\"btn {name} btn-icon mg-r-5 active mg-t-10 mg-r-10 height120 widthchannels\" each=\"{channels}\"> <img alt=\"\" riot-src=\"{icon}\" width=\"40\" height=\"40\" class=\"center displayinitial mg-t-10\"> <p class=\"tx-10 mg-t-10\"> {name}</p> <p class=\"tx-14 mg-t-m-10 \" if=\"{!isLoading}\">{count ? count.formatMoney(0) : 0}</p> <p if=\"{isLoading}\" class=\"mg-t-m-10\"><img alt=\"\" src=\"../assets/img/loading.svg\" width=\"20\" height: 12></img> </p> </a> </div> <div class=\"col-md-4 col-sm-6\" id=\"sentiment\"> <a each=\"{sentiment}\" class=\"btn {name} btn-icon mg-r-5 active mg-t-10 {name}mg-r height120 mg-r-10 widthsentiment\"> <img alt=\"\" riot-src=\"{icon}\" width=\"45\" height=\"45\" class=\"center displayinitial mg-t-10\"> <p class=\"tx-10 mg-t-7\">{name}</p> <p class=\"tx-14 mg-t-m-10\" if=\"{!isLoading}\">{this.sValue[id] ? this.sValue[id].formatMoney(0) : 0}</p> <p class=\"mg-t-m-10\" if=\"{isLoading}\"><img alt=\"\" src=\"../assets/img/loading.svg\" width=\"20\" height: 12></img> </p> </a> </div> </div>',\"\",\"\",(function(e){function t(){var e=$(\"#channels\").width(),t=(e-80)/8;if(e<673)t=64;for(var s=document.getElementsByClassName(\"widthchannels\"),i=0;i<s.length;i++)s[i].style.width=t+\"px\";var n=($(\"#sentiment\").width()-30)/3,a=document.getElementsByClassName(\"widthsentiment\");for(i=0;i<a.length;i++)a[i].style.width=n+\"px\"}this.isLoading=!0,this.idTO=null,this.Selected=!0,this.sValue=[],this.sentiment=[{id:\"neutral\",total:null,name:\"Neutral\",selected:!0,color:\"count-txt color-orange-500\",icon:\" fa fa-question-circle\",icon:\"../assets/img/svg/help-grey.png\"},{id:\"positive\",total:null,name:\"Positive\",selected:!0,color:\"count-txt color-green-500\",icon:\"fa fa-thumbs-up\",icon:\"../assets/img/svg/thumbs-up-grey.png\"},{id:\"negative\",total:null,name:\"Negative\",selected:!0,color:\"count-txt color-red-500\",icon:\"fa fa-thumbs-down\",icon:\"../assets/img/svg/thumbs-down-grey.png\"}],this.total=0,this.allSelected=!0,this.idTO=null,this.channels=[{id:1,name:\"Facebook\",idname:\"Facebook\",selected:!1,checked:!1,icon:\"../assets/img/svg/facebook-grey3.png\",color:\"#425f9c\",count:0,act:\"fb\"},{id:2,name:\"Twitter\",idname:\"Twitter\",selected:!1,checked:!1,icon:\"../assets/img/svg/twitter-grey.png\",color:\"#00acee\",count:0,act:\"twitter\"},{id:4,name:\"Blogs\",idname:\"Blogs\",selected:!1,checked:!1,icon:\"../assets/img/svg/blogs-grey.png\",color:\"#fe6800\",count:0,act:\"blog\"},{id:5,name:\"Forum\",idname:\"Forum\",selected:!1,checked:!1,icon:\"../assets/img/svg/chat-grey.png\",color:\"#eeb64f\",count:0,act:\"forum\"},{id:3,name:\"News\",idname:\"News\",selected:!1,checked:!1,icon:\"../assets/img/svg/news-grey.png\",color:\"#39a6dd\",count:0,act:\"news\"},{id:6,name:\"Video\",idname:\"vidio\",selected:!1,checked:!1,icon:\"../assets/img/svg/youtube-grey.png\",color:\"#ff0400\",count:0,act:\"video\"},{id:7,name:\"Instagram\",idname:\"image\",selected:!1,checked:!1,icon:\"../assets/img/svg/instagram-grey.png\",color:\"#9b2db6\",count:0,act:\"photo\"}],this.on(\"mount\",()=>{this.parent.search.section=null,this.getavailableChannel(),this.update({total:Object(i.sumBy)(this.channels,\"count\")}),this.validateChannel()}),this.render=()=>{APP.log(\"sentiment : render\"),this.update_data(),this.getavailableChannel()},this.update_data=()=>{APP.log(\"sentiment : update data\"),this.isLoading=!0,this.update({isLoading:!0});let e=Object(i.clone)(this.parent.search);e.project=p(\"project\")?p(\"project\"):APP.getProject(),p(\"section\")?e.section=p(\"section\"):e.section=null;APP.apiGet({path:\"mentions/sentiment-count\",data:e,success:function(e){this.isLoading=!1,this.sValue=e.items,this.update()}.bind(this)}).readyState&&(this.sValue={positive:0,negative:0,neutral:0},this.update())},this.getavailableChannel=()=>{APP.apiGet({path:\"auth/get-restriction\",data:{type:\"channels\"},success:function(e){localStorage.getItem(\"channels\")?localStorage.channels=e:localStorage.setItem(\"channels\",e),this.maxkeyword=e,this.update()}.bind(this)})},this.validateChannel=()=>{if(localStorage.menu)var e=localStorage.channels;else if(JSON.parse(localStorage.getItem(\"package\")))e=JSON.parse(localStorage.getItem(\"package\")).channels;if(e){var t=[],s=Object(i.each)(e,e=>{const s=Object(i.findIndex)(this.channels,[\"id\",parseInt(e)]);s>-1?(this.channels[s].checked=!0,this.channels[s].selected=!0):this.channels.length<7&&(this.channels[s].checked=!1,this.channels[s].selected=!1),t.push(this.channels[s])}),n=Object(i.filter)(s,(function(e){return e.selected}));const a=Object(i.map)(n,e=>e.id);this.parent.search.service_category=a.join(\",\"),this.parent.search.group_service=!1}else{t=[];Object(i.each)(this.channels,e=>{e.checked=!0,e.selected=!0,t.push(e)})}},this.getChannelSelected=()=>Object(i.filter)(this.channels,e=>e.selected),this.updateCount=e=>{t();let s=!1;this.parent.refs.channel.sentiment.map(e=>e.selected).indexOf(!0)<0&&(s=!0);for(let t in this.channels){const i=this.channels[t].id;this.channels[t].name;this.channels[t].count=0;for(let n in e)n==i&&(this.channels[t].count=s?0:e[n])}const n=Object(i.filter)(this.channels,(function(e){return e.selected}));this.total=Object(i.sumBy)(n,\"count\"),maxStreams.trigger(\"maxstreams\",this.total),s&&(this.total=0),this.isLoading=!1,this.update()},window.onload=function(){t()},window.onresize=function(){t()}}))}}]);","extractedComments":[]}