{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[71],{62:function(e,t,i){\"use strict\";i.r(t);var a=i(0);i(1).tag2(\"sociograpauthor\",'<div class=\"card bd-0\"> <div class=\"card overflow-hidden\"> <div class=\"card-header bg-transparent d-flex justify-content-between align-items-center\"> <h6 class=\"card-title tx-uppercase tx-12 mg-b-0\"> <img src=\"assets/images/components/icons/share-teal.png\" width=\"20\" height=\"20\" class=\"mg-r-5\"> SOCIOGRAPH AUTHORS </h6> <span> <div class=\"btn-group\" role=\"group\" aria-label=\"Limit\"> <select class=\"btn btn-outline-info btn-icon cursor-pointer mg-r-20\" onchange=\"{changeLimit}\" ref=\"limitPage\"> <option value=\"100\" selected=\"{selected:pagelimitvalue == 100}\">100</option> <option value=\"500\" selected=\"{selected:pagelimitvalue == 500}\">500</option> <option value=\"1000\" selected=\"{selected:pagelimitvalue == 1000}\">1000</option> <option value=\"2000\" selected=\"{selected:pagelimitvalue == 2000}\">2000</option> <option value=\"3000\" selected=\"{selected:pagelimitvalue == 3000}\">3000</option> <option value=\"4000\" selected=\"{selected:pagelimitvalue == 4000}\">4000</option> <option value=\"5000\" selected=\"{selected:pagelimitvalue == 5000}\">5000</option> <option value=\"6000\" selected=\"{selected:pagelimitvalue == 6000}\">6000</option> <option value=\"7000\" selected=\"{selected:pagelimitvalue == 7000}\">7000</option> <option value=\"8000\" selected=\"{selected:pagelimitvalue == 8000}\">8000</option> <option value=\"9000\" selected=\"{selected:pagelimitvalue == 9000}\">9000</option> <option value=\"10000\" selected=\"{selected:pagelimitvalue == 10000}\">10000</option> <option value=\"11000\" selected=\"{selected:pagelimitvalue == 11000}\">11000</option> <option value=\"12000\" selected=\"{selected:pagelimitvalue == 12000}\">12000</option> </select> </div> <img src=\"assets/images/components/icons/dowload-teal.png\" width=\"20\" height=\"20\" class=\"mg-r-15 cursor-pointer \" data-toggle=\"tooltip\" data-placement=\"top\" title=\"Download\" onclick=\"{downloadcsv}\"> <img src=\"assets/images/components/icons/full-screent.png\" width=\"20\" height=\"20\" class=\"mg-r-5 cursor-pointer \" data-toggle=\"tooltip\" data-placement=\"top\" title=\"Full Screen\" onclick=\"{fullscreent}\"> <b class=\"cursor-default mg-l-10 fontweightinherit\" aria-hidden=\"true\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"???\">? </b> </span> </div> <div class=\"card-body pd-0 bd-color-gray-lighter height600 textcenter mg-t-20\" if=\"{total == 0}\"> No data found, please input another dates </div> <div class=\"ripple-loader\" if=\"{isLoading}\"></div> <div class=\"card-body pd-20 bd-color-gray-lighter height600 heightsvgsosiograph\" id=\"sosiographauthor\" if=\"{total != 0}\"> </div> </div> </div> <a id=\"return-to-top-sosiograph\" onclick=\"{outscreentsosiograph}\"><i class=\"fa fa-expand cursor-pointer colorwhite\"></i></a>',\"\",\"\",(function(e){this.renderer=null,this.pagelimitvalue=1e3,this.changeLimit=e=>{APP.log(\"change stream limit\"),this.pagelimitvalue=e.target.value,this.render()},this.render=()=>{let e=Object(a.clone)(this.parent.search);e.limit=this.pagelimitvalue,this.update({isLoading:!0}),APP.apiGet({path:\"mentions/sociograph/authors\",data:e,success:function(e){this.dataitems=e.items,e=e.items,this.datarender(e,!0),$('[data-toggle=\"tooltip\"]').tooltip()}.bind(this)})},this.datarender=(e,t)=>{if(Object(a.isNull)(this.renderer)||0!=this.total&&this.renderer.dispose(),this.total=e.length,0!=this.total){this.update();var i=e,o=Viva.Graph.graph(),s=Viva.Graph.View.svgGraphics(),n={},l=[],r=50;if(i.length<100)r=2;else if(i.length>100)r=10;else if(i.length>500)r=15;else if(i.length>1e3)r=20;else if(i.length>1500)r=25;else if(i.length>2e3)r=30;else if(i.length>3e3)r=50;r=0,i.forEach(e=>{let t=e.id.split(\".\");t.length>=2&&o.addNode(t[0]);for(let a=0;a<t.length;a++){var i=e.sentiment<0?\"#ff4027\":e.sentiment>0?\"#5dff27\":\"#f3973e\";0===a&&t.length>=2&&o.addLink(t[0],t[1],{retweet_id:e.retweet_id,stream_id:e.stream_id,user_id:e.user_id,sentiment:i,type:e.sentiment}),a<t.length-1&&a>0&&(n[t[a]]||(o.addNode(t[a]),n[t[a]]=!0),n[t[a+1]]||(o.addNode(t[a+1]),n[t[a+1]]=!0),o.addLink(t[a],t[a+1],{retweet_id:e.retweet_id,stream_id:e.stream_id,user_id:e.user_id,sentiment:i,type:e.sentiment}))}});var d=0;o.forEachNode(e=>{d<e.links.length&&(d=e.links.length)}),o.forEachNode(e=>{if(e.links.length<=r){let t=!1;e.links.forEach(e=>{o.getNode(e.toId).links.length>r&&(t=!0)}),t||l.push(e.id)}});var h=function(e,t){o.forEachLinkedNode(e,(function(e,i){var a=s.getLinkUI(i.id);a&&a.attr(\"stroke\",t?\"#999999\":i.data.sentiment)}))};s.node(e=>{let t=Viva.Graph.svg(\"g\");if(e.links.length>4)var i=\"#000\";else i=\"#246a9d\";let o=e.links.length/d*32;o=o<10?10:o;let s=Viva.Graph.svg(\"text\").attr(\"y\",10).attr(\"x\",-10).attr(\"stroke-width\",.5).attr(\"font-size\",o).attr(\"stroke\",i).attr(\"line-stroke\",i).text(e.id);$(t).hover((function(){h(e.id,!0)}),(function(){h(e.id,!1)}));let n=this;return $(t).click((function(){var t=[],i=[];Object(a.each)(e.links,(e,a)=>{t.push(e.data.retweet_id),i.push(e.data.stream_id)});var o=[],s=[];t.forEach((function(e){o.indexOf(e)<0&&o.push(e)})),i.forEach((function(e){s.indexOf(e)<0&&s.push(e)})),i=i?i.join(\",\"):null,o=o?o.join(\",\"):null,n.parent.detailmentions(null,null,null,e.id,null,null,\"Author\",null,i,o,!0)})),t.append(s),t}).placeNode((e,t)=>{e.attr(\"transform\",\"translate(\"+t.x+\",\"+(t.y-12)+\")\")}),s.link((function(e){return Viva.Graph.svg(\"path\").attr(\"stroke\",e.data.sentiment)})).placeLink((function(e,t,i){var a=\"M\"+t.x+\",\"+t.y+\"L\"+i.x+\",\"+i.y;e.attr(\"d\",a)})),l.forEach(e=>{o.removeNode(e)});var c=Viva.Graph.Layout.forceDirected(o,{springLength:50,springCoeff:.001,dragCoeff:.09,gravity:-1}),p=Viva.Graph.View.renderer(o,{graphics:s,container:document.getElementById(\"sosiographauthor\")});this.renderer=p;var g=$(\".heightsvgsosiograph\").height(),u=$(\".heightsvgsosiograph\").width();t&&setTimeout(()=>{$(\"#sosiographauthor svg\").css({width:u,height:g})},1),p.run(),setTimeout((function(){p.pause();var e=c.getGraphRect(),t=Math.min(e.x2-e.x1,e.y2-e.y1);!function e(t,i){t<i?(i=p.zoomOut(),setTimeout((function(){e(t,i)}),16)):(setTimeout((function(){p.zoomOut()}),16),setTimeout((function(){p.zoomOut()}),32),setTimeout((function(){p.zoomOut()}),50))}(Math.min($(\"#sosiographauthor\").width(),$(\"#sosiographauthor\").height())/t,1)}),1e4),this.update({isLoading:!1})}else this.update({isLoading:!1})},this.downloadcsv=()=>{var e=this.dataitems;e.length>0&&APP.downloadcsv(e,\"sociograph author\",!0)},this.fullscreent=()=>{$(\"#sosiographauthor svg\").css({display:\"block\",\"z-index\":\"9999\",position:\"fixed\",width:\"100%\",height:\"100%\",top:\"0\",right:\"0\",left:\"0\",bottom:\"0\",overflow:\"auto\",background:\"white\",zoom:\" 100%\"}),this.dataitems.length>0&&$(\"#return-to-top-sosiograph\").fadeIn(200)},this.outscreentsosiograph=()=>{let e=$(\".heightsvgsosiograph\").height(),t=$(\".heightsvgsosiograph\").width();this.datarender(this.dataitems,!0),$(\"#sosiograph svg\").css({width:t,height:e,display:\"\",\"z-index\":\"\",position:\"\",top:\"\",right:\"\",left:\"\",bottom:\"\",overflow:\"\",background:\"\"}),$(\"#return-to-top-sosiograph\").fadeOut(200),this.update()}}))}}]);","extractedComments":[]}