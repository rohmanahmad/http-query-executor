{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{125:function(t,e,i){\"use strict\";i.r(e);var a=i(0);i(1).tag2(\"chart-daily-mention\",'<div class=\"widget-2 mg-t-20\"> <div class=\"card shadowbase overflow-hidden\"> <div class=\"card-header pd-20 bg-transparent bb-1\"> <h6 class=\"card-title tx-20 tx-uppercase tx-12 mg-b-0\"> <img src=\"assets/img/image/calender-teal.png\" width=\"30\" height=\"30\" class=\"mg-r-5\"> AVERAGE DAILY MENTION </h6> </div> <div class=\"ripple-loader\" if=\"{isLoading}\"></div> <div class=\"card-body pd-20 bd-color-gray-lighter height600 textcenter mg-t-0\" if=\"{notdata}\"> No data found, please input another dates </div> <div class=\"card-body pd-10 bd-color-gray-lighter height600\" id=\"chart-daily-mention\" if=\"{!notdata}\"> </div> </div> </div>',\"\",\"\",(function(t){this.isLoading=!0,this.notdata=!1,this.xhr=null,this.tombolrefres=!1,this.fontcolor=!1,this.createChart=t=>{const e=t.arrayData||[];if(e.length<=0)return!1;Highcharts.chart(\"chart-daily-mention\",{chart:{type:\"bubble\",zoomType:\"xy\",marginBottom:40,marginRight:10,plotHeight:150,chartHeight:150},colors:[\"#1D91B7\",\"#55ADC9\",\"#7DC4DB\",\"#AEDCEB\"],title:{text:\"\"},title:{text:\"\"},xAxis:{categories:[\"sun\",\"mon\",\"tue\",\"wed\",\"thu\",\"fri\",\"sat\"],min:0,max:6,title:{text:\"\"},labels:{style:{fontSize:\"15px\"}}},plotOptions:{series:{dataLabels:{enabled:!0,useHTML:!0,formatter:function(){return\"<span style='z-index:0;position:relative;font-size: 13px;'> \"+numeral(this.point.z).format(\"0a\")+\"</span>\"}}},bubble:{minSize:20,maxSize:60}},tooltip:{formatter:function(){return\"<strong>\"+this.total+\"</strong> mentions\"}},yAxis:{categories:[\"00 - 05\",\"06 - 11\",\"12 - 17\",\"18 - 23\"],min:0,max:3,title:{text:\"\"},labels:{style:{fontSize:\"15px\"}}},exporting:{enabled:!1},legend:{enabled:!1},credits:{enabled:!1},series:[{color:\"#1D91B7\",data:e}]})},this.render=()=>{this.xhr=APP.log(\"chart Average daily  : render\"),\"analysis/my-stream..\"==APP.currentHash?(this.fontcolor=!1,this.update({tombolrefres:!0})):this.fontcolor=!0;let t=Object(a.clone)(this.parent.search);t.type=null,this.update({isLoading:!0}),this.xhraverage=APP.apiGet({path:\"mentions/average-daily-mentions\",data:t,success:function(t){t=t.items;let e=[],i={sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6};for(const a in t){let s=t[a];for(const t in s)e.push({x:i[t],y:parseInt(a-1),total:s[t],z:s[t]})}0===Object(a.filter)(e,(function(t){return 0!=t.total})).length?this.notdata=!0:this.update({notdata:!1}),this.createChart({arrayData:e}),this.update({isLoading:!1})}.bind(this)}),this.xhraverage.readyState&&this.update({isLoading:!1,notdata:!0})},this.reload=()=>{this.Loading=!0,this.render()},this.on(\"mount\",()=>{this.xhr=null,\"analysis/my-stream..\"==APP.currentHash&&(this.tombolrefres=!0),this.update()}),this.on(\"unmount\",()=>{this.xhr&&this.xhr.abort()})}))},126:function(t,e,i){\"use strict\";i.r(e);var a=i(0);!function(){var t=new Error(\"Cannot find module 'Helpers/chart-bar.js'\");throw t.code=\"MODULE_NOT_FOUND\",t}(),i(1).tag2(\"charconversationgroup\",'<div class=\"widget-2 mg-t-20\"> <div class=\"card shadowbase overflow-hidden\"> <div class=\"card-header pd-20 bg-transparent bb-1\"> <h6 class=\"card-title tx-20 tx-uppercase tx-12 mg-b-0\"> <img src=\"assets/img/image/line-chart-teal.png\" width=\"30\" height=\"30\" class=\"mg-r-5\"> MENTION CONVERSATION (GROUP) </h6> <div class=\"btn-group\" role=\"group\" aria-label=\"Basic example\"> <a onclick=\"{selectTime}\" class=\"btn {active:selected} cursor-pointer\" each=\"{times}\">{name}</a> </div> </div> <div class=\"ripple-loader\" if=\"{isLoading}\"></div> <div class=\"card-body pd-20 bd-color-gray-lighter height353 textcenter mg-t-0\" if=\"{nodata}\"> No data found, please input another dates </div> <div class=\"card-body pd-10 bd-color-gray-lighter height353\" id=\"chartstreamconversation\" if=\"{!nodata}\"> </div> </div> </div>',\"\",\"\",(function(t){this.type=\"daily\",this.chart=null,this.isLoading=!0,this.tombolrefres=!1,this.times=[{id:\"hourly\",name:\"Hourly\",selected:!1},{id:\"daily\",name:\"Daily\",selected:!0},{id:\"monthly\",name:\"Monthly\",selected:!1}],this.sentiment=[{color:\"#81c684\",id:\"negative,positive,neutral\",name:\"All\",no:1}],this.ajaxChannels=[],this.isExist=!0,this.selectTime=t=>{APP.log(\"chart streams : selecttme\"),t.preventDefault(),t.item.selected=!0;const e=t.item.id;this.times=Object(a.map)(this.times,t=>(t.id!=e&&(t.selected=!1),t)),this.update(),this.render()},this.render=t=>{setTimeout(()=>{if(\"analysis/my-stream..\"==APP.currentHash||\"stream..\"==APP.currentHash){this.update({tombolrefres:!0})}else;this.nodata=!0;let e=Object(a.clone)(this.parent.search);e.group_service=\"false\";const i=Object(a.find)(this.times,{selected:!0}).id;e.type=i,\"domain/infographic..\"==APP.currentHash&&(e.project=APP.currentProject),this.update({isLoading:!0}),this.chart&&this.chart.spacing&&this.chart.destroy();var s=[];async.each(this.sentiment,(t,i)=>{if(!this.isExist)return!1;e.section=t.id;APP.apiGet({path:\"mentions\",data:e,success:function(e){e=e.items;let r=[];r=(e=Object(a.sortBy)(e,t=>moment(t.date).toDate())).map(t=>[moment(t.date).utc().valueOf(),t.count]),r.length>0&&(this.nodata=!1),s.push({id:\"response\",shadow:!1,name:t.name,lineWidth:4,color:t.color,type:\"areaspline\",fillColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,t.color],[1,Highcharts.Color(t.color).setOpacity(0).get(\"rgba\")]]},marker:{radius:3},data:r}),i()}.bind(this)},(t,e,i)=>{}),this.ajaxChannels.push([])},()=>{if(!this.nodata){const t=\"chartstreamconversation\";this.update({nodata:this.nodata});for(var e=this.chart=!function(){var t=new Error(\"Cannot find module 'Helpers/chart-bar.js'\");throw t.code=\"MODULE_NOT_FOUND\",t}()(t,i,\"#333\"),r=0;r<=s.length-1;r++)e.addSeries(s[r]);const n=e&&e.series&&e.series[0]&&e.series[0].data&&e.series[0].data?e.series[0].data:[],o=Object(a.maxBy)(n,t=>t&&t.y?t.y:{}),d=o&&o.y?parseInt(o.y):0,c=Object(a.findIndex)(n,t=>t.y===d);e.tooltip.refresh(n[c])}this.update({isLoading:!1}),Object(a.isFunction)(t)&&t()})},500)},this.reload=()=>{this.render()},this.on(\"mount\",()=>{\"analysis/my-stream..\"!=APP.currentHash&&\"stream..\"!=APP.currentHash||this.update({tombolrefres:!0}),this.ajaxChannels=[],this.isExist=!0}),this.on(\"unmount\",()=>{this.isExist=!1,Object(a.each)(this.ajaxChannels,(function(t){})),APP.log(\"chart streams : unmount\"),this.chart&&this.chart.spacing&&(this.chart.destroy(),APP.log(\"chart streams : destroy chart\"))})}))},127:function(t,e,i){\"use strict\";i.r(e);var a=i(0);!function(){var t=new Error(\"Cannot find module 'Helpers/chart-bar.js'\");throw t.code=\"MODULE_NOT_FOUND\",t}(),i(1).tag2(\"chartconfersation\",'<div class=\"widget-2 mg-t-20\"> <div class=\"card shadowbase overflow-hidden\"> <div class=\"card-header pd-20 bg-transparent bb-1\"> <h6 class=\"card-title tx-20 tx-uppercase tx-12 mg-b-0\"> <img src=\"assets/img/image/line-chart-teal.png\" width=\"30\" height=\"30\" class=\"mg-r-5\"> MENTION CONVERSATION </h6> <div class=\"btn-group\" role=\"group\" aria-label=\"Basic example\"> <a onclick=\"{selectTime}\" class=\"btn {active:selected} cursor-pointer\" each=\"{times}\">{name}</a> </div> </div> <div class=\"ripple-loader\" if=\"{isLoading}\"></div> <div class=\"card-body pd-20 bd-color-gray-lighter height353 textcenter mg-t-0\" if=\"{nodata}\"> No data found, please input another dates </div> <div class=\"card-body pd-10 bd-color-gray-lighter height353\" id=\"chartstream_Conversation\" if=\"{!nodata}\"> </div> </div> </div>',\"\",\"\",(function(t){this.nuull=!0,this.notdata=!1,this.type=\"daily\",this.composition=null,this.isExist=!0,this.isLoading=!1,this.xhr=null,this.times=[{id:\"hourly\",name:\"Hourly\",selected:!1},{id:\"daily\",name:\"Daily\",selected:!0},{id:\"monthly\",name:\"Monthly\",selected:!1}],this.selectTime=t=>{t.preventDefault(),t.item.selected=!0;const e=t.item.id;this.times=Object(a.map)(this.times,t=>(t.id!=e&&(t.selected=!1),t)),this.update(),this.render()},this.on(\"mount\",()=>{}),this.dataProjects=[],this.render=()=>{setTimeout(()=>{this.notdata=!1,APP.log(\"chart-positive: render\"),this.nuull=!0;var t=this.parent.projectList||[];let e=Object(a.clone)(this.parent.search);const i=APP.currentProject,s=document.projectCompetition?document.projectCompetition:\"\",r=decodeURIComponent(`${i},${s}`),n=\"string\"==typeof r?r.split(\",\").map(t=>t.trim()).filter(t=>\"\"!==t).toString():\"\";const o=n.split(\",\").map(Number);Object(a.map)(t,(function(t){return{id:t.key_id,date:moment(t.key_start_date).format(\"DD MMMM YYYY\"),name:t.key_name,color:t.key_color}})).forEach(t=>{o.indexOf(t.id)>-1?t.checked=!0:t.checked=!1,this.dataProjects.push(t)});var d=Object(a.filter)(this.dataProjects,(function(t){return t.checked}));e.project=n,e.section=\"\";const c=Object(a.find)(this.times,{selected:!0}).id;e.type=c;var h=d.map((function(t){return{name:t.name,color:t.color}})),l=Object(a.reduce)(h,(function(t,e){return t[e.name]=e.color,t}),{});this.update({isLoading:!0});const m=this.composition=!function(){var t=new Error(\"Cannot find module 'Helpers/chart-bar.js'\");throw t.code=\"MODULE_NOT_FOUND\",t}()(\"chartstream_Conversation\",c,\"#333\");APP.apiGet({path:\"stream/brand/mention\",data:e,success:function(t){0===(t=t.items).length?this.update({notdata:!0}):this.update({notdata:!1});var e=Object(a.groupBy)(t,(function(t){return t.brand_name}));e=Object.keys(e).sort().reduce((t,i)=>(t[i]=e[i],t),{});for(let t in e){var i=Object(a.sortBy)(e[t],t=>moment(t.date).toDate());i=i.map((function(t){return[moment(t.date).utc().valueOf(),t.count,t.brand_name]})),m.addSeries({id:\"response\",shadow:!1,name:t,lineWidth:4,color:l&&l[t]?l[t]:\"#d0d0d0\",type:\"areaspline\",fillColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,l&&l[t]?l[t]:\"#d0d0d0\"],[1,Highcharts.Color(l&&l[t]?l[t]:\"#d0d0d0\").setOpacity(0).get(\"rgba\")]]},marker:{radius:3},data:i});const s=m&&m.series&&m.series[0]&&m.series[0].data&&m.series[0].data?m.series[0].data:[],r=Object(a.maxBy)(s,t=>t&&t.y?t.y:{}),n=r&&r.y?parseInt(r.y):0,o=Object(a.findIndex)(s,t=>t.y===n);m.tooltip.refresh(s[o])}this.update({isLoading:!1})}.bind(this)}).readyState&&this.update({isLoading:!1})},1e3)},this.reload=()=>{this.Loading=!0,this.render()},this.on(\"mount\",()=>{this.xhr=null}),this.on(\"unmount\",()=>{this.isExist=!1,this.xhr&&this.xhr.abort(),this.chart&&this.chart.destroy(),this.chartpositive&&this.chartpositive.destroy()})}))}}]);","extractedComments":[]}