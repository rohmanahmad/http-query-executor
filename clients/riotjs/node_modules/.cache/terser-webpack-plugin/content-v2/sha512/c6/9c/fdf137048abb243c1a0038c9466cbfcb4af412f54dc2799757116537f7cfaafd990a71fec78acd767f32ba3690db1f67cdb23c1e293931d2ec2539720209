{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{201:function(e,t,r){\"use strict\";r.r(t);r(39),r(3),r(38),r(35),r(34),r(33),r(36),r(37);r(0).tag2(\"buzzer-tracking-account\",'<div class=\"page-head\"> <h1 class=\"header-title nomargin inblock\">BUZZER TRACKING</h1> <date-picker cb=\"{updateDate}\" since=\"{localStorage.since}\" until=\"{localStorage.until}\" class=\"btn bg-grey-50 padding-10-20 no-border color-grey-600 pull-right date-style\"></date-picker> </div> <div class=\"container-fluid\"> <div if=\"{load}\" class=\"loaderpanel\"> <div class=\"txtcentertop\"> <p>No data found, please input another dates</p> <br> <p class=\" pointer refres-streams\" onclick=\"{getAPI}\"> <a class=\"btn btn-outline2 btn-info2 refres-streams mrg-top5\"> Reload </a></p> </div> </div> <div class=\"row\"> <div class=\"col-md-7\"> <chart-buzzer-summary loading=\"{isLoading}\" ref=\"chartsummary\"></chart-buzzer-summary> </div> <div class=\"col-md-5\"> <div class=\"btn-group\"> <buzzer-picker cb=\"{updateBuzzer}\" ref=\"buzzerpicker\"></buzzer-picker> </div> </div> <div class=\"col-md-7\"> <buzzer-summary-brand loading=\"{isLoading}\" ref=\"chartsummaryBrand\"></buzzer-summary-brand> <buzzer-stream-timeline loading=\"{isLoading}\" ref=\"bzstreamTimeline\"></buzzer-stream-timeline> </div> <div class=\"col-md-5\"> <div class=\"panel\"> <reach-metric loading=\"{isLoading}\" ref=\"reachmetrics\"></reach-metric> </div> <div class=\"panel\"> <influence-metric loading=\"{isLoading}\" ref=\"influencemetrics\"></influence-metric> </div> <div class=\"panel\"> <engagement-metric loading=\"{isLoading}\" ref=\"engagementmetrics\"></engagement-metric> </div> </div> </div> </div>',\"\",\"\",(function(e){this.updateBuzzer=e=>{this.isLoading=!0,APP.log(\"buzzer-tracker-account: updateBuzzer\");let t={};_.forEach(e,(function(e,r){let a=[];for(let t=0;t<e.length;t++)e[t].check&&a.push(e[t].username);t[r]=a})),this.DataBuzzer={buzzer_twitter:t.twitter?t.twitter.join(\",\"):\"\",buzzer_facebook:t.facebook?t.facebook.join(\",\"):\"\",buzzer_instagram:t.instagram?t.instagram.join(\",\"):\"\"},this.search.buzzer_twitter=t.twitter?t.twitter.join(\",\"):\"\",this.search.buzzer_facebook=t.facebook?t.facebook.join(\",\"):\"\",this.search.buzzer_instagram=t.instagram?t.instagram.join(\",\"):\"\",this.update(),this.apiGet()},this.setBuzzers=e=>{APP.log(\"buzzer-tracker-account: setBuzzers\"),this.refs.buzzerpicker.setItems(e)},this.getBuzzers=()=>{var e={project:this.search.project,service_category:this.search.project};APP.log(\"buzzer-tracker-account: getBuzzers\");let t=this;APP.apiGet({path:\"health/buzzers\",data:e,success:function(e){t.setBuzzers(e)}})},this.search={since:null,until:null,project:null},this.buzzhealth=[],this.buzzsentiment=[],this.apiGet=()=>{APP.log(\"buzzer-tracker-account: getAPI\"),this.refs.engagementmetrics.notdata=!1,this.refs.influencemetrics.notdata=!1,this.refs.reachmetrics.notdata=!1,this.load=!1,this.isLoading=!0,this.update();let e=this.search,t=this.refs,r=this;t.bzstreamTimeline.render();var a=\"\",n=0;for(let t in e)e[t]&&\"\"!=e[t]&&\"buzzer_twitter\"!=t&&\"buzzer_facebook\"!=t&&\"buzzer_instagram\"!=t&&(a+=n>0?`&${t}=${e[t]}`:`?${t}=${e[t]}`,n++);var i={buzzer_facebook:e.buzzer_facebook,buzzer_instagram:e.buzzer_instagram,buzzer_twitter:e.buzzer_twitter};async.parallel({index:function(e){APP.apiPost({path:\"health/buzzerhealth\"+a,data:i,success:function(t){e(null,t)}})},sentiment:function(e){APP.apiPost({path:\"health/buzzersentiment\"+a,data:i,success:function(t){e(null,t)}})}},(function(e,a){a.index.length>0?(t.engagementmetrics.notdata=!1,r.load=!1,r.buzzhealth=a.index,r.buzzsentiment=a.sentiment,t.chartsummary.render(a.index,a.sentiment),t.chartsummaryBrand.render(a.index,a.sentiment),t.reachmetrics.render(a.index),t.influencemetrics.render(a.index,a.sentiment),t.engagementmetrics.render(a.index),r.isLoading=!1,r.update()):(r.load=!0,r.buzzhealth=a.index,r.buzzsentiment=a.sentiment,t.chartsummary.render(a.index,a.sentiment),t.chartsummaryBrand.render(a.index,a.sentiment),t.reachmetrics.render(a.index),t.influencemetrics.render(a.index,a.sentiment),t.engagementmetrics.render(a.index),r.isLoading=!1,r.update())}))},this.updateDate=(e,t)=>{APP.log(\"buzzer-tracker-account: updateDate\"),this.search.since=e,this.search.until=t,this.getBuzzers()},this.on(\"mount\",()=>{APP.log(\"buzzer-tracker-account: mount\"),urlStream.trigger(\"changeUrl\",\"advanced-analysis/buzzer-tracking-r10\"),menuActive.trigger(\"activated\",[\"advance_analysis\",\"buzz_tracking\"]),APP.currentProject=this.search.project=p(\"project\")?p(\"project\"):APP.getProject(),this.update(),ripple10.loaddaterangepicker()}),this.downloadcsv=()=>{APP.log(\"buzzer-tracker-account: downloadcsv\");const e=[],t=this;_.forEach(this.buzzhealth,(function(r){let a=_.findIndex(t.buzzsentiment,{username:r.username,service:r.service}),n=t.buzzsentiment[a];e.push({\"Buzzer Name\":r.username,Service:r.service,Klout:n.klout_score,Post:r.postsCount,\"Potential Reach\":r.potentialReach,\"Neutral Sentiment\":n.neutralCount,\"Positive Sentiment\":n.positiveCount,\"Negative Sentiment\":n.negativeCount,\"Followers/Friends\":r.followers,\"Comment/Reply\":r.commentsCount,\"Retweet/Share\":r.sharesCount,\"Like/Favorite/+1\":r.likes_count,\"Applause Rate\":numeral(r.likes_count/r.postsCount).format(\"0,0.0\"),\"Conversation Rate\":numeral(r.commentsCount/r.postsCount).format(\"0,0.0\"),\"Amplification Rate\":numeral(r.sharesCount/r.postsCount).format(\"0,0.0\")})}));var r=this.refs.chartsummaryBrand.dataSummary,a=_.map(r,(function(e,t){return{\"Buzzer Name\":e.username,Service:e.service,Klout:e.klout_score,Post:e.postsCount,\"Potential Reach\":e.potentialReach,\"Neutral Sentiment\":e.neutralCount,\"Positive Sentiment\":e.positiveCount,\"Negative Sentiment\":e.negativeCount,\"Followers/Friends\":e.followers,\"Comment/Reply\":e.commentsCount,\"Retweet/Share\":e.sharesCount,\"Like/Favorite/+1\":e.likes_count,\"Applause Rate\":numeral(e.likes_count/e.postsCount).format(\"0,0.0\"),\"Conversation Rate\":numeral(e.commentsCount/e.postsCount).format(\"0,0.0\"),\"Amplification Rate\":numeral(e.sharesCount/e.postsCount).format(\"0,0.0\")}})),n=_.concat(e,a);this.JSONToCSVConvertor(n,\"Buzzer Tracking\",!0)},this.JSONToCSVConvertor=(e,t,r)=>{APP.log(\"buzzer-tracker-account: JSONToCSVConvertor\");var a=\"object\"!=typeof e?JSON.parse(e):e,n=\"\";if(n+=t+\"\\r\\n\\n\",r){var i=\"\";for(var s in a[0])i+=s+\",\";n+=(i=i.slice(0,-1))+\"\\r\\n\"}for(var o=0;o<a.length;o++){i=\"\";for(var s in a[o]){i+='\"'+(a[o][s]?a[o][s]:\"0\")+'\",'}i.slice(0,i.length-1),n+=i+\"\\r\\n\"}if(\"\"!=n){var c=\"Report_\";c+=t.replace(/ /g,\"_\");var u=\"data:text/csv;charset=utf-8,\"+escape(n),l=document.createElement(\"a\");l.href=u,l.style=\"visibility:hidden\",l.download=c+\".csv\",document.body.appendChild(l),l.click(),document.body.removeChild(l)}else alert(\"Invalid data\")}}))}}]);","extractedComments":[]}