{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[83],{94:function(t,e,i){\"use strict\";i.r(e);var s=i(0);i(1).tag2(\"sentimentcompetititon\",'<div class=\"mg-t-30 \" each=\"{o,i in prjList}\"> <div class=\"row mt-4\"> <div class=\"col-md-6\"> <div class=\"row\"> <div class=\"col-md-12 mb-2 text-center\"> <b class=\"f24 a141\">WORDCLOUD POSITIVE ({o})</b> <br> <span class=\"f14 a141\">Top wordcloud positive</span> </div> <div class=\"col-md-12 mb-2 text-center\" id=\"wordcloud_positive{i}\" style=\"height: 300px; width: 100%;\"></div> </div> </div> <div class=\"col-md-6\"> <div class=\"row\"> <div class=\"col-md-12 mb-2 text-center\"> <b class=\"f24 a141\">WORDCLOUD NEGATIVE ({o})</b> <br> <span class=\"f14 a141\">Top wordcloud negative</span> </div> <div class=\"col-md-12 mb-2 text-center\" id=\"wordcloud_negative{i}\" prj style=\"height: 300px; width: 100%;\"></div> </div> </div> </div> <div class=\"row mt-4\"> <div class=\"col-md-10 offset-md-1\"> <div class=\"ripple-loader\" if=\"{isLoading}\"></div> <div class=\"row desktopshow\"> <div class=\"col-md-12 mb-2 text-center\"> <b class=\"f24 a141\">MENTIONS ({o})</b> <br> <span class=\"f14 a141\">Top mentions and keyword phrase</span> </div> <div class=\"col-md-4 mb-2 text-center\"> <b class=\"f18 colortittle\">POSITIVE</b> </div> <div class=\"col-md-4 \"> </div> <div class=\"col-md-4 mb-2 text-center\"> <b class=\"f18 colortittle\">NEGATIVE</b> </div> </div> <div class=\"col-12 mb-2 text-center d-block d-sm-none\"> <b class=\"f24 a141\">POSITIVE</b> </div> <div class=\"col-12 mb-2 text-center d-block d-sm-none\"> <div class=\"row\"> <div class=\"col-6 px-1\"><span class=\"p-hastag display-w\" each=\"{item,i in topwordpositivesvalue[i]}\" if=\"{i ==0}\">{item.phrase}</span></div> <div class=\"col-6 px-1\"><span class=\"p-hastag display-w\" each=\"{item,i in topwordpositivesvalue[i]}\" if=\"{i ==1}\">{item.phrase}</span></div> <div class=\"col-6 px-1\"><span class=\"p-hastag display-w\" each=\"{item,i in topwordpositivesvalue[i]}\" if=\"{i ==2}\">{item.phrase}</span></div> <div class=\"col-6 px-1\"><span class=\"p-hastag display-w\" each=\"{item,i in topwordpositivesvalue[i]}\" if=\"{i ==3}\">{item.phrase}</span></div> </div> </div> <div class=\"row minheight225\"> <div class=\"col-md-4 text-center\"> <div class=\"row\"> <div class=\"col-md-12 col-12 py-3 mb-2 pn-holder\" each=\"{item in itemspositivevalue[i]}\"> <div class=\"row\"> <div class=\"col-md-2 col-2 pr-0 pt-1\"> <img riot-src=\"{item.user.avatar}\" class=\"profpic-style\" if=\"{item.user.avatar}\" alt=\"Image\" onerror=\"this.onerror=null;this.src=\\'https://ui-avatars.com/api/?background=0D8ABC&color=fff&length=2&rounded=true&name={item.user.name ? item.user.name : item.user.profile}\\'\"> <img riot-src=\"https://ui-avatars.com/api/?background=0D8ABC&color=fff&length=2&rounded=true&name={item.user.name ? item.user.name : item.user.profile}\" if=\"{!item.user.avatar}\" class=\"profpic-style\" alt=\"Image\" onerror=\"this.onerror=null;this.src=\\'https://ui-avatars.com/api/?background=0D8ABC&color=fff&length=2&rounded=true&name={item.user.name ? item.user.name : item.user.profile}\\'\" class=\"profpic-style\"> </div> <div class=\"col-md-10 col-10 pr-0 text-left\"> <span>{item.text.length > 50 ? item.text.substring(0,50) + \\'...\\' : item.text}</span><br> <span class=\"tx-primary pull-right pd-r-10\">({item.user.profile ? item.user.profile : item.user.name}) </span> </div> </div> </div> </div> </div> <div class=\"col-md-4 d-none d-sm-block position-rel\"> <div class=\"position-abs-l-5-p-0\"> <span class=\"p-hastag display-w\" each=\"{item in topwordpositivesvalue[i]}\">{item.phrase}</span> </div> <div class=\"position-abs-r-2-b-0\"> <span class=\"n-hastag mg-r-5 display-w\" each=\"{item in topwordnegativevalue[i]}\">{item.phrase}</span> </div> <div> </div> </div> <div class=\"col-12 mb-2 text-center d-block d-sm-none\"> <b class=\"f24 a141\">NEGATIVE</b> </div> <div class=\"col-12 mb-2 text-center d-block d-sm-none\"> <div class=\"row\"> <div class=\"col-6 px-1\"><span class=\"n-hastag display-w\" each=\"{item,i in topwordnegativevalue[i]}\" if=\"{i ==0}\">{item.phrase}</span></div> <div class=\"col-6 px-1\"><span class=\"n-hastag display-w\" each=\"{item,i in topwordnegativevalue[i]}\" if=\"{i ==1}\">{item.phrase}</span></div> <div class=\"col-6 px-1\"><span class=\"n-hastag display-w\" each=\"{item,i in topwordnegativevalue[i]}\" if=\"{i ==2}\">{item.phrase}</span></div> <div class=\"col-6 px-1\"><span class=\"n-hastag display-w\" each=\"{item,i in topwordnegativevalue[i]}\" if=\"{i ==3}\">{item.phrase}</span></div> </div> </div> <div class=\"col-md-4 text-center\"> <div class=\"row\"> <div class=\"col-md-12 col-12 py-3 mb-2 pn-holder\" each=\"{item in streamsnegativevalue[i]}\"> <div class=\"row\"> <div class=\"col-md-2 col-2 pr-0 pt-1\"> <img riot-src=\"{item.user.avatar}\" if=\"{item.user.avatar}\" class=\"profpic-style\" alt=\"Image\" onerror=\"this.onerror=null;this.src=\\'https://ui-avatars.com/api/?background=0D8ABC&color=fff&length=2&rounded=true&name={item.user.name ? item.user.name : item.user.profile}\\'\" class=\"profpic-style\"> <img riot-src=\"https://ui-avatars.com/api/?background=0D8ABC&color=fff&length=2&rounded=true&name={item.user.name ? item.user.name : item.user.profile}\" if=\"{!item.user.avatar}\" class=\"profpic-style\" alt=\"Image\" onerror=\"this.onerror=null;this.src=\\'https://ui-avatars.com/api/?background=0D8ABC&color=fff&length=2&rounded=true&name={item.user.name ? item.user.name : item.user.profile}\\'\" class=\"profpic-style\"> </div> <div class=\"col-md-10 col-10 pr-0 text-left\"> <span>{item.text.length > 50 ? item.text.substring(0,50) + \\'...\\' : item.text}</span><br> <span class=\"tx-primary pull-right pd-r-10\">({item.user.profile ? item.user.profile : item.user.name}) </span> </div> </div> </div> </div> </div> </div> </div> </div> </div>',\"\",\"\",(function(t){this.isLoading=!0,this.dataWordcloudnegative={},this.dataWordcloudpositive={},this.topwordpositivesvalue={},this.topwordnegativevalue={},this.itemspositivevalue={},this.streamsnegativevalue={},this.render=()=>{let t=Object(s.clone)(this.parent.search);APP.apiGet({path:\"projects/list?selected_fields=key_id,key_name\",success:t=>{this.projectList=t}}).done(()=>{this.createObject(t,this.projectList)})},this.createObject=(t,e)=>{this.competitionProjects=this.parent.projectAll.split(\",\"),this.prjList={};for(let t in this.competitionProjects){const i=this.competitionProjects[t],a=Object(s.find)(e,{key_id:parseInt(i)});a&&a.key_name&&(this.prjList[i]=a.key_name)}var i=this.competitionProjects;setTimeout(()=>{this.topwordnegatives(t,i),this.topwordpositives(t,i),this.update_datanegative(t,i),this.update_datapositive(t,i),this.update({isLoading:!0})},1)},this.update_datapositive=(t,e)=>{t.section=\"positive\",t.limit=4e3,t.page=0,t.is_total=null,async.each(e,(i,a)=>{t.project=i,APP.apiGet({path:\"mentions/wordcloud\",data:t,success:o=>{let r=this.parent.component;r.sentimentcompetition=!0,6===Object(s.filter)(r,t=>t).length&&this.parent.updateid();let n=o&&o.items&&o.items.positive?o.items.positive:[],l=t.q;if(l)this.streamspositive(l,t,e);else{if(n.length>0)var d=n?n.map(t=>t[0]).slice(0,4).toString().replace(/\\,/g,\" or \"):null;else d=null;this.streamspositive(d,t,e)}var c=Object(s.concat)(n);if((c=Object(s.orderBy)(c,[1],[\"desc\"])).length>0){this.update({notdata:!1});const t=c[0][1];c.map(e=>{const i=e[0].length,s=parseInt(e[1]);let a=s/t*100;return i>20&&(a=10,s/t*100>60&&(a=s/t*50)),a<15&&(a=15),e[1]=a,e}),$(\"#wordcloud_container\").show(),$(\"#wordcloud_canvas\").removeClass(\"onload\"),$(\"#wordcloud_positive\"+i).show(),WordCloud(\"wordcloud_positive\"+i,{list:c,backgroundColor:\"transparent\",gridSize:Math.round(16*$(\"#wordcloud_positive\"+i).width()/1024),weightFactor:t=>t,shape:\"diamond\",shuffle:!1,rotateRatio:.2,rotationSteps:3})}else this.notdata=!0,$(\"#wordcloud_container\").hide(),$(\"#wordcloud_canvas\").removeClass(\"oload\"),$(\"#wordcloud_positive\"+i).html(\"Empty\"),$(\"#wordcloud_positive\"+i).show();a()}})})},this.update_datanegative=(t,e)=>{t.section=\"negative\",t.limit=4e3,t.page=0,t.is_total=null,async.each(e,(i,a)=>{t.project=i,APP.apiGet({path:\"mentions/wordcloud\",data:t,success:o=>{let r=o&&o.items&&o.items.negative?o.items.negative:[],n=t.q;if(n)this.streamsnegative(n,t,e);else{if(r.length>0)var l=r?r.map(t=>t[0]).slice(0,4).toString().replace(/\\,/g,\" or \"):null;else l=null;this.streamsnegative(l,t,e)}var d=Object(s.concat)(r);if((d=Object(s.orderBy)(d,[1],[\"desc\"])).length>0){this.update({notdata:!1});const t=d[0][1];d.map(e=>{const i=e[0].length,s=parseInt(e[1]);let a=s/t*100;return i>20&&(a=10,s/t*100>60&&(a=s/t*50)),a<15&&(a=15),e[1]=a,e}),this.dataWordcloudnegative[i]=d,$(\"#wordcloud_container\").show(),$(\"#wordcloud_canvas\").removeClass(\"onload\"),$(\"#wordcloud_negative\"+i).show(),WordCloud(\"wordcloud_negative\"+i,{list:d,backgroundColor:\"transparent\",gridSize:Math.round(16*$(\"#wordcloud_negative\"+i).width()/1024),weightFactor:t=>t,shape:\"diamond\",shuffle:!1,rotateRatio:.2,rotationSteps:3})}else this.notdata=!0,$(\"#wordcloud_container\").hide(),$(\"#wordcloud_canvas\").removeClass(\"oload\"),$(\"#wordcloud_negative\"+i).html(\"Empty\"),$(\"#wordcloud_negative\"+i).show();a()}})})},this.topwordpositives=(t,e)=>{this.topword=[],t.limit=6,t.page=0,t.section=\"positive\",async.each(e,(e,i)=>{t.project=e,APP.apiGet({path:\"mentions/phrase\",data:t,success:t=>{this.total2=t.length,this.topwordpositivesvalue[e]=t.items.slice(0,5),this.update({isLoading:!1})}})})},this.topwordnegatives=(t,e)=>{this.topword=[],t.page=0,t.section=\"negative\",async.each(e,(e,i)=>{t.project=e,APP.apiGet({path:\"mentions/phrase\",data:t,success:t=>{this.total2=t.length,this.topwordnegativevalue[e]=t.items.slice(0,5),this.update({isLoading:!1})}})})},this.streamspositive=(t,e,i)=>{APP.log(\"render Stream timeline\"),async.each(i,(t,i)=>{e.project=t;e.section=\"positive\",e.limit=5,e.group_service=!1;var s=\"\",a=0;for(let t in e)e[t]&&\"\"!=e[t]&&(s+=a>0?`&${t}=${encodeURIComponent(e[t])}`:`?${t}=${encodeURIComponent(e[t])}`,a++);APP.apiPost({path:\"stream\"+s,success:e=>{this.itemspositivevalue[t]=e.item,this.update({isLoading:!1})}})})},this.streamsnegative=(t,e,i)=>{APP.log(\"render Stream timeline\"),async.each(i,(t,i)=>{e.project=t;e.section=\"negative\",e.limit=5,e.group_service=!1;var s=\"\",a=0;for(let t in e)e[t]&&\"\"!=e[t]&&(s+=a>0?`&${t}=${encodeURIComponent(e[t])}`:`?${t}=${encodeURIComponent(e[t])}`,a++);APP.apiPost({path:\"stream\"+s,success:e=>{this.streamsnegativevalue[t]=e.item,this.update()}})})}}))},95:function(t,e,i){\"use strict\";i.r(e);var s=i(0);i(1).tag2(\"shareofdaily\",'<div class=\"row mt-5\"> <div class=\"col-md-10 offset-md-1 col-12\"> <div class=\"row\"> <div class=\"ripple-loader\" if=\"{isLoading}\"></div> <div class=\"col-md-12 col-12 mb-4 text-center\"> <b class=\"f24 a141\">SHARE OF VOICE (DAILY)</b> <br> <span class=\"f14 a141\">Comparison among source brand </span> </div> <div class=\"col-md-12\"> <div id=\"var-donut\"></div> </div> </div> </div> </div>',\"\",\"\",(function(t){this.isLoading=!0,window.innerWidth>500?this.fontsizevalue=\"16px;\":this.fontsizevalue=\"10px;\",this.render=()=>{let t=Object(s.clone)(this.parent.search);t.since=t.until,t.until=t.until,t.is_total=null,this.update({isLoading:!0}),this.xhr=APP.apiGet({path:\"stream/brand/shareofvoice\",data:t,success:t=>{let e=this.parent.component;if(e.shareofdaily=!0,6===Object(s.filter)(e,t=>t).length&&this.parent.updateid(),0===(t=t).total)return this.notdata=!0,this.isLoading=!1,void this.update();this.update({notdata:!1});let i={0:235.6,1:214.5,2:201.8,3:137.5,4:124.6,5:118.7,6:92.9,7:85};var a=Object(s.orderBy)(t.items,[\"count\"],[\"desc\"]);a=a.map((function(e,s){var a=e.count/t.total*100;return s>7&&(s=7),{name:e.brand,y:parseFloat(a.toFixed(1)),z:i[s],totalvalue:e.count.formatMoney(0),color:e.color}})),this.update({isLoading:!1}),Highcharts.chart(\"var-donut\",{chart:{type:\"variablepie\"},title:{text:\"Countries compared by population density and total area.\"},tooltip:{headerFormat:\"\",pointFormat:'<span style=\"color:{point.color}\">●</span> <b> {point.name}</b><br/>Mentions: <b>{point.totalvalue}</b><br/><br> persentase : {point.percentage:.1f}%'},plotOptions:{variablepie:{allowPointSelect:!0,cursor:\"pointer\",dataLabels:{enabled:!0,format:\"<b>{point.name}</b> <br> {point.percentage:.1f}%\",style:{fontSize:this.fontsizevalue}}}},series:[{minPointSize:10,innerSize:\"20%\",zMin:0,name:\"countries\",data:a}]})}})}}))},96:function(t,e,i){\"use strict\";i.r(e);var s=i(0);i(1).tag2(\"shareofvoicelast\",'<div class=\"row mt-5\"> <div class=\"col-md-10 offset-md-1 col-12\"> <div class=\"row\"> <div class=\"ripple-loader\" if=\"{isLoading}\"></div> <div class=\"col-md-12 col-12 mb-4 text-center\"> <b class=\"f24 a141\">SHARE OF VOICE (THE LAST {totadate} DAYS )</b> <br> <span class=\"f14 a141\">Comparison among source brand </span> </div> <div class=\"col-md-12\"> <div id=\"var-donut-last\"></div> </div> </div> </div> </div>',\"\",\"\",(function(t){this.totadate=0,this.isLoading=!0,window.innerWidth>500?this.fontsizevalue=\"16px;\":this.fontsizevalue=\"10px;\",this.render=()=>{let t=Object(s.clone)(this.parent.search),e=new Date(t.since),i=new Date(t.until);this.totadate=(i-e)/864e5+1,t.is_total=null,this.update({isLoading:!0}),this.xhr=APP.apiGet({path:\"stream/brand/shareofvoice\",data:t,success:t=>{let e=this.parent.component;if(e.shareofvoicelast=!0,6===Object(s.filter)(e,t=>t).length&&this.parent.updateid(),0===(t=t).total)return this.notdata=!0,this.isLoading=!1,void this.update();this.update({notdata:!1});let i={0:235.6,1:214.5,2:201.8,3:137.5,4:124.6,5:118.7,6:92.9,7:85};var a=Object(s.orderBy)(t.items,[\"count\"],[\"desc\"]);a=a.map((function(e,s){var a=e.count/t.total*100;return s>7&&(s=7),{name:e.brand,y:parseFloat(a.toFixed(1)),z:i[s],totalvalue:e.count.formatMoney(0),color:e.color}})),this.update({isLoading:!1}),Highcharts.chart(\"var-donut-last\",{chart:{type:\"variablepie\"},title:{text:\"Countries compared by population density and total area.\"},tooltip:{headerFormat:\"\",pointFormat:'<span style=\"color:{point.color}\">●</span> <b> {point.name}</b><br/>Mentions: <b>{point.totalvalue}</b><br/><br> persentase : {point.percentage:.1f}%'},plotOptions:{variablepie:{allowPointSelect:!0,cursor:\"pointer\",dataLabels:{enabled:!0,format:\"<b>{point.name}</b> <br> {point.percentage:.1f}%\",style:{fontSize:this.fontsizevalue}}}},series:[{minPointSize:10,innerSize:\"20%\",zMin:0,name:\"countries\",data:a}]})}})}}))}}]);","extractedComments":[]}