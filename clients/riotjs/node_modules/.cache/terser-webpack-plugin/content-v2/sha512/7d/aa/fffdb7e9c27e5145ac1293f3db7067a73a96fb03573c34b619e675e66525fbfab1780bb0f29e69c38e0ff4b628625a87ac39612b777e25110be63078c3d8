{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[95],{206:function(e,t,i){\"use strict\";i.r(t);var s=i(0);i(6),i(2);i(1).tag2(\"account\",'<breadcrumb current=\"Facebook Fanpages\" mode=\"project\"></breadcrumb> <div class=\"card\"> <div class=\"card-body\"> <p class=\"header-title-project\">PROJECT SETTINGS</p> </div> <header-menu></header-menu> </div> <div class=\"br-pagebody pd-x-20 pd-sm-x-30\"> <div class=\"row no-gutters widget-1 shadow-base\"> <div class=\"col-sm-6 col-lg-12\"> <div class=\"card\"> <div class=\"card-body displayblock bb-1 height50\"> <div class=\"row\"> <div class=\"col-sm-9 mg-t-15\" style=\"border-right: 1px solid #eee ;\"> <h6 class=\"card-title\">FACEBOOK FANPAGES </h6> <a href=\"\" class=\"pull-right\" style=\"margin-top: -20px;\"> </a> </div> <div class=\"col-sm-3 mg-t-15\"> <h6 class=\"card-title help\">HELP </h6> <a href=\"\" class=\"pull-right\" style=\"margin-top: -20px;\"> </a> </div> </div> </div> <div class=\"card-body displayblock\"> <div class=\"row\"> <div class=\"col-lg-9 mg-t-20 mg-xl-t-0\" style=\"border-right: 1px solid #eee ;\"> <div class=\"row mg-t-50\"> <div class=\"col-sm-4 form-control-label\"> <button class=\"btn btn-outline-primary btn-block mg-b-0 mg-t-0 mg-r-10 cursor-pointer\" onclick=\"{myFacebookLogin}\" if=\"{this.accountHide}\">Add Facebook Account</button> </div> </div> <div class=\"row mg-t-50\"> <label class=\"col-sm-4 form-control-label\">Account Authorization : </label> </div> <div class=\"row mg-t-10\"> <div class=\"col-sm-5\"> <div class=\"col-sm-12 mg-t-10 mg-sm-t-0\" style=\"font-weight: 100; color:#0a7dc3;\" each=\"{o,i in  profile}\"> <i class=\"icon ion-social-facebook\"></i> <span class=\"cursor-pointer colorhover\" id=\"{o.profile_id}\">{o.profile_name} </span> <a class=\"deletefilter\" onclick=\"{deleteAccount}\" id=\"{o.profile_id}\"> delete</a> </div> </div> <div class=\"col-sm-7\"> <div class=\"row\" each=\"{key, index in selectedPages}\" id=\"{key.selectorId}\"> <div class=\"col-md-12\" id=\"{key.selectorId}\"> <a class=\"btn btn-primary btn-with-icon btn-block pull-right\" style=\" border: 1px solid; width: max-content; color: white;\" id=\"{key.selectorId}\" id=\"4\" if=\"{subcribedPage.indexOf(key.fanpage_fb_id) > -1}\"> <div class=\"ht-40 justify-content-between\"> <span class=\"pd-x-15\"> {key.fanpage_name} </span> <span class=\"icon wd-40\" style=\"color:white; background-color: #1566c6;\" onclick=\"{deleteunsubscription}\"><i class=\"fa fa-close\"></i></span> </div> </a> </div> </div> </div> </div> <div class=\"row mg-t-10\"> <div class=\"col-sm-7\"> </div> <div class=\"col-sm-5 mgt-m-70\"> <div class=\"dropdown pull-right\"> <a href=\"\" class=\"tx-gray-800 d-inline-block\" data-toggle=\"dropdown\"> <div class=\"ht-45 pd-x-20 bd d-flex align-items-center justify-content-center\"> <span class=\"mg-r-10 tx-13 tx-medium\">Project Fanpages</span> <i class=\"fa fa-angle-down mg-l-10\"></i> </div> </a> <div class=\"dropdown-menu pd-10 wd-200\"> <nav class=\"nav nav-style-1 flex-column\"> <a onclick=\"{subscribe}\" id=\"{o.fanpage_fb_id}\" class=\"nav-link\" each=\"{o,i in this.pages}\" if=\"{subcribedPage.indexOf(o.fanpage_fb_id) < 0}\"> <i class=\"icon ion-ios-person\"></i> {o.fanpage_name} </a> </nav> </div> </div> </div> </div> </div> <div class=\"col-lg-3 mg-t-20 mg-xl-t-0\"> <h6 class=\"card-title help1 bb-1\">HELP </h6> <p class=\"mg-t-20\"> \"Ripple10 will gather all posts from connected Facebook fanpages. This enables you to monitor key fanpages, even if the entries do not contain the monitored keyword. </br> </br> This function was designed for fanpage owners who wish to have everything in one place - not just mentions about their brands, but also information from other selected fanpages.\" </p> </div> </div> </div> <div class=\"modal-footer height50 mg-t-m-20\"> </div> </div> </div> </div> <footer class=\"br-footer\"> <div class=\"footer-left\"> </div> <div class=\"footer-right d-flex align-items-center\"> </div> </footer> </div>',\"\",\"\",(function(e){this.addAccount=!1,this.refresh=!0,this.accountHide=!0,this.profileId=null,this.selectedPages=[],this.subcribedPage=[],this.indexdata=[],this.closedId,this.on(\"mount\",()=>{APP.log(\"Account : mount\"),menuActive.trigger(\"activated\",[\"project_settings\"]),urlStream.trigger(\"changeUrl\",\"setting/account\"),this.getClientSocmed(),APP.animationFadeIn(),$(\"select#custom\").select2({tags:!0})}),menu.on(\"nameproject\",e=>{this.data=Object(s.filter)(e,(function(e){return e.checked})),this.update()});this.fbtoken=\"\",this.myFacebookLogin=()=>{console.log(APP.apiDomain+\"/api/v2/facebook/login\");window.open(APP.apiDomain+\"/api/v2/facebook/login\",\"facebook login\",\"height=550,width=700\")},this.receiveMessage=e=>{e.origin===APP.apiDomain&&(this.fbtoken=e.data.token,this.accountId=e.data.accountId,this.getStatus({profile_id:this.accountId,profile_token:this.fbtoken,fb_connect:!0}))},window.addEventListener(\"message\",this.receiveMessage,!1),this.getClientSocmed=()=>{var e=p(\"project\"),t=Object(s.head)(e.split(\",\"));APP.apiGet({path:\"facebook/get-profile\",data:{project:t},success:function(e){this.profile=e,0!=e.length&&(this.accountHide=!1,this.update({accountHide:!1})),this.getStatus(e[0]),this.update()}.bind(this)})},this.getStatus=e=>{APP.log(\"account : getStatus\");var t=this;if(!e)return null;t.addAccount=!0,t.profileId=e.profile_id,t.token=e.profile_token,APP.apiGet({path:\"facebook/get-me\",data:{profileid:t.profileId,access_token:t.token},success:function(i){if(\"Internal Server Error\"!==i.statusText){t.id=i.id,t.name=i.name,e.fb_connect&&(t.profile=[{profile_name:t.name,profile_id:t.id}],this.accountHide=!1),t.update();var a=p(\"project\"),o=Object(s.head)(a.split(\",\")),r={profileid:t.profileId,clientid:localStorage.clientid,tmp_token:t.token,fb_name:t.name,refresh:!0,project:o};APP.apiGet({path:\"facebook/get-saved-pages?key=\"+o,success:function(e){this.id;var i=e.map(e=>{let t=e;return t.selectorId=e.fanpage_name.replace(/[^a-zA-Z0-9]/g,\"\").replace(/ /g,\"\").toLowerCase(),t}).filter((function(e){return e.sc_user_id===t.profileId}));for(let e in i)this.subcribedPage.push(i[e].fanpage_fb_id);t.selectedPages=i,console.log(\"data,dt\",i),t.update()}.bind(t)}),APP.apiGet({path:\"facebook/get-pages/\"+t.profileId,data:r,success:function(e){t.pages=e.map((function(e,t){let i=e;return i.checked=!1,i})),t.update()}})}else this.getStatus(this.profile[1])}.bind(t)})},this.deleteunsubscription=e=>{swal({title:\"Alert\",text:\"Are you sure you want to delete this page?\",type:\"warning\",showCancelButton:!0,confirmButtonColor:\"#DD6B55\",closeOnConfirm:!0,confirmButtonText:\"YES \",cancelButtonText:\"NO\"},()=>{var t=e.item.key.fanpage_fb_id,i=(e.item.key.selectorId,e.item.key.fanpage_token);if(i){var s={page_id:t,page_token:i};APP.apiPost({path:\"facebook/webhook-unsubscription/\"+t,data:s,success:function(e){this.subcribedPage.splice(this.subcribedPage.indexOf(t),1),this.subcribedPage.filter(e=>\"\"!==e||e.length>0),this.update()}.bind(this)})}else console.log(\" no page token\")})},this.deleteAccount=e=>{var t=e.item.o.profile_id;if(this.selectedPages.length>0)var i=this.selectedPages[0].sc_user_id;if(i===(t=e.item.o.profile_id))if(0===this.subcribedPage.length){t=e.item.o.profile_id;swal({title:\"Alert\",text:\"Are you sure you want to delete this Account?\",type:\"warning\",showCancelButton:!0,confirmButtonColor:\"#DD6B55\",closeOnConfirm:!0,confirmButtonText:\"YES \",cancelButtonText:\"NO\"},()=>{APP.apiGet({path:\"facebook/remove-account/\"+t,success:function(e){var i=Object(s.remove)(this.profile,(function(e){return e.profile_id!=t}));this.profile=i,0===this.profile.length&&(this.accountHide=!0),this.update()}.bind(this)})})}else swal({title:\"Alert\",text:\"Please remove your fans page?\",type:\"error\",confirmButtonColor:\"#DD6B55\",closeOnConfirm:!0,confirmButtonText:\"YES \"});else{t=e.item.o.profile_id;swal({title:\"Alert\",text:\"Are you sure you want to delete this Account?\",type:\"warning\",showCancelButton:!0,confirmButtonColor:\"#DD6B55\",closeOnConfirm:!0,confirmButtonText:\"YES \",cancelButtonText:\"NO\"},()=>{APP.apiGet({path:\"facebook/remove-account/\"+t,success:function(e){var i=Object(s.remove)(this.profile,(function(e){return e.profile_id!=t}));this.profile=i,0===this.profile.length&&(this.accountHide=!0),this.update()}.bind(this)})})}},this.subscribe=e=>{APP.log(\"account : subcribe\");var t=e.target.id,i={page_id:e.item.o.fanpage_id,page_name:e.item.o.fanpage_name,page_category:e.item.o.fanpage_category,page_permissions:e.item.o.fanpage_permisions,page_token:e.item.o.fanpage_access_token,project_id:parseInt(localStorage.prj),client_id:e.item.o.fanpage_client_id,profile_id:this.profileId,sc_user_id:this.profileId};APP.apiPost({path:\"facebook/webhook-subscription/\"+t,data:i,parse_data:!0,success:function(e){if(200===e.statusCode){this.selectedPages.push({fanpage_name:i.page_name,fanpage_fb_id:t,fanpage_token:i.page_token,page_id:i.page_id,selectorId:i.page_name.replace(/[^a-zA-Z0-9]/g,\"\").replace(/ /g,\"\").toLowerCase(),sc_user_id:i.sc_user_id}),this.selectedPages=Object(s.uniqBy)(this.selectedPages,\"selectorId\"),console.log(\" this.selectedPages\",this.selectedPages);var a=Object(s.findIndex)(this.pages,{fanpage_fb_id:t});this.pages[a].checked=!0,this.subcribedPage.push(t),this.update()}}.bind(this)})},this.closed=e=>this.closedId===e,this.close=e=>{console.log(e.target.id)},this.on(\"unmount\",()=>{})}))},207:function(e,t,i){\"use strict\";i.r(t);i(5),i(9),i(163),i(168),i(166),i(170),i(165),i(99);var s=i(0);i(1).tag2(\"advanced-dashboard\",'<div class=\"page-head bg-grey-100 nopaddingbottm\"> <h1 class=\"header-title nomargin inblock\"> PUBLIC RELATION DASHBOARD</h1> <date-picker cb=\"{updateDate}\" since=\"{localStorage.since}\" until=\"{localStorage.until}\" class=\"btn bg-grey-50 padding-10-20 no-border color-grey-600 pull-right date-style\"></date-picker> </div> <div class=\"container-fluid\"> <div class=\"row\"> <div class=\"col-md-9\"> <prdash-channel loading=\"{isLoading}\" cb=\"{updateChannel}\" ref=\"prdashchannel\"></prdash-channel> </div> <div class=\"col-md-3\"> <prdash-sentiment loading=\"{isLoading}\" cb=\"{updateSentiment}\" ref=\"prsentiment\"></prdash-sentiment> </div> <div class=\"col-md-12\"> <prdash-graph loading=\"{isLoading}\" ref=\"prgraph\"></prdash-graph> <div class=\"clearfix\"></div> </div> <div class=\"col-md-8\"> <prdash-filter-2 class=\"visible-xs visible-sm hidden-md\" cb=\"{updateFilter}\" ref=\"prfilter\"></prdash-filter-2> <prdash-stream-timeline cb=\"{changeStream}\" ref=\"prstream\"></prdash-stream-timeline> </div> <div class=\"col-md-4 visible-lg visible-md hidden-xs\"> <prdash-filter cb=\"{updateFilter}\" ref=\"prfilter2\"></prdash-filter> </div> </div> </div>',\"\",\"\",(function(e){this.search={since:null,until:null,project:null,service_category:null,pr_service:!0,section:\"positive,negative,neutral\"},this.render=()=>{this.refs.prgraph.render(),this.refs.prstream.render(),setTimeout(()=>{this.refs.prsentiment.render()},2e3),this.update()},this.getAPI=()=>{APP.log(\"advanced-dashboard : getApi\"),this.isLoading=!0,this.update();let e=this.search,t=(this.refs,this);async.parallel({index:function(t){APP.apiGet({path:\"prdash\",data:e,success:function(e){t(null,e)}})},graph:function(t){APP.apiGet({path:\"prdash/graph\",data:e,success:function(e){t(null,e)}})}},(function(e,i){t.isLoading=!1,t.update()}))},this.updateDate=(e,t)=>{APP.log(\"advanced-dashboard : updateDate\"),this.search.since=e,this.search.until=t,this.render(),this.refs.prdashchannel.render()},this.updateChannel=e=>{APP.log(\"advanced-dashboard : updateChannel\"),this.refs.prgraph.filterchannel(e);let t=[];Object(s.forEach)(e,(function(e){e.selected&&t.push(e.cat_id)})),setTimeout(()=>{this.refs.prsentiment.render(e)},2e3),this.search.section=this.sentimentparams,this.search.service_category=t.toString(),this.render()},this.updateSentiment=e=>{this.sentimentparams=e,APP.log(\"advanced-dashboard : updateSentiment\"),this.refs.prstream.isLoading=!0,this.search.section=this.sentimentparams,setTimeout(()=>{this.refs.prdashchannel.render(),this.render(),this.update()},1e3)},this.changeStream=()=>{this.render()},this.updateFilter=e=>{var t=this.refs.prsentiment.sentiment,i=Object(s.filter)(t,(function(e){return e.selected}));let a=[];Object(s.forEach)(i,(function(e){a.push(e.id)})),this.refs.prstream.isLoading=!0,this.search.section=a.join(\",\"),APP.log(\"advanced-dashboard : updateFilter\"),this.search.q=e.q,this.search.domain=e.domain,this.search.author=e.author,this.getAPI()},this.projectId=null,this.on(\"mount\",()=>{APP.log(\"advanced-dashboard : mount\"),menuActive.trigger(\"activated\",[\"pr_dashboard\"]),urlStream.trigger(\"changeUrl\",\"advanced-analysis/pr-dashboard\"),urlStream.trigger(\"Urlproject\",p(\"project\")?p(\"project\"):APP.getProject()),APP.currentProject=this.search.project=p(\"project\")?p(\"project\"):APP.getProject(),this.update(),p(\"filter\")&&this.getfilterlistid(),ripple10.loaddaterangepicker()}),this.getfilterlistid=()=>{APP.log(\"project : project\"),APP.apiGet({path:\"bookmark-filter/list/\"+p(\"filter\"),data:{id:p(\"filter\")},success:function(e){this.search.q=e.filter_keywords,this.search.domain=e.filter_domain,this.search.author=e.filter_author,this.search.filterbot=e.filter_filterbot,this.refs.prfilter.getfilterlist(e),this.refs.prfilter2.getfilterlist(e),this.getAPI(),this.update()}.bind(this)})}}))}}]);","extractedComments":[]}