{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[86],{256:function(t,e,a){a(0).tag2(\"popup\",\"\",\"\",\"\",(function(t){}))},257:function(t,e,a){a(0).tag2(\"project\",'<div id=\"contactForm\"> <h3>Project Group</h3> <form> <div style=\"overflow-y: scroll; height:200px;\"> <div style=\"text-align:left; margin-left:80px;\" each=\"{o, i in dataProjects}\"> <div class=\"col-md-2\"> <input type=\"checkbox\" id=\"checkbox-inline-{o.id}\" class=\"a\" riot-value=\"{o.id}\" checked=\"{o.checked}\" onchange=\"{changeProjects}\"> </div> <div class=\"col-md-10\"> <label for=\"checkbox-inline-{o.id}\" style=\"margin-left:-50px;\" class=\"padding-left-30\">{o.name}</label> </div> </div> </div> <br> <input class=\"formBtn\" onclick=\"{group}\" type=\"submit\"> <input class=\"formBtn2\" onclick=\"{cancel}\" type=\"submit\" value=\"cancel\"> </form> </div>',\"\",\"\",(function(t){$((function(){$(\"#contact\").click((function(){$(\"#contactForm\").fadeToggle()}))}))}))},45:function(t,e,a){\"use strict\";a.r(e);var s=a(1),i=a.n(s);a(0).tag2(\"chart-stream-metions\",'<div class=\"row row-sm mg-t-20\"> <div class=\"col-lg-12\"> <div class=\"widget-2\"> <div class=\"card shadow-base overflow-hidden\"> <div class=\"card-header\"> <h6 class=\"card-title\"> <img src=\"assets/img/image/line-chart-teal.png\" width=\"20\" height=\"20\" class=\"mg-r-5\"> STREAM OF MENTIONS </h6> <div class=\"btn-group\" role=\"group\" aria-label=\"Basic example\"> <a href=\"#\" onclick=\"{selectTime}\" class=\"btn {active:selected}\" each=\"{times}\">{name}</a> <img src=\"assets/img/image/dowload-teal.png\" width=\"20\" height=\"20\" class=\"mg-l-10 mg-r-5 mg-t-5 cursor-pointer \" data-toggle=\"tooltip\" data-placement=\"top\" title=\"Download\" onclick=\"{downloadcsv}\"> <span class=\" mg-l-10 mg-t-7 cursor-default\" aria-hidden=\"true\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"Visual representations of changes in the amount of mentions about your chosen keywords\"> ? </span> </div> </div> <div class=\"card-body pd-0 bd-color-gray-lighter\" if=\"{nodata}\"> <div class=\"no-gutters tx-center textcenter mg-t-0 height400\"> No data found, please input another dates </div> </div> <div class=\"ripple-loader \" if=\"{isLoading}\"></div> <div class=\"card-body pd-10 bd-color-gray-lighter\" if=\"{!nodata}\"> <div class=\"row no-gutters tx-center height400\" id=\"chartstream\"> </div> </div> </div> </div> </div> </div>',\"\",\"\",(function(t){this.type=\"daily\",this.chart=null,this.isLoading=!0,this.tombolrefres=!1,this.times=[{id:\"hourly\",name:\"Hourly\",selected:!1},{id:\"daily\",name:\"Daily\",selected:!0},{id:\"monthly\",name:\"Monthly\",selected:!1}],this.ajaxChannels=[],this.isExist=!0,this.selectTime=t=>{APP.log(\"chart streams : selecttme\"),t.preventDefault(),t.item.selected=!0;const e=t.item.id;this.times=_.map(this.times,t=>(t.id!=e&&(t.selected=!1),t)),this.update(),this.render()},this.render=t=>{setTimeout(()=>{APP.log(\"chart streams : render\");const e=this.parent&&this.parent.refs&&this.parent.refs.channel&&this.parent.refs.channel.channels,a=_.filter(e,(function(t){return t.selected})),s=_.find(this.times,{selected:!0}).id;let o=_.clone(this.parent.search);o.type=s,o.group_service=\"false\",this.update({isLoading:!0}),this.chart&&this.chart.spacing&&this.chart.destroy(),this.nodata=!0;var n=[];async.eachLimit(a,10,(t,e)=>{if(!this.isExist)return!1;o.service_category=t.id;var a=APP.apiGet({path:\"mentions\",data:o,success:a=>{a=a.items;let s=[];s=(a=_.sortBy(a,t=>moment(t.date).toDate())).map(t=>[moment(t.date).utc().valueOf(),t.count]),s.length>0&&(this.nodata=!1),n.push({id:\"response\",shadow:!1,name:t.name,valnameid:t.id,lineWidth:1,color:t.color,type:\"areaspline\",totaldata:_.sumBy(s,1),fillColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,t.color],[1,Highcharts.Color(t.color).setOpacity(0).get(\"rgba\")]]},marker:{radius:3},data:s}),e()}},e);this.ajaxChannels.push(a)},()=>{if(this.update({isLoading:!1}),this.nodata)console.log(\"no data\");else{const t=\"chartstream\";this.update({nodata:this.nodata,isLoading:!1});let o=\"#868ba1\";n=_.orderBy(n,[\"totaldata\"],[\"desc\"]),this.data=n;for(var e=this.chart=i()(t,s,o),a=0;a<=n.length-1;a++)e.addSeries(n[a])}_.isFunction(t)&&t()})},500)},this.downloadcsv=()=>{const t=_.cloneDeep(this.data).map(t=>t.data.map(e=>({tgl:e[0],tipe:t.name,count:e[1]}))),e=_.flatten(t),a=_.groupBy(e,\"tgl\");let s=[];for(let t in a){const e=_.groupBy(a[t],\"tipe\"),i=_.result(e,\"Twitter[0].count\",0),o=_.result(e,\"Facebook[0].count\",0),n=_.result(e,\"Instagram[0].count\",0),r=_.result(e,\"News[0].count\",0),c=_.result(e,\"Blogs[0].count\",0),l=_.result(e,\"Video[0].count\",0),d=_.result(e,\"Forum[0].count\",0),h=i+o+n+r+c+l+d;s.push({tgl:moment(Number(t)).format(\"YYYY-MM-DD\"),twitter:i,facebook:o,instagram:n,news:r,blogs:c,video:l,forum:d,total:h})}s.length>0&&APP.downloadcsv(s,\"Stream_of_mentions_\"+p(\"project\"),!0)},this.on(\"mount\",()=>{\"analysis/my-stream..\"!=APP.currentHash&&\"stream..\"!=APP.currentHash||this.update({tombolrefres:!0}),this.ajaxChannels=[],this.isExist=!0}),this.on(\"unmount\",()=>{this.isExist=!1,_.each(this.ajaxChannels,(function(t){t.abort()})),APP.log(\"chart streams : unmount\"),this.chart&&this.chart.spacing&&(this.chart.destroy(),APP.log(\"chart streams : destroy chart\"))})}))}}]);","extractedComments":[]}