{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{293:function(t,e,i){\"use strict\";i.r(e);i(16),i(26),i(119),i(0);i(1).tag2(\"emotionanalysis\",'<breadcrumb current=\"Dashboard Competitive\" ref=\"breadcrumb\" mode=\"project\"></breadcrumb> <div class=\"br-pagebody pd-x-20 pd-sm-x-30\"> <div class=\"row\"> <div class=\"col-md-12\"> <div class=\"widget-2\"> <div class=\"card shadow-base overflow-hidden\"> <div class=\"card-header borderbottom0\"> <div class=\"media-body mg-t-10\"> <h4 class=\"tx-normal tx-roboto tx-inverse mg-b-5\"> EMOTION ANALYSIS <small class=\"align-top\"> <span class=\"border border-radius-50 ml-2 px-1 cursor-default font-small btn-link\" aria-hidden=\"true\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"The process of identifying and analyzing the underlying emotions expressed in textual data is known as emotion analysis. Emotional Analysis uses a much more complex system for understanding consumer responses, emotion analysis focuses on a broad spectrum of human emotions and sensitivities. The emotional analysis also includes the motives and impulses of a viewer. These helpful insights prove to be very beneficial for being translated into actions.\">?</span> </small> </h4> </div> <button onclick=\"{updatefilternamemodal}\" if=\"{updatefilternamenews}\" data-toggle=\"modal\" data-target=\"#modaldemo3\" class=\"btn {btn-outline-secondary:!colorblue} {btn-primary:colorblue} btn-block mg-b-0 mg-t-0 mg-r-10 width200save cursor-pointer\"> <i class=\"fa fa-floppy-o pstf\"></i> Save This Filter</button> <button onclick=\"{updatefiltername}\" if=\"{!updatefilternamenews}\" class=\"btn {btn-outline-secondary:!colorblue} {btn-primary:colorblue} btn-block mg-b-0 mg-t-0 mg-r-10 width200save {cursor-pointer:!colorblue}\" disabled=\"{disabled:colorblue}\"> <i class=\"fa fa-floppy-o pstf\"></i> Save This Filter</button> <button data-toggle=\"modal\" data-target=\"#modalfilterlist\" onclick=\"{inputfocus}\" class=\"btn btn-outline-primary mg-b-0 mg-t-0 mg-r-10 width200summary cursor-pointer\"><i class=\"mg-r-5 icon ion-funnel\"></i> Filter</button> <div class=\"mr-2\"> <label class=\"ckbox mb-0 tx-11 cursor-pointer\"> <input type=\"checkbox\" class=\"cursor-pointer \" id=\"total_timeline_mentions\" checked=\"{checked:checked}\" onclick=\"{showTotal}\"> <span class=\"tx-uppercase\">Show Total</span> </label> </div> <div class=\"btn-group pull-right mg-r-m-0\" role=\"group\" aria-label=\"Basic example\"> <div class=\"pd-x-25 tx-11 pd-y-12 tx-mont tx-medium datepickerbacgraoud cursor-pointer\"> <span> <date-picker cb=\"{updateDate}\" since=\"{localStorage.since}\" until=\"{localStorage.until}\" class=\"fc-datepicker btn bg-grey-50 padding-10-20 no-border color-grey-600 pull-right date-style cursor-pointer\" style=\"padding:0px\"></date-picker> </span> </div> </div> </div> </div> </div> </div> </div> <filtervalue ref=\"filterformvalue\"></filtervalue> <div class=\"row row-sm mg-t-20\"> <div class=\"col-lg-12\"> <emotion-analysis ref=\"emotionanalysis\"></emotion-analysis> </div> </div> <div id=\"modalfilterlist\" class=\"modal fade show\"> <div class=\"modal-dialog\" role=\"document\"> <form id=\"myFormid\" method=\"get\" onsubmit=\"{savefilter}\"> <div class=\"modal-content tx-size-sm\"> <div> <filter namefilter=\"false\" ref=\"filterval\"></filter> </div> </div> </form> </div> </div> <div id=\"modaldemo3\" class=\"modal fade show\"> <div class=\"modal-dialog modal-lg wd-40p\" role=\"document\"> <form id=\"myFormid\" method=\"get\" onsubmit=\"{saveFilterBookmark}\"> <div class=\"modal-content tx-size-sm\"> <div class=\"card-body pd-t-20 pd-r-20 pd-l-20 pd-0 mg-b-20\"> <div class=\"row mg-b-20\"> <div class=\"col-sm-12 mg-t-10 mg-sm-t-0 text-center\">Give this a filter name</div> </div> <div class=\"row\"> <div class=\"col-sm-12 mg-t-10 mg-sm-t-0\"> <input type=\"text\" id=\"inputfocusnamevalue\" name=\"inputfokus\" class=\"form-control\" placeholder=\"\" ref=\"nameFilter\"> <p class=\"pd-0 mg-b-0\" if=\"{!error}\">&nbsp;</p> <p class=\"pd-0 mg-b-0 colorred\" if=\"{error}\">This value is required.</p> </div> </div> </div> <div class=\"modal-footer d-block pd-0\"> <div class=\"row\"> <div class=\"col-md-6 pd-r-0\"> <button type=\"button\" class=\"btn btn-outline-secondary wd-100-color-transparant \" onclick=\"{saveFilterBookmark}\"> Save Filter</button> </div> <div class=\"col-md-6 pd-l-0\"> <button type=\"button\" class=\"btn btn-outline-secondary wd-100-color-transparant \" data-dismiss=\"modal\">Cancel</button> </div> </div> </div> </div> </form> </div> </div> </div>',\"\",\"\",(function(t){window.checkRender=this,this.search={since:null,until:null,project:null,section:\"positive,negative,neutral\",service_category:null,type:null},this.xhrdata=null,this.isShowTotal=!1,this.updateDate=(t,e)=>{this.search.since=t,this.search.until=e,setTimeout(()=>{this.render()},1e3)},this.showTotal=t=>{this.isShowTotal=1==t.target.checked,this.showTotalChart()},this.showTotalChart=()=>{this.refs.emotionanalysis.showTotalChart()},this.on(\"mount\",()=>{console.log(\"mount\"),this.xhr=null,this.xhrdata=null,urlStream.trigger(\"changeUrl\",\"emotion_analysis\"),menuActive.trigger(\"activated\",[\"emotion_analysis\"]),APP.currentProject=this.search.project=p(\"project\")?p(\"project\"):APP.getProject(),$(\"body,html\").animate({scrollTop:0},500),this.updateDate()}),this.render=t=>{setTimeout(()=>{$('[data-toggle=\"tooltip\"]').tooltip()},1e3),console.log(\"project\",this.search.project),null!=this.search.project||null!=this.search.project?(this.update(),this.refs.emotionanalysis.isLoading=!0,this.xhrdata=this.refs.emotionanalysis.render()):swal(\"Oops...\",\"Create your project\",\"warning\")},this.on(\"unmount\",()=>{this.xhrdata&&this.xhrdata.destroy(),this.xhr&&this.xhr.destroy(),localStorage.removeItem(\"Project_devault\")}),this.inputfocus=()=>{$(\"#modalfilterlist\").on(\"shown.bs.modal\",(function(){$(\"#inputfocusnameauthor\").focus()}))},this.updatefiltername=()=>{var t={name:this.namefiltervalue,keywords:this.search.q,domain:this.search.domain,author:this.search.author,filterbot:this.search.filterbot};!this.refs.filterformvalue.saveshowdropdown&&this.refs.filterformvalue.filtervalue&&this.refs.filterformvalue._id&&APP.apiPost({path:\"bookmark-filter/update/\"+this.refs.filterformvalue._id+\"?project=\"+p(\"project\"),data:t,success:e=>{APP.success(\"sukses\",()=>{this.refs.filterval.updatevaluekey(t),this.search.q=t.keywords,this.search.domain=t.domain,this.search.author=t.author,this.search.filterbot=\"true\"==t.filterbot,this.update(),this.render()})}})},this.updateFilter=t=>{this.refs.filterformvalue.updateFilter(t)},this.saveFilterBookmark=t=>{t.preventDefault(),this.updatenamefilter=this.refs.nameFilter.value,this.updatenamefilter?(this.colorblue=!0,this.refs.filterval.savefilter(t),this.updatefilternamenews=!1,this.update()):(this.error=!0,this.update())},this.updatefilternamemodal=()=>{$(\"#modaldemo3\").on(\"shown.bs.modal\",(function(){$(\"#inputfocusnamevalue\").focus()}))},this.resetFilter=()=>{setTimeout(function(){this.updatefilternamenews=!1,this.refs.filterformvalue.filtervalue=!1,this.render(),this.update()}.bind(this),100)}}))},294:function(t,e,i){\"use strict\";i.r(e);i(12),i(98);var a=i(27);i(1).tag2(\"download-tasks\",'<breadcrumb current=\"Dashboard Summary\" mode=\"project\" ref=\"breadcrumb\"></breadcrumb> <div class=\"br-pagebody pd-x-20 pd-sm-x-30\"> <div class=\"row\"> <div class=\"col-md-12\"> <div class=\"widget-2\"> <div class=\"card shadow-base overflow-hidden\"> <div class=\"card-header borderbottom0\"> <div class=\"media-body mg-t-10 mg-b-10\"> <div class=\"row\"> <div class=\"col-10 my-auto\"> <h4 class=\"tx-normal tx-roboto tx-inverse mg-b-5\">Background Tasks</h4> </div> <div class=\"col-2 my-auto text-center d-flex justify-content-center\"> <button onclick=\"{refresh}\" class=\"{isRefreshActive ? \\'btn-outline-light\\' :\\'cursor-pointer btn-outline-primary \\'} btn btn-block mg-b-0 mg-t-0 mg-r-10 mg-t-0-r10 width100 mobilesbutton mgt-mobile-max-415\" 2> <i if=\"{isRefreshActive}\" class=\"fa fa-spinner fa-spin mg-r-10\"></i> <i if=\"{!isRefreshActive}\" class=\"fa fa-refresh mg-r-10\"></i> Refresh </button> </div> </div> </div> </div> </div> </div> </div> </div> </div> <div class=\"br-pagebody pd-x-20 pd-sm-x-30\"> <div class=\"row\"> <div class=\"col-md-12\"> <div class=\"widget-2\"> <div class=\"dropdown-menu bg-white pd-0 wd-sm pos-static ft-none show\"> <ul class=\"nav nav-tabs nav-tabs-style-1 tx-13\" role=\"tablist\"> <li class=\"nav-item\"> <a class=\"nav-link pd-y-10 active\" data-toggle=\"tab\" href=\"#tabRegular\" role=\"tab\" onclick=\"{updateTabActive}\">Active <b>({totalActiveTask})</b></a> </li> <li class=\"nav-item\"> <a class=\"nav-link pd-y-10\" data-toggle=\"tab\" href=\"#tabExtended\" role=\"tab\" onclick=\"{updatedTabComplete}\">Complete <b>({totalCompleteTask})</b></a> </li> </ul> <div class=\"tab-content pd-30\"> <div class=\"tab-pane active\" id=\"tabRegular\" role=\"tabpanel\"> <table class=\"table table-stripped\"> <thead style=\"background-color: #BBB;\"> <tr> <th width=\"20\">#</th> <th width=\"150\">Type</th> <th width=\"300\">Name</th> <th width=\"150\">Created At</th> <th width=\"80\">Status</th> <th width=\"200\">Actions</th> </tr> </thead> <tbody> <tr if=\"{activeTask.length == 0}\"> <td colspan=\"6\" class=\"text-center\">No Active Task Yet</td> </tr> </tbody> <tbody if=\"{activeTask.length > 0}\" each=\"{item, i in activeTask}\"> <tr> <td>{++i}</td> <td>{item.type_format}</td> <td> <p>id <b>{item.id}</b></p> {item.name} </td> <td>{item.createdAt}</td> <td>{item.state}</td> <td> <button type=\"button\" onclick=\"{() => showDetail(item.id, item.type, item.labels, ⁗active⁗, --i)}\" class=\"ml-1 mr-1 btn btn-info btn-sm cursor-pointer\" if=\"{item.isShowDetailActive ? ⁗disabled⁗ : ⁗enabled⁗}\"> <i if=\"{item.isShowDetailActive}\" class=\"fa fa-spinner fa-spin mg-r-10\"></i> Detail </button> <button if=\"{item.action.canStop}\" onclick=\"{() => this.stop(item.id, item.type, ⁗active⁗, --i)}\" type=\"button\" class=\"ml-1 mr-1 btn btn-warning btn-sm cursor-pointer\" if=\"{item.isStopActive ? ⁗disabled⁗ : ⁗enabled⁗}\"> <i if=\"{item.isStopActive}\" class=\"fa fa-spinner fa-spin mg-r-10\"></i> Stop </button> <button if=\"{item.action.canStart}\" onclick=\"{() => this.start(item.id, item.type, false, ⁗active⁗, --i)}\" class=\"ml-1 mr-1 btn btn-success btn-sm cursor-pointer\" if=\"{item.isStartActive ? ⁗disabled⁗ : ⁗enabled⁗}\"> <i if=\"{item.isStartActive}\" class=\"fa fa-spinner fa-spin mg-r-10\"></i> Start </button> </td> </tr> </tbody> </table> </div> <div class=\"tab-pane\" id=\"tabExtended\" role=\"tabpanel\"> <table class=\"table table-stripped\"> <thead style=\"background-color: #BBB;\"> <tr> <th width=\"20\">#</th> <th width=\"150\">Type</th> <td width=\"300\"></td> <th width=\"150\">Created At</th> <th width=\"80\">Status</th> <th width=\"200\">Actions</th> </tr> </thead> <tbody> <tr if=\"{completeTask.length == 0}\"> <td colspan=\"6\" class=\"text-center\">No Complete Task Yet</td> </tr> <tr each=\"{item, i in completeTask}\"> <td>{++i}</td> <td>{item.type_format}</td> <td> <p>id <b>{item.id}</b></p> {item.name} </td> <td>{item.createdAt}</td> <td>{item.state}</td> <td> <button type=\"button\" onclick=\"{() => showDetail(item.id, item.type, item.labels, ⁗complete⁗, --i)}\" class=\"ml-1 mr-1 btn btn-info btn-sm cursor-pointer\" if=\"{item.isShowDetailActive ? ⁗disabled⁗ : ⁗enabled⁗}\"> <i if=\"{item.isShowDetailActive}\" class=\"fa fa-spinner fa-spin mg-r-10\"></i> Detail </button> <button if=\"{item.action.canStart}\" onclick=\"{() => this.start(item.id, item.type,true, ⁗complete⁗, --i)}\" type=\"button\" class=\"ml-1 mr-1 btn btn-success btn-sm cursor-pointer\" if=\"{item.isStartActive ? ⁗disabled⁗ : ⁗enabled⁗}\"> <i if=\"{item.isStartActive}\" class=\"fa fa-spinner fa-spin mg-r-10\"></i> Restart </button> <button if=\"{item.action.canDownload}\" onclick=\"{() => this.downloadFile(item.downloadLink)}\" type=\"button\" class=\"ml-1 mr-1 btn btn-primary btn-sm cursor-pointer\"> Download </button> <button if=\"{item.action.canDelete}\" onclick=\"{() => this.remove(item.id, item.type, ⁗complete⁗, --i)}\" type=\"button\" class=\"ml-1 mr-1 btn btn-danger btn-sm cursor-pointer\" if=\"{item.isDeleteActive ? ⁗disabled⁗ : ⁗enabled⁗}\"> <i if=\"{item.isDeleteActive}\" class=\"fa fa-spinner fa-spin mg-r-10\"></i> Delete </button> </td> </tr> </tbody> </table> <div class=\"pagination-box ht-80 d-flex align-items-center justify-content-between\"> <div class=\"p-2 mr-auto\"> &nbsp;Showing {pagination.pages} to {pagination.pages} of {pagination.total_data} entries </div> <div> <select class=\"form-control select2 mg-t-20\" data-placeholder=\"Item Limit\" ref=\"pageLimit\" onchange=\"{changeLimit}\"> <option value=\"10\">10</option> <option value=\"20\">20</option> <option value=\"50\">50</option> <option value=\"100\">100</option> </select> </div> <div> <pagging pagination=\"{pagination}\"></pagging> </div> </div> </div> </div> </div> </div> </div> </div> </div> <labeldetailmodal data=\"{labelDetail.data}\"></labelDetailModal>','download-tasks .pagination-box > div,[data-is=\"download-tasks\"] .pagination-box > div{ margin: 6px; }',\"\",(function(t){const e=this;this.labelDetail={data:{}},this.isRefreshActive=!1,this.noTask=!0,this.noTask=!0,this.activeTask=[],this.readyTask=[],this.completeTask=[],this.totalCompleteTask=0,this.totalActiveTask=0,this.autoReloadRunning=!1,this.autoReloadInterval=()=>{setInterval(async()=>{this.autoReloadRunning||(this.autoReloadRunning=!0,Promise.all([this.getActiveTask(),this.getCompleteTask()]).then(t=>{this.autoReloadRunning=!1}))},1e4)},this.query={limit:pageLimit,page:1,total_data:0,pages:0},this.pagination={page:1,cb:async t=>{this.query.page=t,await this.getCompleteTask()}},this.changeLimit=async t=>{t.preventDefault(),this.query.limit=parseInt(t.target.value),this.query.page=1,this.pagination.page=1,await this.getCompleteTask()},this.on(\"mount\",()=>{Promise.all([this.getActiveTask(),this.getCompleteTask()]).then(t=>{console.log(\"sucess\")})}),$(\"#labelDetailModal\").on(\"hidden.bs.modal\",(function(t){e.labelDetail.data={}})),this.showDetail=async(t,e,i,s,o)=>{this.toggleButton(s,o,\"isShowDetailActive\");try{if(0==i.length){let e=await this.apiGet({path:\"task\",data:{id:t,page:1,limit:1,state:0,field:\"label\"}});i=_.result(e,\"result.data.0.labels\",[]),t=_.result(e,\"result.data.0.id\",\"\"),i.length>0&&\"active\"==s?this.activeTask[o]={...this.activeTask[o],labels:i}:i.length>0&&\"complete\"==s&&(this.completeTask[o]={...this.completeTask[o],labels:i})}i.length>0&&(a.labels.hasOwnProperty(e)?(this.labelDetail={data:a.labels[e].formatForDisplayByLabel(i)},$(\"#labelDetailModal\").modal(\"toggle\"),this.update()):$.notify(\"type not found\",\"error\"),this.toggleButton(s,o,\"isShowDetailActive\"))}catch(t){throw this.toggleButton(s,o,\"isShowDetailActive\"),t}},this.downloadFile=async t=>{try{if(t&&\"\"==t)throw\"donwload link not valid\";let e=`task/download?filename=${t}&token=${localStorage.AuthToken}`,i=APP.apiUrl+e;window.open(i,\"_blank\")}catch(t){$.notify(\"download failed \"+t,\"error\")}},this.refresh=async()=>{this.isRefreshActive=!0,this.update(),await Promise.all([this.getActiveTask(),this.getCompleteTask()]),this.isRefreshActive=!1,this.update()},this.start=async(t,e,i,a,s)=>{this.toggleButton(a,s,\"isStartActive\");try{await this.apiPut({path:\"task/start\",data:{id:t,type:e}});$.notify(`starting task ${e} ${t} sucess`,\"info\"),i?(this.toggleButton(a,s,\"isStartActive\"),await Promise.all([this.getActiveTask(),this.getCompleteTask()])):(this.toggleButton(a,s,\"isStartActive\"),await this.getActiveTask())}catch(t){this.toggleButton(a,s,\"isStartActive\"),$.notify(\"starting task error\",\"error\")}},this.stop=async(t,e,i,a)=>{this.toggleButton(i,a,\"isStopActive\");try{await this.apiPut({path:\"task/stop\",data:{id:t,type:e}});this.toggleButton(i,a,\"isStopActive\"),$.notify(`stoping task ${e} ${t} sucess`,\"info\"),await Promise.all([this.getActiveTask(),this.getCompleteTask()])}catch(t){this.toggleButton(i,a,\"isStopActive\"),$.notify(\"stoping task error\",\"error\")}},this.toggleButton=(t,e,i=\"\")=>{\"active\"==t?this.activeTask[e]={...this.activeTask[e],[i]:!_.result(this.activeTask[e],i,!1)}:\"complete\"==t&&(this.completeTask[e]={...this.completeTask[e],[i]:!_.result(this.completeTask[e],i,!1)}),this.update()},this.remove=async(t,e,i,a)=>{try{this.toggleButton(i,a,\"isDeleteActive\");await this.apiPost({path:\"task/delete\",data:{id:t,type:e}});$.notify(`deleting task ${e} ${t} sucess`,\"info\"),this.toggleButton(i,a,\"isDeleteActive\"),await this.getCompleteTask()}catch(t){this.toggleButton(i,a,\"isDeleteActive\"),$.notify(\"deleting task error\",\"error\")}},this.formatExportStreamTask=function(t={},e=1){JSON.parse(t.payload);let i=JSON.parse(t.output);return t.type_format=\"Export Stream\",t.state=this.renderState(Number(i.state)),7==i.state&&2==e&&(t.state=\"interupted\"),t.action=this.renderButtonAction(i),t.filename=i.filename,t.downloadLink=_.result(i,\"filename.filename\",\"\"),t},this.formatTask=function(t={},e={},i=1){switch(t.isStopActive=_.result(e,\"isStopActive\",!1),t.isStartActive=_.result(e,\"isStartActive\",!1),t.isDeleteActive=_.result(e,\"isDeleteActive\",!1),t.isShowDetailActive=_.result(e,\"isShowDetailActive\",!1),t.createdAt=moment(t.createdAt).format(\"YYYY-MM-DD HH:mm\"),t.type){case\"export_stream\":t=this.formatExportStreamTask(t,i)}return t},this.renderState=function(t){let e=\"\";switch(t){case 0:e=\"pending\";break;case 1:e=\"on process\";break;case 2:e=\"complete\";break;case 3:e=\"finish\";break;case 4:e=\"failed\";break;case 5:e=\"dead\";break;case 6:e=\"waiting\";break;case 7:e=\"interupt\";break;default:return\"-\"}return e},this.renderButtonAction=function(t={},e,i){let a={};switch(a={canDetail:!0},!0){case[1,0,6].includes(t.state):a.canStop=!0;break;case[2].includes(t.state):a.canDownload=!0,a.canDelete=!0;break;case[2].includes(t.state):a.canDelete=!0;case[4].includes(t.state):a.canDelete=!0,a.canStart=!0;break;case[7].includes(t.state):a.canDelete=!0;break;default:a.canStart=!0}return a},this.apiPut=async function(t){return new Promise((e,i)=>{t={...t,success:function(t){e(t)},error:function(t,e,a){i(t,e,a)}},APP.apiPut(t)})},this.apiPost=async function(t){return new Promise((e,i)=>{t={...t,success:function(t){e(t)},error:function(t,e,a){i(t,e,a)}},APP.apiPost(t)})},this.apiGet=async function(t){return new Promise((e,i)=>{t={...t,success:function(t){e(t)},error:function(t,e,a){i(t,e,a)}},APP.apiGet(t)})},this.getActiveTask=async function(){try{let t=await Promise.all([this.apiGet({path:\"task\",data:{page:1,limit:1e3,state:3,field:\"namespace,payload,output,name,type\",user_id:localStorage.userid}}),this.apiGet({path:\"task\",data:{page:1,limit:1e3,state:1,field:\"namespace,payload,output,name,type\",user_id:localStorage.userid}})]);if(this.activeTask=[..._.result(t,\"0.result.data\",[]),..._.result(t,\"1.result.data\",[])],this.activeTask.length>0){let t=t=>this.activeTask.filter(e=>e.id==t);this.activeTask=this.activeTask.map(e=>this.formatTask(e,_.result(t(e.id),\"0\",{}),1))}else this.activeTask=[];this.totalActiveTask=_.result(t,\"0.result.meta.totalData\",0)+_.result(t,\"1.result.meta.totalData\",0),this.update()}catch(t){$.notify(\"get active task error \"+t,\"error\")}},this.updateTabActive=async()=>{await this.getActiveTask()},this.updatedTabComplete=async()=>{await this.getCompleteTask()},this.getCompleteTask=async()=>{try{let t=await this.apiGet({path:\"task\",data:{...this.query,state:2,field:\"namespace,payload,output,name,type\",user_id:localStorage.userid}});if(_.result(t,\"result.data\",[]).length>0){let e=t=>this.completeTask.filter(e=>e.id==t);this.completeTask=t.result.data.map(t=>this.formatTask(t,_.result(e(t.id),\"0\",{}),2))}else this.completeTask=[];this.totalCompleteTask=_.result(t,\"result.meta.totalData\",0),this.pagination.pages=_.result(t,\"result.meta.totalPage\",0),this.pagination.total_data=_.result(t,\"result.meta.totalData\",0),this.update()}catch(t){$.notify(\"get complete task error \"+t,\"error\")}}}))},295:function(t,e,i){\"use strict\";i.r(e);var a=i(0);i(10);i(1).tag2(\"facebook\",'<div class=\"panel\"> <header-menu></header-menu> </div> <div class=\"container-fluid fade\" style=\"margin-top:20px;\"> <div class=\"row\"> <div class=\"col-md-12\"> <div class=\"panel\"> <div class=\"panel-body\"> <div class=\"row\"> <div class=\"col-md-12\"> <div class=\"row\" style=\" border-bottom: 2px solid #eee;\"> <div class=\"col-md-9\" style=\"border-right: 1px solid #eee ;\"> <h4 class=\"panel-head\"> Facebook<h4> <hr> <div class=\"panel-body\"> <form class=\"form-horizontal\"> <div class=\"form-group\"> <label for=\"date\" class=\"control-label col-sm-3\"><p>Facebook Account</p></label> <div class=\"col-sm-6\"> <select class=\"form-control\" id=\"custom\" multiple=\"multiple\" ref=\"facebook\" required> <option selected=\"{selected:o.fans_url}\" each=\"{o,i in getfanpage}\" id=\"{o.fans_page_id}\">{o.fans_url}</option> </select> <i class=\"fa fa-info-circle fa-1x toltiptext visible-xs visible-sm\" aria-hidden=\"true\" data-toggle=\"tooltip\" title=\"Put facebook account name for author that want to be registered as a buzzer\" data-placement=\"left\"></i> </div> <div class=\"col-sm-3\"><i class=\"fa fa-info-circle fa-1x hidden-xs hidden-sm\" aria-hidden=\"true\" style=\"margin-top:20px\" data-toggle=\"tooltip\" title=\"facebook account \" data-placement=\"right\"></i> </div> </div> </form> </div> </div> <div class=\"col-md-3\"> </div> </div> <div class=\"row\"> <div class=\"col-md-12\"> <div class=\"col-md-2 col-md-offset-10\"> <div>&nbsp;</div> <div id=\"addprojectaccount\" class=\"accsaved pointer\" onclick=\"{postfacebook}\">save</div> </div> </div> </div> </div> </div> </div> </div> </div> </div>',\"\",\"\",(function(t){this.addAccount=!1,this.refresh=!0,this.accountHide=!0,this.profileId=null,this.selectedPages=[],this.subcribedPage=[],this.indexdata=[],this.closedId,this.errordata=!1,this.on(\"mount\",()=>{APP.log(\"Account : mount\"),menuActive.trigger(\"activated\",[\"project_settings\"]),urlStream.trigger(\"changeUrl\",\"setting/facebook\"),APP.animationFadeIn(),this.getfacebook(),$(\"select#custom\").select2({tags:!0,width:\"100%\"})}),$(document).ready((function(){$(\"select#custom\").on(\"select2:closing\",(function(t){let e=t.params.args.originalSelect2Event;if(!e)return null;if(e=e.data.element,void 0===e)return null;var i=e.id;if(!i)return null;swal({title:\"Alert\",text:\"Are you sure you want to delete this URL facebook crawl?\",type:\"warning\",showCancelButton:!0,confirmButtonColor:\"#DD6B55\",closeOnConfirm:!0,confirmButtonText:\"YES \",cancelButtonText:\"NO\"},t=>{if(t){var e={project:p(\"project\")?p(\"project\"):APP.getProject()};APP.apiGet({path:\"projects/client-fanpage/\"+i,data:e,success:function(t){setTimeout(()=>{swal({title:\"Success\",text:\"Succes\",type:\"success\",confirmButtonColor:\"#DD6B55\",closeOnConfirm:!0})},1e3)}})}else location.reload()})}))})),this.postfacebook=()=>{APP.log(\"buzzer-account : postfacebook\");var t=this.refs.facebook,e=$(t).val().toString(),i={project:p(\"project\")?p(\"project\"):APP.getProject(),fanpages:e,parse_data:!0};APP.apiPost({path:\"projects/client-fanpage\",data:i,parse_data:!0,success:function(t){console.log(\"succes\",t);var e=t.data;if(t.data)Object(a.forEach)(e,(function(t){Object(a.isEmpty)(t)||$(\".select2-selection__rendered li\").each((function(e){var i=$(this).attr(\"title\");i===t.url&&($(this).css(\"color\",\"red\"),$(this).html('<span class=\"select2-selection__choice__remove\" role=\"presentation\">×</span>'+i+\" (invalid url) \"))}))}));t.data?swal({title:\"Alert\",text:\"invalid URL\",type:\"warning\",confirmButtonColor:\"#DD6B55\",closeOnConfirm:!0,confirmButtonText:\"YES \"}):swal({title:\"Success\",text:\"Succes\",type:\"success\",confirmButtonColor:\"#DD6B55\",closeOnConfirm:!0})}})},this.getfacebook=()=>{APP.log(\"buzzer-account : postfacebook\");var t={project:p(\"project\")?p(\"project\"):APP.getProject()};APP.apiGet({path:\"projects/client-fanpage\",data:t,success:function(t){this.getfanpage=t,this.update()}.bind(this)})}}))},296:function(t,e,i){\"use strict\";i.r(e);i(9),i(5),i(128),i(127),i(126),i(125);i(1).tag2(\"healthindexaccount\",'<breadcrumb current=\"Dashboard Digital Helath Index\" ref=\"breadcrumb\" mode=\"project\"></breadcrumb> <div class=\"br-pagebody pd-x-20 pd-sm-x-30\"> <div class=\"row\"> <div class=\"col-md-12\"> <div class=\"widget-2\"> <div class=\"card shadow-base overflow-hidden\"> <div class=\"card-header borderbottom0\"> <div class=\"media-body mg-t-10\"> <h4 class=\"tx-normal tx-roboto tx-inverse mg-b-5\">DIGITAL HEALTH INDEX</h4> </div> <div class=\"btn-group pull-right mg-r-m-0\" role=\"group\" aria-label=\"Basic example\"> <div class=\"pd-x-25 tx-11 pd-y-12 tx-mont tx-medium datepickerbacgraoud\"> <span> <date-picker cb=\"{setDate}\" since=\"{localStorage.since}\" until=\"{localStorage.until}\" class=\"fc-datepicker btn bg-grey-50 padding-10-20 no-border color-grey-600 pull-right date-style\" style=\"padding:0px\"></date-picker></span> </div> </div> </div> </div> </div> </div> </div> <totalhealthindex ref=\"totalhealthindex\"></totalhealthindex> <div class=\"row row-sm\"> <div class=\"col-md-12 mg-t-20\"> <sentimentchannels ref=\"sentimenperchannels\"></sentimentchannels> </div> </div> <div class=\"row row-sm\"> <div class=\"col-md-6 mg-t-20\"> <interactionmetric ref=\"interactionmetric\"></interactionmetric> </div> <div class=\"col-md-6 mg-t-20\"> <averagedailymentions ref=\"averagedailymention\"></averagedailymentions> </div> </div> </div>',\"\",\"\",(function(t){const e=APP.services.HealthIndex,i=[\"totalhealthindex\",\"sentimenperchannels\",\"interactionmetric\",\"averagedailymention\"];this.search={since:null,until:null,project:null,service_category:null},this.getHealth=async()=>{const t=new e;return await t.getSummary(this.search)},this.getHealthSentiment=async()=>{const t=new e;return await t.getSentiment(this.search)},this.setAllIsLoadingMode=()=>{for(const t of i)\"totalhealthindex\"===t&&(this.refs[t].isLoadingDiff=!0,this.refs[t].isLoadingSummaryItems=!0),this.refs[t].isLoading=!0;this.update()},this.setDate=(t,e)=>{this.search.since=t,this.search.until=e,this.refreshLoadData()},this.renderComponent=(t,e)=>{APP.log(\"refreshing data on ref:\",t),this.refs[t].render(e)},this.refreshLoadData=async(t,e)=>{APP.log(\"health-index-account: updateDate\"),this.setAllIsLoadingMode(),this.getHealth().then(({summary:t,details:e,available_channels:i})=>{this.renderComponent(\"totalhealthindex\",{summary:t,details:e,ac:i,search:this.search}),this.renderComponent(\"interactionmetric\",{summary:t,details:e,ac:i,search:this.search})}),this.getHealthSentiment().then(({items:t,available_channels:e})=>{this.renderComponent(\"sentimenperchannels\",{items:t,ac:e,search:this.search})}),this.renderComponent(\"averagedailymention\")},this.on(\"mount\",()=>{APP.log(\"health-index-account: mount\"),menuActive.trigger(\"activated\",[\"advance_analysis\",\"dhi\"]),urlStream.trigger(\"changeUrl\",\"health-index-r10\"),urlStream.trigger(\"Urlproject\",p(\"project\")?p(\"project\"):APP.getProject()),APP.currentProject=this.search.project=p(\"project\")?p(\"project\"):APP.getProject(),this.update(),ripple10.loaddaterangepicker(),$(\"body,html\").animate({scrollTop:0},500)})}))},297:function(t,e,i){\"use strict\";i.r(e);var a=i(0);i(129),i(130),i(149),i(75);i(1).tag2(\"dasboardindosat\",'<div class=\"container-fluid\" style=\"background: white;\"> <div class=\"row\"> <div class=\"col-md-12 panel\" style=\"padding:20px;\"> <filter-form ref=\"filter_form\"></filter-form> </div> </div> <div class=\"row\" style=\"margin-top:30px;\"> <div class=\"col-md-12\"> <channel-sentiment cb=\"{updateChannel}\" ref=\"channel\" id=\"targetDiv\"></channel-sentiment> </div> </div> <sourceofmentionpositivepie ref=\"sourcemention_positivepie\"></sourceofmentionpositivepie> <sourceofmentionnegativepie ref=\"sourcemention_negativepie\"></sourceofmentionnegativepie> </div>',\"\",\"\",(function(t){this.dataProjects=[],this.nameproject={},this.active=!1,this.data=localStorage.nameprj,this.updateData=JSON.parse(localStorage.getItem(\"projects\")),this.search={since:null,until:null,project:null},this.channels=null,this.projectList=[],APP.apiGet({path:\"projects/list?selected_fields=key_id,key_name,key_color\",success:t=>{this.projectList=t}}).done(()=>{APP.log(\"project request done\")}),this.on(\"mount\",()=>{if(this.search.since=localStorage.since.replace(/%20/g,\" \"),this.search.until=localStorage.until.replace(/%20/g,\" \"),document.projectCompetition=p(\"competition\")?p(\"competition\").split(\",\").filter(t=>t&&t.length>0).toString():\"\",this.competitionProjects=document.projectCompetition.split(\",\").map(t=>parseInt(t)),APP.log(\"domaint infographic: mount\"),urlStream.trigger(\"changeUrl\",\"domain/indosatreport\"),APP.currentProject=this.search.project=p(\"project\")?p(\"project\"):APP.getProject(),p(\"q\")&&(document.keyword=decodeURIComponent(\"\"+p(\"q\")),this.search.q=document.keyword),p(\"domain\")&&(this.search.domain=0==p(\"domain\")?\"\":p(\"domain\").replace(/%20/g,\" \")),p(\"author\")&&(document.author=decodeURIComponent(\"\"+p(\"author\")),this.search.author=document.author),p(\"filterbot\")&&(document.filterbot=0==p(\"filterbot\")?\"\":decodeURIComponent(\"\"+p(\"filterbot\")),this.search.filterbot=document.filterbot),localStorage.prj=p(\"project\"),p(\"since\")){const t=decodeURIComponent(\"\"+p(\"since\"));this.search.since=t.substring(0,10),localStorage.since=t.substring(0,10)}if(p(\"until\")){const t=decodeURIComponent(\"\"+p(\"until\"));localStorage.until=t.substring(0,10),this.search.until=t.substring(0,10)}setTimeout(()=>{const t=this.channels=this.refs.channel.getChannelSelected(),e=Object(a.map)(t,t=>t.id);this.search.service_category=e.join(\",\"),this.update(),this.project(),this.render()},500)}),this.render=()=>{setTimeout(()=>{this.refs.channel.render(),this.refs.sourcemention_positivepie.render(),this.refs.sourcemention_negativepie.render(),this.setTotal()},1e3)},this.setTotal=()=>{APP.log(\"competitive: setTotal\"),this.search.project=p(\"project\")?p(\"project\"):\"undefined\",this.search.group_service=\"true\",this.search.section=\"\";let t={};this.xhr=APP.apiGet({path:\"mentions\",data:this.search,success:t=>{this.refs.channel.updateCount(t.items)}}),this.xhr.readyState&&(this.refs.channel.updateCount(t),this.update())},this.projectsetting=()=>{window.location=\"#domain/infographic?project=\"+localStorage.prjId},this.project=()=>{APP.log(\"header : project\");null!=localStorage.getItem(\"projects\")&&\"\"!=localStorage.getItem(\"projects\")?this.norequestProject(JSON.parse(localStorage.getItem(\"projects\"))):APP.apiGet({path:\"projects/list\",data:{selected_fields:\"key_id, key_name,key_start_date, key_color , key_id, key_is_buzzer_tracking, key_is_health_index, key_is_prdashboard ,key_is_cc\"},success:t=>{localStorage.setItem(\"projects\",JSON.stringify(t)),this.norequestProject(t)}})},this.norequestProject=t=>{if(p(\"project\")?p(\"project\"):APP.getProject()){var e=p(\"project\")?p(\"project\"):APP.getProject().toString(),i=e.split(\",\").map(Number);Object(a.map)(t,(function(t){return{id:t.key_id,date:moment(t.key_start_date).format(\"DD MMMM YYYY\"),name:t.key_name,color:t.key_color,hi:t.key_is_health_index,bt:t.key_is_buzzer_tracking,pr:t.key_is_prdashboard,cc:t.key_is_cc}})).forEach(t=>{i.indexOf(t.id)>-1?t.checked=!0:t.checked=!1,this.dataProjects.push(t)}),this.nameproject[e]=this.dataProjects,this.nameprj=Object(a.filter)(this.dataProjects,(function(t){return t.checked})),this.data=this.nameprj[0].name,this.updateData=Object(a.sortBy)(this.dataProjects,[function(t){return!t.checked}]),this.update()}},this.updateFilter=t=>{this.search=t,setTimeout(function(){const t=this.search.project,e=this.search.since,i=this.search.until;localStorage.prj=t,localStorage.since=e,localStorage.until=i,this.render(),this.update()}.bind(this),100)}}))}}]);","extractedComments":[]}