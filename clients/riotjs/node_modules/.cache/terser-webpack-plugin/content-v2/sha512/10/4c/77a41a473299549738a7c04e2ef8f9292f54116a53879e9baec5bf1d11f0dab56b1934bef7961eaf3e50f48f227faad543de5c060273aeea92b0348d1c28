{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{182:function(t,a,e){\"use strict\";e.r(a);var i=e(12),r=e.n(i),s=e(10),o=e.n(s);e(6);e(0).tag2(\"everagemention\",'<div class=\"card\"> <div class=\"card-header d-flex justify-content-between align-items-center\"> <span class=\"card-title tx-uppercase tx-12 mg-b-0\"> <ul class=\"nav nav-tabs card-header-tabs flex-direction-row\"> <li class=\"nav-item widthper50 cursor-pointer\"> <a class=\"nav-link {active:charteverage} textoverflowhidden tx-uppercase tx-16 color-tittle\" data-toggle=\"tab\" onclick=\"{everage}\"> <img src=\"assets/img/image/calender-teal.png\" width=\"20\" height=\"20\" class=\"mg-r-5\"> TOP MENTIONS TIME </a> </li> <li class=\"nav-item widthper50 cursor-pointer\"> <a class=\"nav-link {active:!charteverage} textoverflowhidden tx-uppercase tx-16 color-tittle\" data-toggle=\"tab\" onclick=\"{toptime}\"> <img src=\"assets/img/image/clock-teal.png\" width=\"20\" height=\"20\" class=\"mg-r-5\"> AVERAGE DAILY MENTIONS </a> </li> </ul> </span> <span class=\"pull-right cursor-default\"><img src=\"assets/img/image/dowload-teal.png\" width=\"20\" height=\"20\" class=\"cursor-pointer img-download\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"Download\" onclick=\"{downloadcsv}\"></span> </div> <tombol-refres cb=\"{refresError}\" if=\"{isLoadingerror}\"></tombol-refres> <div class=\"card-body pd-0 bd-color-gray-lighter textcenter mg-t-0\" if=\"{charteverage && isLoading}\"> </div> <div class=\"ripple-loader \" if=\"{isLoading}\"></div> <div class=\"card-body pd-0 bd-color-gray-lighter height620 textcenter mg-t-20\" if=\"{notdata}\"> No data found, please input another dates </div> <div class=\"card-body pd-0 bd-color-gray-lighter height620 textcenter mg-t-20\" if=\"{notdata1}\"> No data found, please input another dates </div> <div class=\"card-body pd-0 bd-color-gray-lighter height620\" id=\"chartstreamtop\" if=\"{charteverage && !notdata}\"> </div> <div class=\"card-body pd-0 bd-color-gray-lighter height620\" id=\"chartdailyaverage\" if=\"{!charteverage && !notdata1}\"> </div> </div>',\"\",\"\",(function(t){var a=0;this.isLoadingerror=!1,this.charttoptime=null,this.chartaveragedaily=null,this.isLoading=!0,this.notdata=!1,this.notdata1=!1,this.xhr=null,this.tombolrefres=!1,this.charteverage=!0,this.fontcolor=!1,this.everage=t=>{this.update({isLoading:!0,charteverage:!0}),this.render()},this.toptime=t=>{APP.log(\"chart streams time : render\");let e=_.clone(this.parent.search);e.type=null,\"analysis/my-stream..\"==APP.currentHash?(this.tombolrefres=!0,this.fontcolor=!1):this.fontcolor=!0,this.update({isLoading:!0,charteverage:!1}),this.xhrtopstreams=APP.apiGet({path:\"mentions/average-daily-mentions\",data:e,success:t=>{t=t.items;let a=[],e={sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6};for(const i in t){let r=t[i];for(const t in r)a.push({x:e[t],y:parseInt(i-1),total:r[t],z:r[t]})}if(0===(t=_.filter(a,(function(t){return 0!=t.total})).length))return this.notdata1=!0,this.notdata=!1,this.isLoading=!1,void this.update();this.update({notdata1:!1,notdata:!1}),this.chartaveragedaily&&this.chartaveragedaily.spacing&&this.chartaveragedaily.destroy(),this.everagevalue=a,(this.chartaveragedaily=r()(\"chartdailyaverage\")).addSeries({color:\"#38a1f2\",data:a}),this.update({isLoading:!1,isLoadingerror:!1})},error:e=>{++a<3&&setTimeout(()=>{this.render()},3e3),a>=3&&(this.isLoading=!1,this.isLoadingerror=!0,this.update()),_.isFunction(t)&&t()}})},this.render=t=>{if(this.xhr=APP.log(\"chart Average daily  : render\"),!this.charteverage)return void this.toptime();let e=_.clone(this.parent.search);e.type=null,this.update({isLoading:!0}),this.xhraverage=APP.apiGet({path:\"mentions/top-mentions-time\",data:e,success:a=>{_.isFunction(t)&&t(),a=a.items;let e=[];for(const t in a){let i=_.result(a,t,\"\");e.push([new Date(t.substring(0,10)).getTime(),i.jam,i.count])}if(0===e.length)return this.notdata=!0,this.notdata1=!1,this.isLoading=!1,void this.update();this.update({notdata:!1,notdata1:!1}),this.charttoptime&&this.charttoptime.spacing&&this.charttoptime.destroy(),this.topstreamvalue=e,(this.charttoptime=o()(\"chartstreamtop\")).addSeries({color:\"#38a1f2\",data:e}),this.update({isLoading:!1,isLoadingerror:!1})},error:e=>{++a<3&&setTimeout(()=>{this.render()},3e3),a>=3&&(this.isLoading=!1,this.isLoadingerror=!0,this.update()),_.isFunction(t)&&t()}})},this.downloadcsv=()=>{var t=\"\",a=\"\";if(this.charteverage)a=\"Top_Mention_time_\",t=this.topstreamvalue.map((t,a)=>({date:moment(Number(t[0])).format(\"YYYY-MM-DD\"),Jam:t[1]+\" : 00\",Count:t[2]}));else{a=\"Average_daily_Mentions_\";let e={0:\"sun\",1:\"mon\",2:\"tue\",3:\"wed\",4:\"thu\",5:\"fri\",6:\"sat\"},i={0:\"00-05\",1:\"06-11\",2:\"12-17\",3:\"18-23\"};t=this.everagevalue.map((t,a)=>({Hari:e[t.x],Jam:i[t.y],Count:t.total}))}t.length>0&&APP.downloadcsv(t,\"\"+(a+p(\"project\")),!0)},this.refresError=()=>{this.isLoadingerror=!1,this.isLoading=!0,a=0,this.update(),this.render()},this.on(\"mount\",()=>{this.xhraverage=null,\"analysis/my-stream..\"==APP.currentHash&&(this.tombolrefres=!0),this.update()}),this.on(\"unmount\",()=>{this.xhraverage&&this.xhraverage.abort(),this.charttoptime&&this.charttoptime.spacing&&(this.charttoptime.destroy(),APP.log(\"chart streams : destroy chart\")),this.chartaveragedaily&&this.chartaveragedaily.spacing&&(this.chartaveragedaily.destroy(),APP.log(\"chart streams : destroy chart\"))})}))}}]);","extractedComments":[]}