{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{192:function(t,e,i){\"use strict\";i.r(e);i(6);i(0).tag2(\"wordcloaudsummary\",'<div class=\"card shadow-base bd-0\"> <div class=\"row no-gutters widget-1\"> <div class=\"col-md-12\"> <div class=\"card-header pd-20 bg-transparent\" style=\"border-bottom: 1px solid #eaecf0;\"> <h6 class=\"card-title tx-uppercase tx-12 mg-b-0\"> <img src=\"assets/img/image/cloud-teal.png\" width=\"20\" height=\"20\" class=\"mg-r-5 mg-t-min-6\">WORDCLOUD </h6> <span> <img src=\"assets/img/image/dowload-teal.png\" width=\"20\" height=\"20\" class=\"cursor-pointer \" data-toggle=\"tooltip\" data-placement=\"top\" title=\"Download\" onclick=\"{downloadcsv}\"> <b class=\"cursor-default mg-l-10 fontweightinherit\" aria-hidden=\"true\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"Visual representation of popular words in your mentions. The more a word mentioned the bigger and bolder it appears in the word cloud.\">?</b> </span> </div> <div class=\"card-body\"> <div class=\"col-md-12 wordcloudheight235 textcenter\" if=\"{total == 0}\"> No data found, please input another dates </div> <div class=\"ripple-loader\" if=\"{isLoading}\"></div> <tombol-refres cb=\"{refresError}\" if=\"{isLoadingerror}\"></tombol-refres> <div class=\"col-md-12\" if=\"{total != 0}\"> <div id=\"wordcloud_canvas \"> <div id=\"wordcloud_all\" class=\"wordcloudheight235\"> </div> </div> </div> </div> </div> </div> </div>',\"\",\"\",(function(t){var e=0;this.isLoadingerror=!1,this.isLoading=!0,this.notdata=!1,this.value={},this.dataall={},this.xhr=null,this.render=t=>{this.update_data(t)},this.update_data=t=>{this.notdata=!1,APP.log(\"wordcloude : render\"),this.update({isLoading:!0,total:1});let i=_.clone(this.parent.search);i.is_total=null,i.limit=50,this.xhr=APP.apiGet({path:\"mentions/wordcloud\",data:i,success:t=>{let e=t.items;var a=_.clone(e);if(\"negative\"===i.section||\"negative,neutral\"===i.section||\"neutral,negative\"===i.section)var o=a&&a.negative?a.negative:[];if(\"positive\"===i.section||\"positive,neutral\"===i.section||\"neutral,positive\"===i.section)o=a&&a.positive?a.positive:[];if(\"positive,negative\"===i.section||\"negative,positive\"===i.section){var s=a&&a.positive?a.positive:[],n=a&&a.negative?a.negative:[];o=_.concat(s,n)}if(\"\"===i.section||null===i.section||void 0===i.section||\"positive,negative,neutral\"===i.section||\"positive,neutral,negative\"===i.section||\"negative,positive,neutral\"===i.section||\"negative,neutral,positive\"===i.section||\"neutral,negative,positive\"===i.section||\"neutral,positive,negative\"===i.section){o=a&&a.all?a.all:[];this.dataall.all=o}if(\"neutral\"===i.section)o=this.dataall.all;o=_.orderBy(o,[1],\"desc\"),this.dataVal=o,this.dataresizeseries=o,this.renderedData(o),this.update({isLoading:!1,isLoadingerror:!1})},error:i=>{++e<3&&setTimeout(()=>{this.render()},3e3),e>=3&&(this.isLoading=!1,this.isLoadingerror=!0,this.update()),_.isFunction(t)&&t()}})},this.refresError=()=>{this.isLoadingerror=!1,this.isLoading=!0,e=0,this.update(),this.render()},this.renderedData=t=>{let e=t;if(this.total=t?t.length:0,this.update({total:this.total}),this.total>0){const t=e[0][1];e.map(e=>{const i=e[0].length,a=parseInt(e[1]);let o=a/t*100;return i>10&&(o=10,a/t*100>60&&(o=a/t*50)),o<15&&(o=15),e[1]=o,e}),$(\"#wordcloud_container\").show(),$(\"#wordcloud_canvas\").removeClass(\"upload\"),$(\"#wordcloud_all\").show(),WordCloud(\"wordcloud_all\",{list:e,backgroundColor:\"transparent\",gridSize:Math.round(16*$(\"#wordcloud_all\").width()/1024),weightFactor:t=>t,shape:\"square\",shuffle:!1,minRotation:0,maxRotation:0,rotateRatio:1,click:t=>{this.parent.detailmentions(null,null,null,null,t[0],null,\"Keywords\",null,null,null,null,null)}})}else this.notdata=!0,$(\"#wordcloud_container\").hide(),$(\"#wordcloud_canvas\").removeClass(\"upload\"),$(\"#wordcloud_all\").html(\"Empty\"),$(\"#wordcloud_all\").show()},$(window).resize(()=>{this.dataresize()}),this.dataresize=()=>{this.update({isLoading:!0});var t=this.dataresizeseries;if(t&&t.length>0){const e=t[0][1];t.map(t=>{const i=t[0].length,a=parseInt(t[1]);let o=a/e*100;return i>10&&(o=10,a/e*100>60&&(o=a/e*50)),o<15&&(o=15),t[1]=o,t}),$(\"#wordcloud_container\").show(),$(\"#wordcloud_canvas\").removeClass(\"upload\"),$(\"#wordcloud_all\").show(),WordCloud(\"wordcloud_all\",{list:t,backgroundColor:\"transparent\",gridSize:Math.round(16*$(\"#wordcloud_all\").width()/1024),weightFactor:t=>t,shape:\"square\",shuffle:!1,minRotation:0,maxRotation:0,rotateRatio:1,click:t=>{this.parent.detailmentions(null,null,null,null,t[0],null,\"Keywords\")}})}else this.notdata=!0,$(\"#wordcloud_container\").hide(),$(\"#wordcloud_canvas\").removeClass(\"upload\"),$(\"#wordcloud_all\").html(\"Empty\"),$(\"#wordcloud_all\").show();this.update({isLoading:!1})},this.on(\"mount\",()=>{this.xhr=null}),this.on(\"unmount\",()=>{this.xhr&&this.xhr.abort()});this.downloadcsv=()=>{let t=_.clone(this.parent.search);t.is_total=null,t.limit=50,this.xhr=APP.apiGet({path:\"mentions/wordcloud\",data:t,success:e=>{e=e.items;var i=_.clone(e);if(\"negative\"===t.section||\"negative,neutral\"===t.section||\"neutral,negative\"===t.section)var a=i&&i.negative?i.negative:[];if(\"positive\"===t.section||\"positive,neutral\"===t.section||\"neutral,positive\"===t.section)a=i&&i.positive?i.positive:[];if(\"positive,negative\"===t.section||\"negative,positive\"===t.section){var o=i&&i.positive?i.positive:[],s=i&&i.negative?i.negative:[];a=_.concat(o,s)}if(\"\"===t.section||null===t.section||void 0===t.section||\"positive,negative,neutral\"===t.section||\"positive,neutral,negative\"===t.section||\"negative,positive,neutral\"===t.section||\"negative,neutral,positive\"===t.section||\"neutral,negative,positive\"===t.section||\"neutral,positive,negative\"===t.section){a=i&&i.all?i.all:[];this.dataall.all=a}if(\"neutral\"===t.section)a=this.dataall.all;var n=a;(n=_.map(n,(function(t,e){return{keyword:t[0],count:t[1].formatMoney(0)}}))).length>0&&APP.downloadcsv(n,\"WordcloudSummary_\"+p(\"project\"),!0)}})}}))}}]);","extractedComments":[]}