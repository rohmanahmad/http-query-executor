{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[53],{155:function(t,a,e){\"use strict\";e.r(a);var i=e(0);e(1).tag2(\"tablemention\",'<div class=\"row no-gutters widget-1 mg-t-20\"> <div class=\"col-md-12\"> <div class=\"card-header pd-20 bg-transparent\"> <h6 class=\"card-title tx-20 tx-uppercase tx-12 mg-b-0\"> <img src=\"assets/img/image/line-chart-teal.png\" width=\"30\" height=\"30\" class=\"mg-r-5\"> TABLE OF MENTION </h6> </div> <div class=\"bg-transparent min-height360 \"> <div class=\"br-section-wrapper stats\"> <div class=\"bd bd-gray-300 rounded table-responsive\"> <table class=\"table mg-b-0 tx-20-r10\"> <thead> <tr class=\"toptable tx-20-r10 bg-gray-600\"> <th class=\" tx-white tx-20-r10\">NO</th> <th class=\" tx-white tx-20-r10\">PROJECT</th> <th class=\" text-right tx-white tx-20-r10\">POSITIVE</th> <th class=\" text-right tx-white tx-20-r10\">NEGATIVE</th> <th class=\" text-right tx-white tx-20-r10\">NEUTRAL</th> <th class=\" text-right tx-white tx-20-r10\">TOTAL</th> <th class=\" text-right tx-white tx-20-r10\">POTENSIAL REACH</th> </tr> </thead> <tbody> <tr each=\"{o,i in valuedataTable}\"> <th class=\"mobilestd tx-white bg-gray-600\" scope=\"row\">{i+1}</th> <th class=\"mobilestd tx-white bg-gray-600 \" scope=\"row\" each=\"{projectfilter}\" if=\"{id == Number(o.prj)}\">{name}</th> <td class=\"mobilestd text-right tx-black {bg-success:o.maxposbgcolor} {bg-danger:o.minposbgcolor}\">{o.positive ? o.positive.formatMoney(0) : 0} {o.pospresentase}</td> <td class=\"mobilestd text-right tx-black {bg-success:o.maxnegbgcolor} {bg-danger:o.minnegbgcolor}\">{o.negative ? o.negative.formatMoney(0) :0} {o.negpresentase}</td> <td class=\"mobilestd text-right tx-black {bg-success:o.maxneutbgcolor} {bg-danger:o.minneutbgcolor}\">{o.neutral ? o.neutral.formatMoney(0) : 0} {o.neutpresentase}</td> <td class=\"mobilestd text-right tx-black {bg-success:o.maxtotalbgcolor} {bg-danger:o.mintotalbgcolor}\">{o.total ? o.total.formatMoney(0) : 0}</td> <td class=\"mobilestd text-right tx-black {bg-success:maxpotentialbgcolor} {bg-danger:minpotentialbgcolor}\" each=\"{potentialreach}\" if=\"{Number(o.prj) == Number(prj)}\">{potential ? potential.formatMoney(0) : 0}</td> </tr> <tr class=\"tr td th\" if=\"{this.total == 0}\"> <td colspan=\"2\" class=\"txtcenter\">No data found, please input another dates</td> </tr> </tbody> </table> </div> </div> </div> </div> </div>',\"\",\"\",(function(t){this.cachesentimentmention={},this.cachepositive={},this.cachenegative={},this.cacheneutral={},this.chacetotal={},this.chacereachtotal={},this.totalreach=[],this.render=()=>{this.renderData(),this.renderreachdata()},this.renderreachdata=()=>{let t=Object(i.clone)(this.parent.search);t.group_service=\"true\";const a=p(\"project\"),e=document.projectCompetition?document.projectCompetition:\"\",o=decodeURIComponent(`${a},${e}`);var r=(\"string\"==typeof o?o.split(\",\").map(t=>t.trim()).filter(t=>\"\"!==t).toString():\"\").split(\",\");this.potentialreach=[],async.each(r,(a,e)=>{t.project=a,APP.apiGet({path:\"summary/twitter\",data:t,success:t=>{t=t.items;let e=this.chacereachtotal[a]={potential:parseInt(t.top_reach_tw),prj:a};this.potentialreach.push(e)}}).done((function(){e()}))},()=>{var t=Math.max.apply(Math,this.potentialreach.map((function(t){return t.potential})));this.potentialreach=this.potentialreach.map((function(a){return t==a.potential?(a.maxpotentialbgcolor=!0,a):(a.maxpotentialbgcolor=!1,a)}));var a=Math.min.apply(Math,this.potentialreach.map((function(t){return t.potential})));this.potentialreach=this.potentialreach.map((function(t){return a==t.potential?(t.minpotentialbgcolor=!0,t):(t.minpotentialbgcolor=!1,t)}))})},this.renderData=()=>{APP.log(\"sentiment : update data\"),this.isLoading=!0,this.update({isLoading:!0});let t=Object(i.clone)(this.parent.search);const a=p(\"project\"),e=document.projectCompetition?document.projectCompetition:\"\",o=decodeURIComponent(`${a},${e}`),r=\"string\"==typeof o?o.split(\",\").map(t=>t.trim()).filter(t=>\"\"!==t).toString():\"\";this.validProjects=r;var s=r.split(\",\");this.dataarray=[],async.each(s,(a,e)=>{t.project=a,APP.apiGet({path:\"mentions/sentiment-count\",data:t,success:t=>{const i=(t=t.items).negative?parseInt(t.negative):0,o=t.positive?parseInt(t.positive):0,r=t.neutral?parseInt(t.neutral):0,s=i+o+r;this.chacetotal[a]=o+i+r,this.cachepositive[a]=100*o/this.chacetotal[a],this.cachenegative[a]=100*i/this.chacetotal[a],this.cacheneutral[a]=100*r/this.chacetotal[a];let n=this.cachesentimentmention[a]={negative:Number(i),negpresentase:\" (\"+this.cachenegative[a].formatMoney(2)+\"%)\",positive:Number(o),pospresentase:\" (\"+this.cachepositive[a].formatMoney(2)+\"%)\",neutral:Number(r),neutpresentase:\" (\"+this.cacheneutral[a].formatMoney(2)+\"%)\",total:s,prj:a};this.dataarray.push(n),this.isLoading=!1,this.sValue=t,this.update(),e()}}),this.update({isLoading:!1})},()=>{this.valuedataTable=Object(i.orderBy)(this.dataarray,[\"total\"],[\"desc\"]);var t=Math.max.apply(Math,this.valuedataTable.map((function(t){return t.positive})));this.valuedataTable=this.valuedataTable.map((function(a){return t==a.positive?(a.maxposbgcolor=!0,a):(a.maxposbgcolor=!1,a)}));var a=Math.min.apply(Math,this.valuedataTable.map((function(t){return t.positive})));this.valuedataTable=this.valuedataTable.map((function(t){return a==t.positive?(t.minposbgcolor=!0,t):(t.minposbgcolor=!1,t)}));var e=Math.max.apply(Math,this.valuedataTable.map((function(t){return t.negative})));this.valuedataTable=this.valuedataTable.map((function(t){return e==t.negative?(t.maxnegbgcolor=!0,t):(t.maxnegbgcolor=!1,t)}));var o=Math.min.apply(Math,this.valuedataTable.map((function(t){return t.negative})));this.valuedataTable=this.valuedataTable.map((function(t){return o==t.negative?(t.minnegbgcolor=!0,t):(t.minnegbgcolor=!1,t)}));var r=Math.max.apply(Math,this.valuedataTable.map((function(t){return t.neutral})));this.valuedataTable=this.valuedataTable.map((function(t){return r==t.neutral?(t.maxneutbgcolor=!0,t):(t.maxneutbgcolor=!1,t)}));var s=Math.min.apply(Math,this.valuedataTable.map((function(t){return t.neutral})));this.valuedataTable=this.valuedataTable.map((function(t){return s==t.neutral?(t.minneutbgcolor=!0,t):(t.minneutbgcolor=!1,t)}));var n=Math.max.apply(Math,this.valuedataTable.map((function(t){return t.total})));this.valuedataTable=this.valuedataTable.map((function(t){return n==t.total?(t.maxtotalbgcolor=!0,t):(t.maxtotalbgcolor=!1,t)}));var c=Math.min.apply(Math,this.valuedataTable.map((function(t){return t.total})));this.valuedataTable=this.valuedataTable.map((function(t){return c==t.total?(t.mintotalbgcolor=!0,t):(t.mintotalbgcolor=!1,t)})),this.update(),this.renderproject()}),this.renderproject=()=>{APP.apiGet({path:\"projects/list\",data:{selected_fields:\"key_id,key_name,time_add,key_color\"},success:function(t){this.dataproject=t,setTimeout(()=>{this.getproject(t)},1e3),this.update()}.bind(this)})},this.dataProjects=[],this.getproject=t=>{t=t;const a=this.validProjects.split(\",\").map(Number);Object(i.map)(t,(function(t){return{id:t.key_id,date:moment(t.key_start_date).format(\"DD MMMM YYYY\"),name:t.key_name,color:t.key_color}})).forEach(t=>{a.indexOf(t.id)>-1?t.checked=!0:t.checked=!1,this.dataProjects.push(t)}),this.projectfilter=Object(i.filter)(this.dataProjects,(function(t){return t.checked})),this.update()}}}))}}]);","extractedComments":[]}