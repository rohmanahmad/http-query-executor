{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{66:function(t,e,i){i(1).tag2(\"my-filter\",'<div class=\"row nomargin \"> <div class=\"col-md-6 col-xs-12 header-title\"> FILTER </div> </div> <form id=\"myForm\" method=\"get\" onsubmit=\"{kirim}\"> <div class=\"col-xs-12 filter\" style=\"height: 350px;\"> by Keyword <div> <input type=\"text\" class=\"col-xs-12 keyword\" id=\"input-text\" ref=\"internet\" riot-value=\"{keyword}\"> </div> <br> by Domain <div> <input type=\"text\" class=\"col-xs-12 keyword\" id=\"input-text\" ref=\"domain\" riot-value=\"{domain}\"> </div> <br> by Author <div> <input type=\"text\" class=\"col-xs-12 keyword\" id=\"input-text\" ref=\"author\" riot-value=\"{author}\"> </div> <br> <div class=\"checkbox checkbox-theme display-inline-block\"> <input type=\"checkbox\" id=\"checkbox-inline-2\" class=\"exc\" value=\"true\" checked=\"{checked:checked}\"> <label for=\"checkbox-inline-2\" class=\"padding-left-30\">Exclude Marked Author</label> </div> <br> <div style=\"margin-top:10px\"> <button class=\"accsaved pointer\" id=\"addprojectaccount\" type=\"submit\"> Show Result </button> <button class=\"addprojectaccount pointer \" id=\"cancel\" onclick=\"{reset}\"> Reset Filter </button> </div> </div> </form>',\"\",\"\",(function(t){this.kirim=t=>{t.preventDefault(),console.log(\"submit\"),t.preventDefault();var e=$(\".exc:checked\").val();this.parent.search.q=this.refs.internet.value,this.parent.search.domain=this.refs.domain.value,this.parent.search.author=this.refs.author.value,this.parent.search.filterbot=null!=e&&$(\".exc:checked\").val(),this.update(),this.parent.updateFilter()},this.reset=()=>{document.getElementById(\"myForm\").reset(),this.parent.search.q=\"\",this.parent.search.domain=\"\",this.parent.search.author=\"\",this.parent.resetFilter()},this.getfilterlist=t=>{this.keyword=t.filter_keywords,this.domain=t.filter_domain,this.author=t.filter_author,this.checked=t.filter_filterbot,\"true\"==this.checked?this.checked=!0:this.checked=!1,this.update()}}))},91:function(t,e,i){\"use strict\";i.r(e);var o=i(0),s=(i(12),i(3));i(1).tag2(\"popularlocation\",'<div class=\"card shadow-base bd-0\"> <div class=\"row no-gutters\"> <div class=\"col-md-12\"> <div class=\"card-header bg-transparent d-flex justify-content-between align-items-center\"> <h6 class=\"card-title tx-uppercase mg-b-0\"> <img src=\"assets/images/components/icons/globe-teal.png\" width=\"20\" height=\"20\" class=\"mg-r-5\"> MOST ACTIVE LOCATIONS </h6> <span> <img src=\"assets/images/components/icons/dowload-teal.png\" width=\"20\" height=\"20\" class=\"cursor-pointer mg-r-10 \" data-toggle=\"tooltip\" data-placement=\"top\" title=\"Download\" onclick=\"{downloadcsv}\"> <span class=\"cursor-default\" aria-hidden=\"true\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"Where the mentions of your chosen keyword come from\">?</span> </span> </div> <div class=\"card-body p-0 -pd-y-15 bg-transparent height500\" if=\"{total != 0}\"> <div class=\"ripple-loader\" if=\"{isLoading}\"></div> <table class=\"table table-striped mg-t-0 mg-b-0\"> <thead> <tr> <th></th> <th class=\"text-right\">Mention</th> <th class=\"text-right\">Engagement</th> </tr> </thead> <tbody> <tr each=\"{o,i in items}\" if=\"{i<10}\"> <td class=\"valign-middle b-t-0\"> {i + 1} &nbsp; {o.hasc} </td> <td class=\"text-right\"> {o.count ? o.count : 0} </td> <td class=\"text-right\"> {o.count_engagement.formatMoney(0) || 0} </td> </tr> </tbody> </table> </div> <div class=\"card-body textcenter height492\" style=\"border-left: 1px solid #eaecf0;\" if=\"{total == 0}\"> <p>No data found, please input another dates</p> </div> </div> </div> </div>',\"\",\"\",(function(t){this.isLoading=!0,this.xhr=null,this.limit=10,this.query={limit:this.limit,page:0,sort:\"-name\"},this.pagination={page:1,cb:t=>{this.update({Loading:!0}),this.query.page=(t-1)*this.query.limit,this.render(),$(\"body,html\").animate({scrollTop:570},500)}},this.render=()=>{APP.log(\"most active sosial : render\");let t=Object(o.clone)(this.parent.search);t.limit=1e4,this.update({isLoading:!0}),t.service_category||(t.service_category=localStorage.channels);let e=[],i=[],a=[];Object(s.d)([function(t){$.getJSON(\"/assets/js/id-all.geo.json\",(function(i){e=i,t()}))},function(t){$.getJSON(\"/assets/js/province.json\",(function(e){i=e,t()}))}],()=>{this.xhr=APP.apiGet({path:\"mentions/popular-locations\",data:t,success:t=>{if(null!=(t=t.items)){this.total=t.length,0===(t=t.map(t=>t&&t.lat?t:null).filter(t=>null!==t)).length?this.notdata=!0:this.update({notdata:!1});let s=0,n=[],l=Object(o.map)(t,(function(t){let e=null;return null!=t&&i.features&&(a=getProvince(i.features,t.lat||0,t.lon||0),Object(o.isEmpty)(a)||a&&(e={\"hc-key\":a.HASC_1.replace(\".\",\"-\").toLowerCase(),hasc:a.NAME_1,value:t.count,count:t.count,count_engagement:t.count_engagement,count_reach:t.count_reach,count_unique:t.count_unique})),e}));l=Object(o.reduce)(l,(function(t,e){return Object(o.isObject)(e)&&(t[e.hasc]?(t[e.hasc].value+=e.value,t[e.hasc].count+=e.count,t[e.hasc].count_engagement+=e.count_engagement,t[e.hasc].count_reach+=e.count_reach,t[e.hasc].count_unique+=e.count_unique):t[e.hasc]=e),t}),{});var e=[];Object(o.each)(l,(t,i)=>{e.push(t)}),l=e,l=Object(o.orderBy)(l,[\"value\",\"hasc\"],[\"desc\",\"asc\"]),Object(o.each)(l,(t,e)=>{n.push(t),s++}),n=Object(o.orderBy)(n,[\"value\",\"hasc\"],[\"desc\",\"asc\"]),this.items=n,this.update({isLoading:!1,isLoadingerror:!1})}}})})},this.downloadcsv=()=>{this.items.length>0&&APP.downloadcsv(this.items,\"MostActiveLocation_\"+p(\"project\"),!0)},this.on(\"mount\",()=>{this.xhr=null}),this.on(\"unmount\",()=>{this.xhr&&this.xhr.abort()})}))},92:function(t,e,i){\"use strict\";i.r(e);var o=i(0);i(1).tag2(\"sentiment-composition\",'<div class=\"row no-gutters\"> <div class=\"col mx-2 {mx}\" each=\"{sentiment}\"> <div class=\"btn {name} btn-icon mg-r-0 {active:selected} w-100 mg-t-10 -{name}mg-r height60 -{mgl10} -widthsentiment cursor-pointer displayinlineflex\" id=\"sent\" onclick=\"{selectSentiment}\"> <img alt=\"\" riot-src=\"{icon}\" width=\"35\" height=\"35\" class=\"center displayinitial mg-t-10 mg-l-10\"> <span class=\"mg-l-20 mg-t-20 hiddenmax500\">{name}</span> </div> </div> </div>',\"\",\"\",(function(t){this.isLoading=!0,this.idTO=null,this.Selected=!0,this.sValue=[],this.sValue.positive=0,this.sValue.negative=0,this.sValue.neutral=0,this.sentiment=[{id:\"positive\",total:null,name:\"Positive\",selected:!0,color:\"count-txt color-green-500\",icon:\"../assets/images/components/icons/thumbs-up-grey.png\",mgl10:\"mg-r-10\",mx:\"ml-0-force\"},{id:\"negative\",total:null,name:\"Negative\",selected:!0,color:\"count-txt color-red-500\",icon:\"../assets/images/components/icons/thumbs-down-grey.png\",mgl10:\"mg-r-10\",mx:\"\"},{id:\"neutral\",total:null,name:\"Neutral\",selected:!0,color:\"count-txt color-orange-500\",icon:\"../assets/images/components/icons/help-grey.png\",mgl10:\"mg-l-10\",mx:\"mr-0-force\"}],this.on(\"mount\",()=>{this.parent.search.section=null}),this.render=()=>{APP.log(\"sentiment : render\")},this.selectSentiment=t=>{APP.log(\"sentiment : selectSentiment\"),t.preventDefault(),clearTimeout(this.idTO),t.item.selected=!t.item.selected,this.update(),setTimeout(()=>{this.sentiment_selected()},100)},this.sentiment_selected=()=>{if(APP.log(\"sentiment : sentiment_selected\"),\"function\"==typeof t.cb){const e=Object(o.filter)(this.sentiment,t=>t.selected),i=Object(o.map)(e,t=>t.id);t.cb(i.join(\",\"))}}}))},93:function(t,e,i){\"use strict\";i.r(e);var o=i(0),s=i(19),a=i.n(s);i(1).tag2(\"sociograh\",'<div class=\"card shadow-base bd-0\" id=\"download-card\"> <div class=\"overflow-hidden\"> <div class=\"card-header bg-transparent d-flex justify-content-between align-items-center\"> <h6 class=\"card-title tx-uppercase tx-12 mg-b-0\"> <img src=\"assets/images/components/icons/share-teal.png\" width=\"20\" height=\"20\" class=\"mg-r-5\"> SOCIOGRAPH KEYWORDS </h6> <span id=\"right-menu\"> <div class=\"btn-group\" role=\"group\" aria-label=\"Limit\"> <select class=\"btn btn-outline-info btn-icon cursor-pointer mg-r-20\" onchange=\"{changeLimit}\" ref=\"limitPage\"> <option value=\"100\" selected=\"{selected:pagelimitvalue == 100}\">100</option> <option value=\"500\" selected=\"{selected:pagelimitvalue == 500}\">500</option> <option value=\"1000\" selected=\"{selected:pagelimitvalue == 1000}\">1000</option> <option value=\"2000\" selected=\"{selected:pagelimitvalue == 2000}\">2000</option> <option value=\"3000\" selected=\"{selected:pagelimitvalue == 3000}\">3000</option> <option value=\"4000\" selected=\"{selected:pagelimitvalue == 4000}\">4000</option> </select> </div> <div class=\"btn-group\" role=\"group\" aria-label=\"Download\"> <select id=\"downloadBtn\" class=\"btn btn-outline-info btn-icon cursor-pointer mg-r-20\" onchange=\"{download}\" ref=\"downloadBtn\"> <option readonly>Download</option> <option value=\"png\">PNG</option> <option value=\"pdf\">PDF</option> <option value=\"csv\">CSV/Excel</option> </select> </div> <img src=\"assets/images/components/icons/full-screent.png\" width=\"20\" height=\"20\" class=\"mg-r-5 cursor-pointer \" onclick=\"{fullscreent}\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"Full Screen\"> <b class=\"cursor-default mg-l-10 fontweightinherit\" aria-hidden=\"true\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"???\">? </b> </span> </div> <div class=\"card-body pd-0 bd-color-gray-lighter -height520 height957 textcenter mg-t-20\" if=\"{total == 0}\"> No data found, please input another dates </div> <div class=\"ripple-loader\" if=\"{isLoading}\"></div> <div class=\"card-body pd-0 bd-color-gray-lighter -height540 height957 pd-20 heightsvgsosiograph\" id=\"sosiograph\" if=\"{total != 0}\"> </div> </div> </div> <a id=\"return-to-top-sosiograph\" onclick=\"{outscreentsosiograph}\"><i class=\"fa fa-expand cursor-pointer colorwhite\"></i></a>',\"\",\"\",(function(t){this.renderer=null,this.pagelimitvalue=1e3,this.download=t=>{const e=$(\"#downloadBtn\").val();$(\"#right-menu\").addClass(\"d-none\"),\"pdf\"==e&&this.downloadpdf(),\"csv\"==e&&this.downloadcsv(),\"png\"==e&&a()(document.querySelector(\"#download-card\")).then(t=>{var e,i,o;e=t.toDataURL(),i=\"sociograph_keywords.png\",\"string\"==typeof(o=document.createElement(\"a\")).download?(o.href=e,o.download=i,document.body.appendChild(o),o.click(),document.body.removeChild(o)):window.open(e)}),$(\"#right-menu\").removeClass(\"d-none\")},this.downloadpdf=()=>a()(document.querySelector(\"#download-card\")).then(t=>{t.toDataURL(\"image/png\");var e=new jsPDF(\"p\",\"pt\",\"a4\",!0);document.body.appendChild(t),e.addHTML(t,0,0,{pagesplit:!1,backgroundColor:\"#FFF\"},(function(){document.body.removeChild(t),e.save(\"sociograph_keywords.pdf\")}))}),this.changeLimit=t=>{APP.log(\"change stream limit\"),this.pagelimitvalue=t.target.value,this.render()},this.render=()=>{let t=Object(o.clone)(this.parent.search);t.limit=this.pagelimitvalue,this.update({isLoading:!0}),this.xhr=APP.apiGet({path:\"mentions/sociograph\",data:t,success:t=>{t=t.items,this.data=t,this.datarender(t,!0)}})},this.datarender=(t,e)=>{if(Object(o.isNull)(this.renderer)||0!=this.total&&this.renderer.dispose(),this.total=t.length,0!=this.total){this.update();var i=t,s=Viva.Graph.graph(),a=Viva.Graph.View.svgGraphics(),n={};i.forEach(t=>{let e=t.id.split(\".\");for(let t=0;t<e.length;t++)t<e.length-1&&t>0&&(n[e[t]]||(s.addNode(e[t]),n[e[t]]=!0),n[e[t+1]]||(s.addNode(e[t+1]),n[e[t+1]]=!0),s.addLink(e[t],e[t+1]))});var l=0;s.forEachNode(t=>{l<t.links.length&&(l=t.links.length)});var r=function(t,e){s.forEachLinkedNode(t,(function(t,i){var o=a.getLinkUI(i.id);o&&o.attr(\"stroke\",e?\"red\":\"#999999\")}))};a.node(t=>{t.data;let e=Viva.Graph.svg(\"g\"),i=t.links.length/l*32;i=i<10?10:i;let o=Viva.Graph.svg(\"text\").attr(\"y\",10).attr(\"x\",10).attr(\"stroke-width\",.5).attr(\"font-size\",i).attr(\"stroke\",\"#246a9d\").text(t.id);$(e).hover((function(){r(t.id,!0)}),(function(){r(t.id,!1)}));let s=this;return $(e).click((function(){s.parent.detailmentions(null,null,null,null,t.id,null,\"Keywords\")})),e.append(o),e}).placeNode((t,e)=>{t.attr(\"transform\",\"translate(\"+e.x+\",\"+(e.y-12)+\")\")});var d=Viva.Graph.Layout.forceDirected(s,{springLength:50,springCoeff:.001,dragCoeff:.09,gravity:-1});this.renderer=Viva.Graph.View.renderer(s,{graphics:a,container:document.getElementById(\"sosiograph\")});var c=this.renderer,h=$(\".heightsvgsosiograph\").height(),u=$(\".heightsvgsosiograph\").width();e&&setTimeout(()=>{$(\"#sosiograph svg\").css({width:u,height:h})},1),c.run(),setTimeout((function(){c.pause();var t=d.getGraphRect(),e=Math.min(t.x2-t.x1,t.y2-t.y1);!function t(e,i){e<i?(i=c.zoomOut(),setTimeout((function(){t(e,i)}),16)):(setTimeout((function(){c.zoomOut()}),16),setTimeout((function(){c.zoomOut()}),32),setTimeout((function(){c.zoomOut()}),50))}(Math.min($(\"#sosiograph\").width(),$(\"#sosiograph\").height())/e,1)}),8e3),this.update({isLoading:!1})}else this.update({isLoading:!1})},this.downloadcsv=()=>{var t=this.data;t.length>0&&APP.downloadcsv(t,\"sociograph\",!0)},this.on(\"unmount\",()=>{this.xhr&&this.xhr.abort(),Object(o.isNull)(this.renderer)||this.renderer.dispose()}),this.on(\"mount\",()=>{this.xhr=null}),this.fullscreent=()=>{this.datarender(this.data,!1),$(\"#sosiograph svg\").css({display:\"block\",\"z-index\":\"9999\",position:\"fixed\",width:\"100%\",height:\"100%\",top:\"0\",right:\"0\",left:\"0\",bottom:\"0\",overflow:\"auto\",background:\"white\",zoom:\" 200%\"}),this.data.length>0&&$(\"#return-to-top-sosiograph\").fadeIn(200)},this.outscreentsosiograph=()=>{let t=$(\".heightsvgsosiograph\").height(),e=$(\".heightsvgsosiograph\").width();this.datarender(this.data,!0),$(\"#sosiograph svg\").css({width:e,height:t,display:\"\",\"z-index\":\"\",position:\"\",top:\"\",right:\"\",left:\"\",bottom:\"\",overflow:\"\",background:\"\"}),$(\"#return-to-top-sosiograph\").fadeOut(200),this.update()}}))},95:function(t,e,i){\"use strict\";i.r(e);var o=i(0);i(1).tag2(\"tophashtaganalysis\",'<div class=\"row no-gutters widget-1\"> <div class=\"col-md-12\"> <div class=\"card-header pd-20 bg-transparent\" style=\"border-bottom: 1px solid #eaecf0;\"> <h6 class=\"card-title tx-uppercase mg-b-0\"> <img src=\"assets/images/components/icons/hashtag-teal.png\" width=\"20\" height=\"20\" class=\"mg-r-5\"> TOP HASHTAGS</h6> <span> <img src=\"assets/images/components/icons/dowload-teal.png\" width=\"20\" height=\"20\" class=\"cursor-pointer mg-r-10 \" data-toggle=\"tooltip\" data-placement=\"top\" title=\"Download\" onclick=\"{downloadcsv}\"> <span class=\"cursor-default\" aria-hidden=\"true\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"Most frequent hashtags that\\'s used in mentions about your chosen keywords\">?</span> </span> </div> <div class=\"card-footer p-0 bg-transparent\"> <div class=\"ripple-loader height1003\" if=\"{isLoading}\"></div> <table class=\"table table-striped mg-b-0 w-100\"> <tbody> <tr each=\"{o,i in items}\" if=\"{i < 10}\"> <td onclick=\"{tophastagsvalue}\" class=\"cursor-pointers\"> <div class=\"row mb-1 no-gutters\"> <div class=\"col-12 tx-16-force -tx-semibold \"> #{o._id.tag.length > 30 ? o._id.tag.substring(0,30) + \\'...\\' : o._id.tag} </div> </div> <div class=\"row no-gutters text-right\"> <div class=\"col-3 col-lg-6 col-xl-3\" title=\"{items.count}\"> {o.count.toLocaleString({ minimumFractionDigits: 2 })}<br> <span class=\"tx-10-force tx-gray-600-force\">Mention</span> </div> <div class=\"col-3 col-lg-6 col-xl-3\" title=\"{items.engagement}\"> {o.engagement.toLocaleString({ minimumFractionDigits: 2 })}<br> <span class=\"tx-10-force tx-gray-600-force\">Engagement</span> </div> <div class=\"col-3 col-lg-6 col-xl-3\" title=\"{items.users}\"> {o.users.toLocaleString({ minimumFractionDigits: 2 })}<br> <span class=\"tx-10-force tx-gray-600-force text-nowrap\">Unique Author</span> </div> <div class=\"col-3 col-lg-6 col-xl-3\" title=\"{items.reach}\"> {o.reach.toLocaleString({ minimumFractionDigits: 2 })}<br> <span class=\"tx-10-force tx-gray-600-force\">Reach</span> </div> </div> </td> </tr> <tr class=\"tr td th\" if=\"{this.total2 == 0}\"> <td colspan=\"2\" class=\"txtcenter\">No data found, please input another dates</td> </tr> </tbody> </table> </div> </div> </div>',\"\",\"\",(function(t){this.isLoading=!0,this.xhr=null,this.isExist=!0,this.fontcolor=!1,this.fonttable=\"\",this.maxheight=!0,this.tophastagsvalue=t=>{t.item.o._id.tag},this.render=()=>{APP.log(\"top hastags : render\"),\"analysis/my-stream..\"==APP.currentHash?(this.fonttable=\"\",this.fontcolor=!1,this.maxheight=!0,this.update()):(this.fonttable=\"font-size: 20px;\",this.fontcolor=!0,this.maxheight=!1,this.update()),this.items=[];Object(o.find)(this.times,{selected:!0});let t=Object(o.clone)(this.parent.search);this.update({isLoading:!0}),this.isLoading=!0,t.is_total=null,t.limit=10,this.xhrtophastags=APP.apiGet({path:\"mentions/hashtags\",data:t,success:function(t){this.total2=t.count,this.items=t.items,this.update({isLoading:!1,total2:t.count})}.bind(this)})},this.downloadcsv=()=>{let t=Object(o.clone)(this.parent.search);t.is_total=null,t.limit=1e4,APP.apiGet({path:\"mentions/hashtags\",data:t,success:t=>{var e=t.items.map((t,e)=>({no:e+1,count:t.count,engagement:t.engagement,users:t.users,reach:t.reach,Hashtags:\"\"+t._id.tag}));e.length>0&&APP.downloadcsv(e,\"TopHashtags_\"+p(\"project\"),!0)}})},this.on(\"mount\",()=>{this.xhr=null}),this.on(\"unmount\",()=>{this.isExist=!1,this.xhr&&this.xhr.abort()})}))},96:function(t,e,i){\"use strict\";i.r(e);var o=i(0);i(1).tag2(\"wordcloud\",'<div class=\"card shadow-base bd-0\"> <div class=\"overflow-hidden\"> <div class=\"card-header bg-transparent d-flex justify-content-between align-items-center\"> <h6 class=\"card-title tx-uppercase tx-12 mg-b-0\"> <img src=\"assets/images/components/icons/cloud-teal.png\" width=\"20\" height=\"20\" class=\"mg-r-5\"> WORDCLOUD </h6> <span> <img src=\"assets/images/components/icons/dowload-teal.png\" width=\"20\" height=\"20\" class=\"mg-r-15 cursor-pointer \" data-toggle=\"tooltip\" data-placement=\"top\" title=\"Download\" onclick=\"{downloadcsv}\"> <img src=\"assets/images/components/icons/full-screent.png\" width=\"20\" height=\"20\" class=\"mg-r-5 cursor-pointer \" data-toggle=\"tooltip\" data-placement=\"top\" title=\"Full Screen\" onclick=\"{fullscreent}\"> <b class=\"cursor-default mg-l-10 fontweightinherit\" aria-hidden=\"true\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"Visual representation of popular words in your mentions. The more a word mentioned the bigger and bolder it appears in the word cloud.\">?</b> </span> </div> <div class=\"card-body pd-20 bd-color-gray-lighter textcenter mg-t-0 wordcloudheight490 height520-force \" if=\"{total == 0}\"> No data found, please input another dates </div> <div class=\"ripple-loader\" if=\"{isLoading}\"></div> <div class=\"card-body pd-0 bd-color-gray-lighter {full-screent-wordcloud:fullscrent}\" id=\"chart-daily-mention\" if=\"{total != 0}\"> <div id=\"wordcloud_container\" class=\"\"> <div id=\"wordcloud_canvas\" class=\"table-responsiv \"> <div id=\"wordcloud_all\" class=\"wordcloudheight510 height520-force {mg-t-m-20:!fullscrent} {mg-t-m-80:fullscrent} {mg-l-90:fullscrent} pd-10\"> </div> </div> </div> </div> </div> </div> <a id=\"return-to-top-word\" onclick=\"{outscreent}\"><i class=\"fa fa-expand cursor-pointer colorwhite\"></i></a>',\"\",\"\",(function(t){this.isLoading=!0,this.fullscrent=!1,this.notdata=!1,this.value={},this.xhr=null,this.dataall={},this.render=()=>{this.update_data()},this.update_data=()=>{this.notdata=!1,APP.log(\"wordcloude : render\"),this.update({isLoading:!0,total:1});Object(o.find)(this.times,{selected:!0});let t=Object(o.clone)(this.parent.search);t.is_total=null,t.limit=50,this.xhr=APP.apiGet({path:\"mentions/wordcloud\",data:t,success:t=>{let e=t.items.all;this.dataresizeseries=e,this.renderedData(e)}})},this.renderedData=t=>{if(this.total=t?t.length:0,this.total>0){const e=t[0][1];t.map(t=>{const i=t[0].length,o=parseInt(t[1]);let s=o/e*100;return i>20&&(s=10,o/e*100>60&&(s=o/e*50)),s<15&&(s=15),t[1]=s,t}),$(\"#wordcloud_container\").show(),$(\"#wordcloud_canvas\").removeClass(\"upload\"),$(\"#wordcloud_all\").show(),WordCloud(\"wordcloud_all\",{list:t,backgroundColor:\"transparent\",gridSize:Math.round(16*$(\"#wordcloud_all\").width()/1024),weightFactor:t=>t,shape:\"square\",shuffle:!0,minRotation:0,maxRotation:0,rotateRatio:1,rotateRatio:.2,click:t=>{this.parent.detailmentions(null,null,null,null,t[0],null,\"Keywords\")}})}else this.notdata=!0,$(\"#wordcloud_container\").hide(),$(\"#wordcloud_canvas\").removeClass(\"upload\"),$(\"#wordcloud_all\").html(\"Empty\"),$(\"#wordcloud_all\").show();this.update({isLoading:!1})},this.on(\"mount\",()=>{this.xhr=null}),this.on(\"unmount\",()=>{this.xhr&&this.xhr.abort()}),$(window).resize(()=>{this.dataresize()}),this.dataresize=()=>{this.renderedData(this.dataresizeseries)},this.fullscreent=()=>{this.renderedData(this.dataresizeseries),this.fullscrent=!0,$(\"#return-to-top-word\").fadeIn(200),this.update()},this.outscreent=()=>{this.fullscrent=!1,$(\"#return-to-top-word\").fadeOut(200),setTimeout(()=>{this.dataresize()},500),this.update()},this.downloadcsv=()=>{let t=Object(o.clone)(this.parent.search);t.is_total=null,t.limit=50,this.xhr=APP.apiGet({path:\"mentions/wordcloud\",data:t,success:e=>{e=e.items;var i=Object(o.clone)(e);if(\"negative\"===t.section||\"negative,neutral\"===t.section||\"neutral,negative\"===t.section)var s=i&&i.negative?i.negative:[];if(\"positive\"===t.section||\"positive,neutral\"===t.section||\"neutral,positive\"===t.section)s=i&&i.positive?i.positive:[];if(\"positive,negative\"===t.section||\"negative,positive\"===t.section){var a=i&&i.positive?i.positive:[],n=i&&i.negative?i.negative:[];s=Object(o.concat)(a,n)}if(\"\"===t.section||null===t.section||void 0===t.section||\"positive,negative,neutral\"===t.section||\"positive,neutral,negative\"===t.section||\"negative,positive,neutral\"===t.section||\"negative,neutral,positive\"===t.section||\"neutral,negative,positive\"===t.section||\"neutral,positive,negative\"===t.section){s=i&&i.all?i.all:[];this.dataall.all=s}if(\"neutral\"===t.section)s=this.dataall.all;var l=s;(l=Object(o.map)(l,(function(t,e){return{keyword:t[0],count:t[1].formatMoney(0)}}))).length>0&&APP.downloadcsv(l,\"WordcloudSummary_\"+p(\"project\"),!0)}})}}))},97:function(t,e,i){\"use strict\";i.r(e);var o=i(0),s=i(19),a=i.n(s);i(1).tag2(\"sociograpauthor\",'<div class=\"card bd-0\" id=\"download-card\"> <div class=\"card overflow-hidden\"> <div class=\"card-header bg-transparent d-flex justify-content-between align-items-center\"> <h6 class=\"card-title tx-uppercase tx-12 mg-b-0\"> <img src=\"assets/images/components/icons/share-teal.png\" width=\"20\" height=\"20\" class=\"mg-r-5\"> SOCIOGRAPH AUTHORS </h6> <span id=\"right-menu\"> <div class=\"btn-group\" role=\"group\" aria-label=\"Limit\"> <select class=\"btn btn-outline-info btn-icon cursor-pointer mg-r-20\" onchange=\"{changeLimit}\" ref=\"limitPage\"> <option value=\"100\" selected=\"{selected:pagelimitvalue == 100}\">100</option> <option value=\"500\" selected=\"{selected:pagelimitvalue == 500}\">500</option> <option value=\"1000\" selected=\"{selected:pagelimitvalue == 1000}\">1000</option> <option value=\"2000\" selected=\"{selected:pagelimitvalue == 2000}\">2000</option> <option value=\"3000\" selected=\"{selected:pagelimitvalue == 3000}\">3000</option> <option value=\"4000\" selected=\"{selected:pagelimitvalue == 4000}\">4000</option> <option value=\"5000\" selected=\"{selected:pagelimitvalue == 5000}\">5000</option> <option value=\"6000\" selected=\"{selected:pagelimitvalue == 6000}\">6000</option> <option value=\"7000\" selected=\"{selected:pagelimitvalue == 7000}\">7000</option> <option value=\"8000\" selected=\"{selected:pagelimitvalue == 8000}\">8000</option> <option value=\"9000\" selected=\"{selected:pagelimitvalue == 9000}\">9000</option> <option value=\"10000\" selected=\"{selected:pagelimitvalue == 10000}\">10000</option> <option value=\"11000\" selected=\"{selected:pagelimitvalue == 11000}\">11000</option> <option value=\"12000\" selected=\"{selected:pagelimitvalue == 12000}\">12000</option> </select> </div> <div class=\"btn-group\" role=\"group\" aria-label=\"Download\"> <select id=\"downloadBtn\" class=\"btn btn-outline-info btn-icon cursor-pointer mg-r-20\" onchange=\"{download}\" ref=\"downloadBtn\"> <option readonly>Download</option> <option value=\"png\">PNG</option> <option value=\"pdf\">PDF</option> <option value=\"csv\">CSV/Excel</option> </select> </div> <img src=\"assets/images/components/icons/full-screent.png\" width=\"20\" height=\"20\" class=\"mg-r-5 cursor-pointer \" data-toggle=\"tooltip\" data-placement=\"top\" title=\"Full Screen\" onclick=\"{fullscreent}\"> <b class=\"cursor-default mg-l-10 fontweightinherit\" aria-hidden=\"true\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"???\">? </b> </span> </div> <div class=\"card-body pd-0 bd-color-gray-lighter height600 textcenter mg-t-20\" if=\"{total == 0}\"> No data found, please input another dates </div> <div class=\"ripple-loader\" if=\"{isLoading}\"></div> <div class=\"card-body pd-20 bd-color-gray-lighter height600 heightsvgsosiograph\" id=\"sosiographauthor\" if=\"{total != 0}\"> </div> </div> </div> <a id=\"return-to-top-sosiograph\" onclick=\"{outscreentsosiograph}\"><i class=\"fa fa-expand cursor-pointer colorwhite\"></i></a>',\"\",\"\",(function(t){this.renderer=null,this.pagelimitvalue=1e3,this.download=t=>{$(\"#right-menu\").addClass(\"d-none\");const e=$(\"#downloadBtn\").val();\"pdf\"==e&&this.downloadpdf(),\"csv\"==e&&this.downloadcsv(),\"png\"==e&&a()(document.querySelector(\"#download-card\")).then(t=>{var e,i,o;e=t.toDataURL(),i=\"sociograph_author.png\",\"string\"==typeof(o=document.createElement(\"a\")).download?(o.href=e,o.download=i,document.body.appendChild(o),o.click(),document.body.removeChild(o)):window.open(e)}),$(\"#right-menu\").removeClass(\"d-none\")},this.downloadpdf=()=>a()(document.querySelector(\"#download-card\")).then(t=>{t.toDataURL(\"image/png\");var e=new jsPDF(\"p\",\"pt\",\"a4\",!0);document.body.appendChild(t),e.addHTML(t,0,0,{pagesplit:!1,backgroundColor:\"#FFF\"},(function(){document.body.removeChild(t),e.save(\"sociograph_author.pdf\")}))}),this.changeLimit=t=>{APP.log(\"change stream limit\"),this.pagelimitvalue=t.target.value,this.render()},this.render=()=>{let t=Object(o.clone)(this.parent.search);t.limit=this.pagelimitvalue,this.update({isLoading:!0}),APP.apiGet({path:\"mentions/sociograph/authors\",data:t,success:function(t){this.dataitems=t.items,t=t.items,this.datarender(t,!0),$('[data-toggle=\"tooltip\"]').tooltip()}.bind(this)})},this.datarender=(t,e)=>{if(Object(o.isNull)(this.renderer)||0!=this.total&&this.renderer.dispose(),this.total=t.length,0!=this.total){this.update();var i=t,s=Viva.Graph.graph(),a=Viva.Graph.View.svgGraphics(),n={},l=[],r=50;if(i.length<100)r=2;else if(i.length>100)r=10;else if(i.length>500)r=15;else if(i.length>1e3)r=20;else if(i.length>1500)r=25;else if(i.length>2e3)r=30;else if(i.length>3e3)r=50;r=0,i.forEach(t=>{let e=t.id.split(\".\");e.length>=2&&s.addNode(e[0]);for(let o=0;o<e.length;o++){var i=t.sentiment<0?\"#ff4027\":t.sentiment>0?\"#5dff27\":\"#f3973e\";0===o&&e.length>=2&&s.addLink(e[0],e[1],{retweet_id:t.retweet_id,stream_id:t.stream_id,user_id:t.user_id,sentiment:i,type:t.sentiment}),o<e.length-1&&o>0&&(n[e[o]]||(s.addNode(e[o]),n[e[o]]=!0),n[e[o+1]]||(s.addNode(e[o+1]),n[e[o+1]]=!0),s.addLink(e[o],e[o+1],{retweet_id:t.retweet_id,stream_id:t.stream_id,user_id:t.user_id,sentiment:i,type:t.sentiment}))}});var d=0;s.forEachNode(t=>{d<t.links.length&&(d=t.links.length)}),s.forEachNode(t=>{if(t.links.length<=r){let e=!1;t.links.forEach(t=>{s.getNode(t.toId).links.length>r&&(e=!0)}),e||l.push(t.id)}});var c=function(t,e){s.forEachLinkedNode(t,(function(t,i){var o=a.getLinkUI(i.id);o&&o.attr(\"stroke\",e?\"#999999\":i.data.sentiment)}))};a.node(t=>{let e=Viva.Graph.svg(\"g\");if(t.links.length>4)var i=\"#000\";else i=\"#246a9d\";let s=t.links.length/d*32;s=s<10?10:s;let a=Viva.Graph.svg(\"text\").attr(\"y\",10).attr(\"x\",-10).attr(\"stroke-width\",.5).attr(\"font-size\",s).attr(\"stroke\",i).attr(\"line-stroke\",i).text(t.id);$(e).hover((function(){c(t.id,!0)}),(function(){c(t.id,!1)}));let n=this;return $(e).click((function(){var e=[],i=[];Object(o.each)(t.links,(t,o)=>{e.push(t.data.retweet_id),i.push(t.data.stream_id)});var s=[],a=[];e.forEach((function(t){s.indexOf(t)<0&&s.push(t)})),i.forEach((function(t){a.indexOf(t)<0&&a.push(t)})),i=i?i.join(\",\"):null,s=s?s.join(\",\"):null,n.parent.detailmentions(null,null,null,t.id,null,null,\"Author\",null,i,s,!0)})),e.append(a),e}).placeNode((t,e)=>{t.attr(\"transform\",\"translate(\"+e.x+\",\"+(e.y-12)+\")\")}),a.link((function(t){return Viva.Graph.svg(\"path\").attr(\"stroke\",t.data.sentiment)})).placeLink((function(t,e,i){var o=\"M\"+e.x+\",\"+e.y+\"L\"+i.x+\",\"+i.y;t.attr(\"d\",o)})),l.forEach(t=>{s.removeNode(t)});var h=Viva.Graph.Layout.forceDirected(s,{springLength:50,springCoeff:.001,dragCoeff:.09,gravity:-1}),u=Viva.Graph.View.renderer(s,{graphics:a,container:document.getElementById(\"sosiographauthor\")});this.renderer=u;var p=$(\".heightsvgsosiograph\").height(),g=$(\".heightsvgsosiograph\").width();e&&setTimeout(()=>{$(\"#sosiographauthor svg\").css({width:g,height:p})},1),u.run(),setTimeout((function(){u.pause();var t=h.getGraphRect(),e=Math.min(t.x2-t.x1,t.y2-t.y1);!function t(e,i){e<i?(i=u.zoomOut(),setTimeout((function(){t(e,i)}),16)):(setTimeout((function(){u.zoomOut()}),16),setTimeout((function(){u.zoomOut()}),32),setTimeout((function(){u.zoomOut()}),50))}(Math.min($(\"#sosiographauthor\").width(),$(\"#sosiographauthor\").height())/e,1)}),1e4),this.update({isLoading:!1})}else this.update({isLoading:!1})},this.downloadcsv=()=>{var t=this.dataitems;t.length>0&&APP.downloadcsv(t,\"sociograph author\",!0)},this.fullscreent=()=>{$(\"#sosiographauthor svg\").css({display:\"block\",\"z-index\":\"9999\",position:\"fixed\",width:\"100%\",height:\"100%\",top:\"0\",right:\"0\",left:\"0\",bottom:\"0\",overflow:\"auto\",background:\"white\",zoom:\" 100%\"}),this.dataitems.length>0&&$(\"#return-to-top-sosiograph\").fadeIn(200)},this.outscreentsosiograph=()=>{let t=$(\".heightsvgsosiograph\").height(),e=$(\".heightsvgsosiograph\").width();this.datarender(this.dataitems,!0),$(\"#sosiograph svg\").css({width:e,height:t,display:\"\",\"z-index\":\"\",position:\"\",top:\"\",right:\"\",left:\"\",bottom:\"\",overflow:\"\",background:\"\"}),$(\"#return-to-top-sosiograph\").fadeOut(200),this.update()},$(window).resize(()=>{this.dataresize()}),this.dataresize=()=>{}}))}}]);","extractedComments":[]}