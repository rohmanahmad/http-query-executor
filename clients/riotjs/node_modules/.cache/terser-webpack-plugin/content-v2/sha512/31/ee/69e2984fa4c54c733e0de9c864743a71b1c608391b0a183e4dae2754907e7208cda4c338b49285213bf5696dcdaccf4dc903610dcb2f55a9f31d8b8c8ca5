{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[71],{179:function(t,e,a){\"use strict\";a.r(e);a(18),a(26),a(252);var i=a(6);e.default=function(){var t=this;window.checkRender=this,this.search={},i.default.unsetFilter([\"timesince\",\"timeuntil\"]),this.xhrdata=null,this.isShowTotal=!1,this.updateDate=function(e,a){t.search.since=e,t.search.until=a,setTimeout((function(){t.render()}),1e3)},this.showTotal=function(e){t.isShowTotal=1==e.target.checked,t.showTotalChart()},this.showTotalChart=function(){t.refs.emotionanalysis.showTotalChart()},this.on(\"mount\",(function(){t.xhr=null,t.xhrdata=null,urlStream.trigger(\"changeUrl\",\"emotion_analysis\"),menuActive.trigger(\"activated\",[\"emotion_analysis\"]),APP.currentProject=t.search.project=p(\"project\")?p(\"project\"):APP.getProject(),$(\"body,html\").animate({scrollTop:0},500),t.updateDate()})),this.render=function(e){setTimeout((function(){$('[data-toggle=\"tooltip\"]').tooltip()}),1e3),null!=t.search.project||null!=t.search.project?(t.update(),t.refs.emotionanalysis.isLoading=!0,t.xhrdata=t.refs.emotionanalysis.render()):swal(\"Oops...\",\"Create your project\",\"warning\")},this.on(\"unmount\",(function(){t.xhrdata&&t.xhrdata.destroy(),t.xhr&&t.xhr.destroy(),localStorage.removeItem(\"Project_devault\")})),this.inputfocus=function(){$(\"#modalfilterlist\").on(\"shown.bs.modal\",(function(){$(\"#inputfocusnameauthor\").focus()}))},this.updatefiltername=function(){var e={name:t.namefiltervalue,keywords:t.search.q,domain:t.search.domain,author:t.search.author,filterbot:t.search.filterbot};!t.refs.filterformvalue.saveshowdropdown&&t.refs.filterformvalue.filtervalue&&t.refs.filterformvalue._id&&APP.apiPost({path:\"bookmark-filter/update/\"+t.refs.filterformvalue._id+\"?project=\"+p(\"project\"),data:e,success:function(a){APP.success(\"sukses\",(function(){t.refs.filterval.updatevaluekey(e),t.search.q=e.q,t.search.domain=e.domain,t.search.author=e.author,t.search.filterbot=\"true\"==e.filterbot,t.update(),t.render()}))}})},this.updateFilter=function(e){t.refs.filterformvalue.updateFilter(e)},this.saveFilterBookmark=function(e){e.preventDefault(),t.updatenamefilter=t.refs.nameFilter.value,t.updatenamefilter?(t.colorblue=!0,t.refs.filterval.savefilter(e),t.updatefilternamenews=!1,t.update()):(t.error=!0,t.update())},this.updatefilternamemodal=function(){$(\"#modaldemo3\").on(\"shown.bs.modal\",(function(){$(\"#inputfocusnamevalue\").focus()}))},this.resetFilter=function(){setTimeout(function(){this.updatefilternamenews=!1,this.refs.filterformvalue.filtervalue=!1,this.render(),this.update()}.bind(t),100)},this.applyFilterToAllComponents=function(e){Object.assign(t.search,e),$(\"#modalfilterlist\")&&$(\"#modalfilterlist\").modal(\"hide\"),t.update(),t.render()}}},180:function(t,e,a){\"use strict\";a.r(e);var i=a(0);a(15);e.default=function(){var t=this;this.engine=APP.engine,this.addAccount=!1,this.refresh=!0,this.accountHide=!0,this.profileId=null,this.selectedPages=[],this.subcribedPage=[],this.indexdata=[],this.closedId,this.errordata=!1,this.on(\"mount\",(function(){APP.log(\"Account : mount\"),menuActive.trigger(\"activated\",[\"project_settings\"]),urlStream.trigger(\"changeUrl\",\"setting/facebook\"),APP.animationFadeIn(),t.getfacebook(),$(\"select#custom\").select2({tags:!0,width:\"100%\"})})),$(document).ready((function(){$(\"select#custom\").on(\"select2:closing\",(function(t){var e=t.params.args.originalSelect2Event;if(!e)return null;if(void 0===(e=e.data.element))return null;var a=e.id;if(!a)return null;swal({title:\"Alert\",text:\"Are you sure you want to delete this URL facebook crawl?\",type:\"warning\",showCancelButton:!0,confirmButtonColor:\"#DD6B55\",closeOnConfirm:!0,confirmButtonText:\"YES \",cancelButtonText:\"NO\"},(function(t){if(t){var e={project:p(\"project\")?p(\"project\"):APP.getProject()};APP.apiGet({path:\"projects/client-fanpage/\"+a,data:e,success:function(t){setTimeout((function(){swal({title:\"Success\",text:\"Succes\",type:\"success\",confirmButtonColor:\"#DD6B55\",closeOnConfirm:!0})}),1e3)}})}else location.reload()}))}))})),this.postfacebook=function(){APP.log(\"buzzer-account : postfacebook\");var e=t.refs.facebook,a=$(e).val().toString(),s={project:p(\"project\")?p(\"project\"):APP.getProject(),fanpages:a,parse_data:!0};APP.apiPost({path:\"projects/client-fanpage\",data:s,parse_data:!0,success:function(t){var e=t.data;if(t.data)Object(i.forEach)(e,(function(t){Object(i.isEmpty)(t)||$(\".select2-selection__rendered li\").each((function(e){var a=$(this).attr(\"title\");a===t.url&&($(this).css(\"color\",\"red\"),$(this).html('<span class=\"select2-selection__choice__remove\" role=\"presentation\">×</span>'+a+\" (invalid url) \"))}))}));t.data?swal({title:\"Alert\",text:\"invalid URL\",type:\"warning\",confirmButtonColor:\"#DD6B55\",closeOnConfirm:!0,confirmButtonText:\"YES \"}):swal({title:\"Success\",text:\"Succes\",type:\"success\",confirmButtonColor:\"#DD6B55\",closeOnConfirm:!0})}})},this.getfacebook=function(){APP.log(\"buzzer-account : postfacebook\");var e={project:p(\"project\")?p(\"project\"):APP.getProject()};APP.apiGet({path:\"projects/client-fanpage\",data:e,success:function(t){this.getfanpage=t,this.update()}.bind(t)})}}},562:function(t,e,a){\"use strict\";a.r(e);var i=a(179);a(1).tag2(\"emotionanalysis\",'<breadcrumb current=\"Dashboard Competitive\" ref=\"breadcrumb\" mode=\"project\"></breadcrumb> <div class=\"br-pagebody pd-x-20 pd-sm-x-30\"> <div class=\"row\"> <div class=\"col-md-12\"> <div class=\"widget-2\"> <div class=\"card shadow-base overflow-hidden\"> <div class=\"card-header borderbottom0\"> <div class=\"media-body mg-t-10\"> <h4 class=\"tx-normal tx-roboto tx-inverse mg-b-5\"> EMOTION ANALYSIS <small class=\"align-top\"> <span class=\"border border-radius-50 ml-2 px-1 cursor-default font-small btn-link\" aria-hidden=\"true\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"The process of identifying and analyzing the underlying emotions expressed in textual data is known as emotion analysis. Emotional Analysis uses a much more complex system for understanding consumer responses, emotion analysis focuses on a broad spectrum of human emotions and sensitivities. The emotional analysis also includes the motives and impulses of a viewer. These helpful insights prove to be very beneficial for being translated into actions.\">?</span> </small> </h4> </div> <button onclick=\"{updatefilternamemodal}\" if=\"{updatefilternamenews}\" data-toggle=\"modal\" data-target=\"#modaldemo3\" class=\"btn {btn-outline-secondary:!colorblue} {btn-primary:colorblue} btn-block mg-b-0 mg-t-0 mg-r-10 width200save cursor-pointer\"> <i class=\"fa fa-floppy-o pstf\"></i> Save This Filter</button> <button onclick=\"{updatefiltername}\" if=\"{!updatefilternamenews}\" class=\"btn {btn-outline-secondary:!colorblue} {btn-primary:colorblue} btn-block mg-b-0 mg-t-0 mg-r-10 width200save {cursor-pointer:!colorblue}\" disabled=\"{disabled:colorblue}\"> <i class=\"fa fa-floppy-o pstf\"></i> Save This Filter</button> <button data-toggle=\"modal\" data-target=\"#modalfilterlist\" onclick=\"{inputfocus}\" class=\"btn btn-outline-primary mg-b-0 mg-t-0 mg-r-10 width200summary cursor-pointer\"><i class=\"mg-r-5 icon ion-funnel\"></i> Filter</button> <div class=\"mr-2\"> <label class=\"ckbox mb-0 tx-11 cursor-pointer\"> <input type=\"checkbox\" class=\"cursor-pointer \" id=\"total_timeline_mentions\" checked=\"{checked:checked}\" onclick=\"{showTotal}\"> <span class=\"tx-uppercase\">Show Total</span> </label> </div> <div class=\"btn-group pull-right mg-r-m-0\" role=\"group\" aria-label=\"Basic example\"> <div class=\"pd-x-25 tx-11 pd-y-12 tx-mont tx-medium datepickerbacgraoud cursor-pointer\"> <span> <date-picker cb=\"{updateDate}\" since=\"{localStorage.since}\" until=\"{localStorage.until}\" class=\"fc-datepicker btn bg-grey-50 padding-10-20 no-border color-grey-600 pull-right date-style cursor-pointer\" style=\"padding:0px\"></date-picker> </span> </div> </div> </div> </div> </div> </div> </div> <active-filters ref=\"filterformvalue\"></active-filters> <div class=\"row row-sm mg-t-20\"> <div class=\"col-lg-12\"> <emotion-analysis ref=\"emotionanalysis\"></emotion-analysis> </div> </div> <div id=\"modalfilterlist\" class=\"modal fade show\"> <div class=\"modal-dialog\" role=\"document\"> <div class=\"modal-content tx-size-sm\"> <filter namefilter=\"false\" ref=\"filterval\" callback=\"{applyFilterToAllComponents}\" items=\"{search}\"></filter> </div> </div> </div> <div id=\"modaldemo3\" class=\"modal fade show\"> <div class=\"modal-dialog modal-lg wd-40p\" role=\"document\"> <form id=\"myFormid\" method=\"get\" onsubmit=\"{saveFilterBookmark}\"> <div class=\"modal-content tx-size-sm\"> <div class=\"card-body pd-t-20 pd-r-20 pd-l-20 pd-0 mg-b-20\"> <div class=\"row mg-b-20\"> <div class=\"col-sm-12 mg-t-10 mg-sm-t-0 text-center\">Give this a filter name</div> </div> <div class=\"row\"> <div class=\"col-sm-12 mg-t-10 mg-sm-t-0\"> <input type=\"text\" id=\"inputfocusnamevalue\" name=\"inputfokus\" class=\"form-control\" placeholder=\"\" ref=\"nameFilter\"> <p class=\"pd-0 mg-b-0\" if=\"{!error}\">&nbsp;</p> <p class=\"pd-0 mg-b-0 colorred\" if=\"{error}\">This value is required.</p> </div> </div> </div> <div class=\"modal-footer d-block pd-0\"> <div class=\"row\"> <div class=\"col-md-6 pd-r-0\"> <button type=\"button\" class=\"btn btn-outline-secondary wd-100-color-transparant \" onclick=\"{saveFilterBookmark}\"> Save Filter</button> </div> <div class=\"col-md-6 pd-l-0\"> <button type=\"button\" class=\"btn btn-outline-secondary wd-100-color-transparant \" data-dismiss=\"modal\">Cancel</button> </div> </div> </div> </div> </form> </div> </div> </div>',\"\",\"\",(function(t){i.default.bind(this)()}))},563:function(t,e,a){\"use strict\";a.r(e);a(14),a(232);var i=a(35);a(1).tag2(\"download-tasks\",'<breadcrumb current=\"Dashboard Summary\" mode=\"project\" ref=\"breadcrumb\"></breadcrumb> <div class=\"br-pagebody pd-x-20 pd-sm-x-30\"> <div class=\"row\"> <div class=\"col-md-12\"> <div class=\"widget-2\"> <div class=\"card shadow-base overflow-hidden\"> <div class=\"card-header borderbottom0\"> <div class=\"media-body mg-t-10 mg-b-10\"> <div class=\"row\"> <div class=\"col-10 my-auto\"> <h4 class=\"tx-normal tx-roboto tx-inverse mg-b-5\">Background Tasks</h4> </div> <div class=\"col-2 my-auto text-center d-flex justify-content-center\"> <button onclick=\"{refresh}\" class=\"{isRefreshActive ? \\'btn-outline-light\\' :\\'cursor-pointer btn-outline-primary \\'} btn btn-block mg-b-0 mg-t-0 mg-r-10 mg-t-0-r10 width100 mobilesbutton mgt-mobile-max-415\" 2> <i if=\"{isRefreshActive}\" class=\"fa fa-spinner fa-spin mg-r-10\"></i> <i if=\"{!isRefreshActive}\" class=\"fa fa-refresh mg-r-10\"></i> Refresh </button> </div> </div> </div> </div> </div> </div> </div> </div> </div> <div class=\"br-pagebody pd-x-20 pd-sm-x-30\"> <div class=\"row\"> <div class=\"col-md-12\"> <div class=\"widget-2\"> <div class=\"dropdown-menu bg-white pd-0 wd-sm pos-static ft-none show\"> <ul class=\"nav nav-tabs nav-tabs-style-1 tx-13\" role=\"tablist\"> <li class=\"nav-item\"> <a class=\"nav-link pd-y-10 active\" data-toggle=\"tab\" href=\"#tabRegular\" role=\"tab\" onclick=\"{updateTabActive}\">Active <b>({totalActiveTask})</b></a> </li> <li class=\"nav-item\"> <a class=\"nav-link pd-y-10\" data-toggle=\"tab\" href=\"#tabExtended\" role=\"tab\" onclick=\"{updatedTabComplete}\">Complete <b>({totalCompleteTask})</b></a> </li> </ul> <div class=\"tab-content pd-30\"> <div class=\"tab-pane active\" id=\"tabRegular\" role=\"tabpanel\"> <table class=\"table table-stripped\"> <thead style=\"background-color: #BBB;\"> <tr> <th width=\"20\">#</th> <th width=\"150\">Type</th> <th width=\"300\">Name</th> <th width=\"150\">Created At</th> <th width=\"80\">Status</th> <th width=\"200\">Actions</th> </tr> </thead> <tbody> <tr if=\"{activeTask.length == 0}\"> <td colspan=\"6\" class=\"text-center\">No Active Task Yet</td> </tr> </tbody> <tbody if=\"{activeTask.length > 0}\" each=\"{item, i in activeTask}\"> <tr> <td>{++i}</td> <td>{item.type_format}</td> <td> <p>id <b>{item.id}</b></p> {item.name} </td> <td>{item.createdAt}</td> <td>{item.state}</td> <td> <button type=\"button\" onclick=\"{() => showDetail(item.id, item.type, item.labels, ⁗active⁗, --i)}\" class=\"ml-1 mr-1 btn btn-info btn-sm cursor-pointer\" if=\"{item.isShowDetailActive ? ⁗disabled⁗ : ⁗enabled⁗}\"> <i if=\"{item.isShowDetailActive}\" class=\"fa fa-spinner fa-spin mg-r-10\"></i> Detail </button> <button if=\"{item.action.canStop}\" onclick=\"{() => this.stop(item.id, item.type, ⁗active⁗, --i)}\" type=\"button\" class=\"ml-1 mr-1 btn btn-warning btn-sm cursor-pointer\" if=\"{item.isStopActive ? ⁗disabled⁗ : ⁗enabled⁗}\"> <i if=\"{item.isStopActive}\" class=\"fa fa-spinner fa-spin mg-r-10\"></i> Stop </button> <button if=\"{item.action.canStart}\" onclick=\"{() => this.start(item.id, item.type, false, ⁗active⁗, --i)}\" class=\"ml-1 mr-1 btn btn-success btn-sm cursor-pointer\" if=\"{item.isStartActive ? ⁗disabled⁗ : ⁗enabled⁗}\"> <i if=\"{item.isStartActive}\" class=\"fa fa-spinner fa-spin mg-r-10\"></i> Start </button> </td> </tr> </tbody> </table> </div> <div class=\"tab-pane\" id=\"tabExtended\" role=\"tabpanel\"> <table class=\"table table-stripped\"> <thead style=\"background-color: #BBB;\"> <tr> <th width=\"20\">#</th> <th width=\"150\">Type</th> <td width=\"300\"></td> <th width=\"150\">Created At</th> <th width=\"80\">Status</th> <th width=\"200\">Actions</th> </tr> </thead> <tbody> <tr if=\"{completeTask.length == 0}\"> <td colspan=\"6\" class=\"text-center\">No Complete Task Yet</td> </tr> <tr each=\"{item, i in completeTask}\"> <td>{++i}</td> <td>{item.type_format}</td> <td> <p>id <b>{item.id}</b></p> {item.name} </td> <td>{item.createdAt}</td> <td>{item.state}</td> <td> <button type=\"button\" onclick=\"{() => showDetail(item.id, item.type, item.labels, ⁗complete⁗, --i)}\" class=\"ml-1 mr-1 btn btn-info btn-sm cursor-pointer\" if=\"{item.isShowDetailActive ? ⁗disabled⁗ : ⁗enabled⁗}\"> <i if=\"{item.isShowDetailActive}\" class=\"fa fa-spinner fa-spin mg-r-10\"></i> Detail </button> <button if=\"{item.action.canStart}\" onclick=\"{() => this.start(item.id, item.type,true, ⁗complete⁗, --i)}\" type=\"button\" class=\"ml-1 mr-1 btn btn-success btn-sm cursor-pointer\" if=\"{item.isStartActive ? ⁗disabled⁗ : ⁗enabled⁗}\"> <i if=\"{item.isStartActive}\" class=\"fa fa-spinner fa-spin mg-r-10\"></i> Restart </button> <button if=\"{item.action.canDownload}\" onclick=\"{() => this.downloadFile(item.downloadLink)}\" type=\"button\" class=\"ml-1 mr-1 btn btn-primary btn-sm cursor-pointer\"> Download </button> <button if=\"{item.action.canDelete}\" onclick=\"{() => this.remove(item.id, item.type, ⁗complete⁗, --i)}\" type=\"button\" class=\"ml-1 mr-1 btn btn-danger btn-sm cursor-pointer\" if=\"{item.isDeleteActive ? ⁗disabled⁗ : ⁗enabled⁗}\"> <i if=\"{item.isDeleteActive}\" class=\"fa fa-spinner fa-spin mg-r-10\"></i> Delete </button> </td> </tr> </tbody> </table> <div class=\"pagination-box ht-80 d-flex align-items-center justify-content-between\"> <div class=\"p-2 mr-auto\"> &nbsp;Showing {pagination.pages} to {pagination.pages} of {pagination.total_data} entries </div> <div> <select class=\"form-control select2 mg-t-20\" data-placeholder=\"Item Limit\" ref=\"pageLimit\" onchange=\"{changeLimit}\"> <option value=\"10\">10</option> <option value=\"20\">20</option> <option value=\"50\">50</option> <option value=\"100\">100</option> </select> </div> <div> <pagging pagination=\"{pagination}\"></pagging> </div> </div> </div> </div> </div> </div> </div> </div> </div> <labeldetailmodal data=\"{labelDetail.data}\"></labelDetailModal>','download-tasks .pagination-box > div,[data-is=\"download-tasks\"] .pagination-box > div{ margin: 6px; }',\"\",(function(t){const e=this;this.labelDetail={data:{}},this.isRefreshActive=!1,this.noTask=!0,this.noTask=!0,this.activeTask=[],this.readyTask=[],this.completeTask=[],this.totalCompleteTask=0,this.totalActiveTask=0,this.autoReloadRunning=!1,this.autoReloadInterval=()=>{setInterval(async()=>{this.autoReloadRunning||(this.autoReloadRunning=!0,Promise.all([this.getActiveTask(),this.getCompleteTask()]).then(t=>{this.autoReloadRunning=!1}))},1e4)},this.query={limit:pageLimit,page:1,total_data:0,pages:0},this.pagination={page:1,cb:async t=>{this.query.page=t,await this.getCompleteTask()}},this.changeLimit=async t=>{t.preventDefault(),this.query.limit=parseInt(t.target.value),this.query.page=1,this.pagination.page=1,await this.getCompleteTask()},this.on(\"mount\",()=>{Promise.all([this.getActiveTask(),this.getCompleteTask()]).then(t=>{})}),$(\"#labelDetailModal\").on(\"hidden.bs.modal\",(function(t){e.labelDetail.data={}})),this.showDetail=async(t,e,a,s,o)=>{this.toggleButton(s,o,\"isShowDetailActive\");try{if(0==a.length){let e=await this.apiGet({path:\"task\",data:{id:t,page:1,limit:1,state:0,field:\"label\"}});a=_.result(e,\"result.data.0.labels\",[]),t=_.result(e,\"result.data.0.id\",\"\"),a.length>0&&\"active\"==s?this.activeTask[o]={...this.activeTask[o],labels:a}:a.length>0&&\"complete\"==s&&(this.completeTask[o]={...this.completeTask[o],labels:a})}a.length>0&&(i.labels.hasOwnProperty(e)?(this.labelDetail={data:i.labels[e].formatForDisplayByLabel(a)},$(\"#labelDetailModal\").modal(\"toggle\"),this.update()):$.notify(\"type not found\",\"error\"),this.toggleButton(s,o,\"isShowDetailActive\"))}catch(t){throw this.toggleButton(s,o,\"isShowDetailActive\"),t}},this.downloadFile=async t=>{try{if(t&&\"\"==t)throw\"donwload link not valid\";let e=`task/download?filename=${t}&token=${localStorage.AuthToken}`,a=APP.apiUrl+e;window.open(a,\"_blank\")}catch(t){$.notify(\"download failed \"+t,\"error\")}},this.refresh=async()=>{this.isRefreshActive=!0,this.update(),await Promise.all([this.getActiveTask(),this.getCompleteTask()]),this.isRefreshActive=!1,this.update()},this.start=async(t,e,a,i,s)=>{this.toggleButton(i,s,\"isStartActive\");try{await this.apiPut({path:\"task/start\",data:{id:t,type:e}});$.notify(`starting task ${e} ${t} sucess`,\"info\"),a?(this.toggleButton(i,s,\"isStartActive\"),await Promise.all([this.getActiveTask(),this.getCompleteTask()])):(this.toggleButton(i,s,\"isStartActive\"),await this.getActiveTask())}catch(t){this.toggleButton(i,s,\"isStartActive\"),$.notify(\"starting task error\",\"error\")}},this.stop=async(t,e,a,i)=>{this.toggleButton(a,i,\"isStopActive\");try{await this.apiPut({path:\"task/stop\",data:{id:t,type:e}});this.toggleButton(a,i,\"isStopActive\"),$.notify(`stoping task ${e} ${t} sucess`,\"info\"),await Promise.all([this.getActiveTask(),this.getCompleteTask()])}catch(t){this.toggleButton(a,i,\"isStopActive\"),$.notify(\"stoping task error\",\"error\")}},this.toggleButton=(t,e,a=\"\")=>{\"active\"==t?this.activeTask[e]={...this.activeTask[e],[a]:!_.result(this.activeTask[e],a,!1)}:\"complete\"==t&&(this.completeTask[e]={...this.completeTask[e],[a]:!_.result(this.completeTask[e],a,!1)}),this.update()},this.remove=async(t,e,a,i)=>{try{this.toggleButton(a,i,\"isDeleteActive\");await this.apiPost({path:\"task/delete\",data:{id:t,type:e}});$.notify(`deleting task ${e} ${t} sucess`,\"info\"),this.toggleButton(a,i,\"isDeleteActive\"),await this.getCompleteTask()}catch(t){this.toggleButton(a,i,\"isDeleteActive\"),$.notify(\"deleting task error\",\"error\")}},this.formatExportStreamTask=function(t={},e=1){JSON.parse(t.payload);let a=JSON.parse(t.output);return t.type_format=\"Export Stream\",t.state=this.renderState(Number(a.state)),7==a.state&&2==e&&(t.state=\"interupted\"),t.action=this.renderButtonAction(a),t.filename=a.filename,t.downloadLink=_.result(a,\"filename.filename\",\"\"),t},this.formatTask=function(t={},e={},a=1){switch(t.isStopActive=_.result(e,\"isStopActive\",!1),t.isStartActive=_.result(e,\"isStartActive\",!1),t.isDeleteActive=_.result(e,\"isDeleteActive\",!1),t.isShowDetailActive=_.result(e,\"isShowDetailActive\",!1),t.createdAt=moment(t.createdAt).format(\"YYYY-MM-DD HH:mm\"),t.type){case\"export_stream\":t=this.formatExportStreamTask(t,a)}return t},this.renderState=function(t){let e=\"\";switch(t){case 0:e=\"pending\";break;case 1:e=\"on process\";break;case 2:e=\"complete\";break;case 3:e=\"finish\";break;case 4:e=\"failed\";break;case 5:e=\"dead\";break;case 6:e=\"waiting\";break;case 7:e=\"interupt\";break;default:return\"-\"}return e},this.renderButtonAction=function(t={},e,a){let i={};switch(i={canDetail:!0},!0){case[1,0,6].includes(t.state):i.canStop=!0;break;case[2].includes(t.state):i.canDownload=!0,i.canDelete=!0;break;case[2].includes(t.state):i.canDelete=!0;case[4].includes(t.state):i.canDelete=!0,i.canStart=!0;break;case[7].includes(t.state):i.canDelete=!0;break;default:i.canStart=!0}return i},this.apiPut=async function(t){return new Promise((e,a)=>{t={...t,success:function(t){e(t)},error:function(t,e,i){a(t,e,i)}},APP.apiPut(t)})},this.apiPost=async function(t){return new Promise((e,a)=>{t={...t,success:function(t){e(t)},error:function(t,e,i){a(t,e,i)}},APP.apiPost(t)})},this.apiGet=async function(t){return new Promise((e,a)=>{t={...t,success:function(t){e(t)},error:function(t,e,i){a(t,e,i)}},APP.apiGet(t)})},this.getActiveTask=async function(){try{let t=await Promise.all([this.apiGet({path:\"task\",data:{page:1,limit:1e3,state:3,field:\"namespace,payload,output,name,type\",user_id:localStorage.userid}}),this.apiGet({path:\"task\",data:{page:1,limit:1e3,state:1,field:\"namespace,payload,output,name,type\",user_id:localStorage.userid}})]);if(this.activeTask=[..._.result(t,\"0.result.data\",[]),..._.result(t,\"1.result.data\",[])],this.activeTask.length>0){let t=t=>this.activeTask.filter(e=>e.id==t);this.activeTask=this.activeTask.map(e=>this.formatTask(e,_.result(t(e.id),\"0\",{}),1))}else this.activeTask=[];this.totalActiveTask=_.result(t,\"0.result.meta.totalData\",0)+_.result(t,\"1.result.meta.totalData\",0),this.update()}catch(t){$.notify(\"get active task error \"+t,\"error\")}},this.updateTabActive=async()=>{await this.getActiveTask()},this.updatedTabComplete=async()=>{await this.getCompleteTask()},this.getCompleteTask=async()=>{try{let t=await this.apiGet({path:\"task\",data:{...this.query,state:2,field:\"namespace,payload,output,name,type\",user_id:localStorage.userid}});if(_.result(t,\"result.data\",[]).length>0){let e=t=>this.completeTask.filter(e=>e.id==t);this.completeTask=t.result.data.map(t=>this.formatTask(t,_.result(e(t.id),\"0\",{}),2))}else this.completeTask=[];this.totalCompleteTask=_.result(t,\"result.meta.totalData\",0),this.pagination.pages=_.result(t,\"result.meta.totalPage\",0),this.pagination.total_data=_.result(t,\"result.meta.totalData\",0),this.update()}catch(t){$.notify(\"get complete task error \"+t,\"error\")}}}))},564:function(t,e,a){\"use strict\";a.r(e);var i=a(180);a(1).tag2(\"facebook\",'<div class=\"panel\"> <header-menu></header-menu> </div> <div class=\"container-fluid fade\" style=\"margin-top:20px;\"> <div class=\"row\"> <div class=\"col-md-12\"> <div class=\"panel\"> <div class=\"panel-body\"> <div class=\"row\"> <div class=\"col-md-12\"> <div class=\"row\" style=\" border-bottom: 2px solid #eee;\"> <div class=\"col-md-9\" style=\"border-right: 1px solid #eee ;\"> <h4 class=\"panel-head\"> Facebook<h4> <hr> <div class=\"panel-body\"> <form class=\"form-horizontal\"> <div class=\"form-group\"> <label for=\"date\" class=\"control-label col-sm-3\"> <p>Facebook Account</p> </label> <div class=\"col-sm-6\"> <select class=\"form-control\" id=\"custom\" multiple=\"multiple\" ref=\"facebook\" required> <option selected=\"{selected:o.fans_url}\" each=\"{o,i in getfanpage}\" id=\"{o.fans_page_id}\">{o.fans_url}</option> </select> <i class=\"fa fa-info-circle fa-1x toltiptext visible-xs visible-sm\" aria-hidden=\"true\" data-toggle=\"tooltip\" title=\"Put facebook account name for author that want to be registered as a buzzer\" data-placement=\"left\"></i> </div> <div class=\"col-sm-3\"><i class=\"fa fa-info-circle fa-1x hidden-xs hidden-sm\" aria-hidden=\"true\" style=\"margin-top:20px\" data-toggle=\"tooltip\" title=\"facebook account \" data-placement=\"right\"></i> </div> </div> </form> </div> </div> <div class=\"col-md-3\"> </div> </div> <div class=\"row\"> <div class=\"col-md-12\"> <div class=\"col-md-2 col-md-offset-10\"> <div>&nbsp;</div> <div id=\"addprojectaccount\" class=\"accsaved pointer\" onclick=\"{postfacebook}\">save</div> </div> </div> </div> </div> </div> </div> </div> </div> </div>',\"\",\"\",(function(t){i.default.bind(this)()}))},565:function(t,e,a){\"use strict\";a.r(e);a(13),a(10),a(397),a(396),a(395),a(394);a(1).tag2(\"healthindexaccount\",'<breadcrumb current=\"Dashboard Digital Helath Index\" ref=\"breadcrumb\" mode=\"project\"></breadcrumb> <div class=\"br-pagebody pd-x-20 pd-sm-x-30\"> <div class=\"row\"> <div class=\"col-md-12\"> <div class=\"widget-2\"> <div class=\"card shadow-base overflow-hidden\"> <div class=\"card-header borderbottom0\"> <div class=\"media-body mg-t-10\"> <h4 class=\"tx-normal tx-roboto tx-inverse mg-b-5\">DIGITAL HEALTH INDEX</h4> </div> <div class=\"btn-group pull-right mg-r-m-0\" role=\"group\" aria-label=\"Basic example\"> <div class=\"pd-x-25 tx-11 pd-y-12 tx-mont tx-medium datepickerbacgraoud\"> <span> <date-picker cb=\"{setDate}\" since=\"{localStorage.since}\" until=\"{localStorage.until}\" class=\"fc-datepicker btn bg-grey-50 padding-10-20 no-border color-grey-600 pull-right date-style\" style=\"padding:0px\"></date-picker></span> </div> </div> </div> </div> </div> </div> </div> <totalhealthindex ref=\"totalhealthindex\"></totalhealthindex> <div class=\"row row-sm\"> <div class=\"col-md-12 mg-t-20\"> <sentimentchannels ref=\"sentimenperchannels\"></sentimentchannels> </div> </div> <div class=\"row row-sm\"> <div class=\"col-md-6 mg-t-20\"> <interactionmetric ref=\"interactionmetric\"></interactionmetric> </div> <div class=\"col-md-6 mg-t-20\"> <averagedailymentions ref=\"averagedailymention\"></averagedailymentions> </div> </div> </div>',\"\",\"\",(function(t){const e=APP.services.HealthIndex,a=[\"totalhealthindex\",\"sentimenperchannels\",\"interactionmetric\",\"averagedailymention\"];this.search={since:null,until:null,project:null,service_category:null},this.getHealth=async()=>{const t=new e;return await t.getSummary(this.search)},this.getHealthSentiment=async()=>{const t=new e;return await t.getSentiment(this.search)},this.setAllIsLoadingMode=()=>{for(const t of a)\"totalhealthindex\"===t&&(this.refs[t].isLoadingDiff=!0,this.refs[t].isLoadingSummaryItems=!0),this.refs[t].isLoading=!0;this.update()},this.setDate=(t,e)=>{this.search.since=t,this.search.until=e,this.refreshLoadData()},this.renderComponent=(t,e)=>{APP.log(\"refreshing data on ref:\",t),this.refs[t].render(e)},this.refreshLoadData=async(t,e)=>{APP.log(\"health-index-account: updateDate\"),this.setAllIsLoadingMode(),this.getHealth().then(({summary:t,details:e,available_channels:a})=>{this.renderComponent(\"totalhealthindex\",{summary:t,details:e,ac:a,search:this.search}),this.renderComponent(\"interactionmetric\",{summary:t,details:e,ac:a,search:this.search})}),this.getHealthSentiment().then(({items:t,available_channels:e})=>{this.renderComponent(\"sentimenperchannels\",{items:t,ac:e,search:this.search})}),this.renderComponent(\"averagedailymention\")},this.on(\"mount\",()=>{APP.log(\"health-index-account: mount\"),menuActive.trigger(\"activated\",[\"advance_analysis\",\"dhi\"]),urlStream.trigger(\"changeUrl\",\"health-index-r10\"),urlStream.trigger(\"Urlproject\",p(\"project\")?p(\"project\"):APP.getProject()),APP.currentProject=this.search.project=p(\"project\")?p(\"project\"):APP.getProject(),this.update(),ripple10.loaddaterangepicker(),$(\"body,html\").animate({scrollTop:0},500)})}))}}]);","extractedComments":[]}